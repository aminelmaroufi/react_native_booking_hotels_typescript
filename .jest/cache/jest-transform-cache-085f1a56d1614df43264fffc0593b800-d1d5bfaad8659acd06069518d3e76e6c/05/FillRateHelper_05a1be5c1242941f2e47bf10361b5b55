2b4f039b33e7095a53f40b30a5f20b2e
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var Info = (0, _createClass2.default)(function Info() {
  (0, _classCallCheck2.default)(this, Info);
  this.any_blank_count = 0;
  this.any_blank_ms = 0;
  this.any_blank_speed_sum = 0;
  this.mostly_blank_count = 0;
  this.mostly_blank_ms = 0;
  this.pixels_blank = 0;
  this.pixels_sampled = 0;
  this.pixels_scrolled = 0;
  this.total_time_spent = 0;
  this.sample_count = 0;
});
var DEBUG = false;
var _listeners = [];
var _minSampleCount = 10;
var _sampleRate = DEBUG ? 1 : null;
var FillRateHelper = function () {
  function FillRateHelper(getFrameMetrics) {
    (0, _classCallCheck2.default)(this, FillRateHelper);
    this._anyBlankStartTime = null;
    this._enabled = false;
    this._info = new Info();
    this._mostlyBlankStartTime = null;
    this._samplesStartTime = null;
    this._getFrameMetrics = getFrameMetrics;
    this._enabled = (_sampleRate || 0) > Math.random();
    this._resetData();
  }
  (0, _createClass2.default)(FillRateHelper, [{
    key: "activate",
    value: function activate() {
      if (this._enabled && this._samplesStartTime == null) {
        DEBUG && console.debug('FillRateHelper: activate');
        this._samplesStartTime = global.performance.now();
      }
    }
  }, {
    key: "deactivateAndFlush",
    value: function deactivateAndFlush() {
      if (!this._enabled) {
        return;
      }
      var start = this._samplesStartTime;
      if (start == null) {
        DEBUG && console.debug('FillRateHelper: bail on deactivate with no start time');
        return;
      }
      if (this._info.sample_count < _minSampleCount) {
        this._resetData();
        return;
      }
      var total_time_spent = global.performance.now() - start;
      var info = (0, _extends2.default)({}, this._info, {
        total_time_spent: total_time_spent
      });
      if (DEBUG) {
        var derived = {
          avg_blankness: this._info.pixels_blank / this._info.pixels_sampled,
          avg_speed: this._info.pixels_scrolled / (total_time_spent / 1000),
          avg_speed_when_any_blank: this._info.any_blank_speed_sum / this._info.any_blank_count,
          any_blank_per_min: this._info.any_blank_count / (total_time_spent / 1000 / 60),
          any_blank_time_frac: this._info.any_blank_ms / total_time_spent,
          mostly_blank_per_min: this._info.mostly_blank_count / (total_time_spent / 1000 / 60),
          mostly_blank_time_frac: this._info.mostly_blank_ms / total_time_spent
        };
        for (var key in derived) {
          derived[key] = Math.round(1000 * derived[key]) / 1000;
        }
        console.debug('FillRateHelper deactivateAndFlush: ', {
          derived: derived,
          info: info
        });
      }
      _listeners.forEach(function (listener) {
        return listener(info);
      });
      this._resetData();
    }
  }, {
    key: "computeBlankness",
    value: function computeBlankness(props, state, scrollMetrics) {
      if (!this._enabled || props.getItemCount(props.data) === 0 || this._samplesStartTime == null) {
        return 0;
      }
      var dOffset = scrollMetrics.dOffset,
        offset = scrollMetrics.offset,
        velocity = scrollMetrics.velocity,
        visibleLength = scrollMetrics.visibleLength;
      this._info.sample_count++;
      this._info.pixels_sampled += Math.round(visibleLength);
      this._info.pixels_scrolled += Math.round(Math.abs(dOffset));
      var scrollSpeed = Math.round(Math.abs(velocity) * 1000);
      var now = global.performance.now();
      if (this._anyBlankStartTime != null) {
        this._info.any_blank_ms += now - this._anyBlankStartTime;
      }
      this._anyBlankStartTime = null;
      if (this._mostlyBlankStartTime != null) {
        this._info.mostly_blank_ms += now - this._mostlyBlankStartTime;
      }
      this._mostlyBlankStartTime = null;
      var blankTop = 0;
      var first = state.first;
      var firstFrame = this._getFrameMetrics(first);
      while (first <= state.last && (!firstFrame || !firstFrame.inLayout)) {
        firstFrame = this._getFrameMetrics(first);
        first++;
      }
      if (firstFrame && first > 0) {
        blankTop = Math.min(visibleLength, Math.max(0, firstFrame.offset - offset));
      }
      var blankBottom = 0;
      var last = state.last;
      var lastFrame = this._getFrameMetrics(last);
      while (last >= state.first && (!lastFrame || !lastFrame.inLayout)) {
        lastFrame = this._getFrameMetrics(last);
        last--;
      }
      if (lastFrame && last < props.getItemCount(props.data) - 1) {
        var bottomEdge = lastFrame.offset + lastFrame.length;
        blankBottom = Math.min(visibleLength, Math.max(0, offset + visibleLength - bottomEdge));
      }
      var pixels_blank = Math.round(blankTop + blankBottom);
      var blankness = pixels_blank / visibleLength;
      if (blankness > 0) {
        this._anyBlankStartTime = now;
        this._info.any_blank_speed_sum += scrollSpeed;
        this._info.any_blank_count++;
        this._info.pixels_blank += pixels_blank;
        if (blankness > 0.5) {
          this._mostlyBlankStartTime = now;
          this._info.mostly_blank_count++;
        }
      } else if (scrollSpeed < 0.01 || Math.abs(dOffset) < 1) {
        this.deactivateAndFlush();
      }
      return blankness;
    }
  }, {
    key: "enabled",
    value: function enabled() {
      return this._enabled;
    }
  }, {
    key: "_resetData",
    value: function _resetData() {
      this._anyBlankStartTime = null;
      this._info = new Info();
      this._mostlyBlankStartTime = null;
      this._samplesStartTime = null;
    }
  }], [{
    key: "addListener",
    value: function addListener(callback) {
      if (_sampleRate === null) {
        console.warn('Call `FillRateHelper.setSampleRate` before `addListener`.');
      }
      _listeners.push(callback);
      return {
        remove: function remove() {
          _listeners = _listeners.filter(function (listener) {
            return callback !== listener;
          });
        }
      };
    }
  }, {
    key: "setSampleRate",
    value: function setSampleRate(sampleRate) {
      _sampleRate = sampleRate;
    }
  }, {
    key: "setMinSampleCount",
    value: function setMinSampleCount(minSampleCount) {
      _minSampleCount = minSampleCount;
    }
  }]);
  return FillRateHelper;
}();
module.exports = FillRateHelper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9leHRlbmRzMiIsIl9jcmVhdGVDbGFzczIiLCJfY2xhc3NDYWxsQ2hlY2syIiwiSW5mbyIsImRlZmF1bHQiLCJhbnlfYmxhbmtfY291bnQiLCJhbnlfYmxhbmtfbXMiLCJhbnlfYmxhbmtfc3BlZWRfc3VtIiwibW9zdGx5X2JsYW5rX2NvdW50IiwibW9zdGx5X2JsYW5rX21zIiwicGl4ZWxzX2JsYW5rIiwicGl4ZWxzX3NhbXBsZWQiLCJwaXhlbHNfc2Nyb2xsZWQiLCJ0b3RhbF90aW1lX3NwZW50Iiwic2FtcGxlX2NvdW50IiwiREVCVUciLCJfbGlzdGVuZXJzIiwiX21pblNhbXBsZUNvdW50IiwiX3NhbXBsZVJhdGUiLCJGaWxsUmF0ZUhlbHBlciIsImdldEZyYW1lTWV0cmljcyIsIl9hbnlCbGFua1N0YXJ0VGltZSIsIl9lbmFibGVkIiwiX2luZm8iLCJfbW9zdGx5QmxhbmtTdGFydFRpbWUiLCJfc2FtcGxlc1N0YXJ0VGltZSIsIl9nZXRGcmFtZU1ldHJpY3MiLCJNYXRoIiwicmFuZG9tIiwiX3Jlc2V0RGF0YSIsImtleSIsInZhbHVlIiwiYWN0aXZhdGUiLCJjb25zb2xlIiwiZGVidWciLCJnbG9iYWwiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImRlYWN0aXZhdGVBbmRGbHVzaCIsInN0YXJ0IiwiaW5mbyIsImRlcml2ZWQiLCJhdmdfYmxhbmtuZXNzIiwiYXZnX3NwZWVkIiwiYXZnX3NwZWVkX3doZW5fYW55X2JsYW5rIiwiYW55X2JsYW5rX3Blcl9taW4iLCJhbnlfYmxhbmtfdGltZV9mcmFjIiwibW9zdGx5X2JsYW5rX3Blcl9taW4iLCJtb3N0bHlfYmxhbmtfdGltZV9mcmFjIiwicm91bmQiLCJmb3JFYWNoIiwibGlzdGVuZXIiLCJjb21wdXRlQmxhbmtuZXNzIiwicHJvcHMiLCJzdGF0ZSIsInNjcm9sbE1ldHJpY3MiLCJnZXRJdGVtQ291bnQiLCJkYXRhIiwiZE9mZnNldCIsIm9mZnNldCIsInZlbG9jaXR5IiwidmlzaWJsZUxlbmd0aCIsImFicyIsInNjcm9sbFNwZWVkIiwiYmxhbmtUb3AiLCJmaXJzdCIsImZpcnN0RnJhbWUiLCJsYXN0IiwiaW5MYXlvdXQiLCJtaW4iLCJtYXgiLCJibGFua0JvdHRvbSIsImxhc3RGcmFtZSIsImJvdHRvbUVkZ2UiLCJsZW5ndGgiLCJibGFua25lc3MiLCJlbmFibGVkIiwiYWRkTGlzdGVuZXIiLCJjYWxsYmFjayIsIndhcm4iLCJwdXNoIiwicmVtb3ZlIiwiZmlsdGVyIiwic2V0U2FtcGxlUmF0ZSIsInNhbXBsZVJhdGUiLCJzZXRNaW5TYW1wbGVDb3VudCIsIm1pblNhbXBsZUNvdW50IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIkZpbGxSYXRlSGVscGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydCB0eXBlIEZpbGxSYXRlSW5mbyA9IEluZm87XG5cbmNsYXNzIEluZm8ge1xuICBhbnlfYmxhbmtfY291bnQ6IG51bWJlciA9IDA7XG4gIGFueV9ibGFua19tczogbnVtYmVyID0gMDtcbiAgYW55X2JsYW5rX3NwZWVkX3N1bTogbnVtYmVyID0gMDtcbiAgbW9zdGx5X2JsYW5rX2NvdW50OiBudW1iZXIgPSAwO1xuICBtb3N0bHlfYmxhbmtfbXM6IG51bWJlciA9IDA7XG4gIHBpeGVsc19ibGFuazogbnVtYmVyID0gMDtcbiAgcGl4ZWxzX3NhbXBsZWQ6IG51bWJlciA9IDA7XG4gIHBpeGVsc19zY3JvbGxlZDogbnVtYmVyID0gMDtcbiAgdG90YWxfdGltZV9zcGVudDogbnVtYmVyID0gMDtcbiAgc2FtcGxlX2NvdW50OiBudW1iZXIgPSAwO1xufVxuXG50eXBlIEZyYW1lTWV0cmljcyA9IHtcbiAgaW5MYXlvdXQ/OiBib29sZWFuLFxuICBsZW5ndGg6IG51bWJlcixcbiAgb2Zmc2V0OiBudW1iZXIsXG4gIC4uLlxufTtcblxuY29uc3QgREVCVUcgPSBmYWxzZTtcblxubGV0IF9saXN0ZW5lcnM6IEFycmF5PChJbmZvKSA9PiB2b2lkPiA9IFtdO1xubGV0IF9taW5TYW1wbGVDb3VudCA9IDEwO1xubGV0IF9zYW1wbGVSYXRlID0gREVCVUcgPyAxIDogbnVsbDtcblxuLyoqXG4gKiBBIGhlbHBlciBjbGFzcyBmb3IgZGV0ZWN0aW5nIHdoZW4gdGhlIG1heGltZW0gZmlsbCByYXRlIG9mIGBWaXJ0dWFsaXplZExpc3RgIGlzIGV4Y2VlZGVkLlxuICogQnkgZGVmYXVsdCB0aGUgc2FtcGxpbmcgcmF0ZSBpcyBzZXQgdG8gemVybyBhbmQgdGhpcyB3aWxsIGRvIG5vdGhpbmcuIElmIHlvdSB3YW50IHRvIGNvbGxlY3RcbiAqIHNhbXBsZXMgKGUuZy4gdG8gbG9nIHRoZW0pLCBtYWtlIHN1cmUgdG8gY2FsbCBgRmlsbFJhdGVIZWxwZXIuc2V0U2FtcGxlUmF0ZSgwLjAtMS4wKWAuXG4gKlxuICogTGlzdGVuZXJzIGFuZCBzYW1wbGUgcmF0ZSBhcmUgZ2xvYmFsIGZvciBhbGwgYFZpcnR1YWxpemVkTGlzdGBzIC0gdHlwaWNhbCB1c2FnZSB3aWxsIGNvbWJpbmUgd2l0aFxuICogYFNjZW5lVHJhY2tlci5nZXRBY3RpdmVTY2VuZWAgdG8gZGV0ZXJtaW5lIHRoZSBjb250ZXh0IG9mIHRoZSBldmVudHMuXG4gKi9cbmNsYXNzIEZpbGxSYXRlSGVscGVyIHtcbiAgX2FueUJsYW5rU3RhcnRUaW1lID0gKG51bGw6ID9udW1iZXIpO1xuICBfZW5hYmxlZCA9IGZhbHNlO1xuICBfZ2V0RnJhbWVNZXRyaWNzOiAoaW5kZXg6IG51bWJlcikgPT4gP0ZyYW1lTWV0cmljcztcbiAgX2luZm8gPSBuZXcgSW5mbygpO1xuICBfbW9zdGx5QmxhbmtTdGFydFRpbWUgPSAobnVsbDogP251bWJlcik7XG4gIF9zYW1wbGVzU3RhcnRUaW1lID0gKG51bGw6ID9udW1iZXIpO1xuXG4gIHN0YXRpYyBhZGRMaXN0ZW5lcihcbiAgICBjYWxsYmFjazogRmlsbFJhdGVJbmZvID0+IHZvaWQsXG4gICk6IHtyZW1vdmU6ICgpID0+IHZvaWQsIC4uLn0ge1xuICAgIGlmIChfc2FtcGxlUmF0ZSA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKCdDYWxsIGBGaWxsUmF0ZUhlbHBlci5zZXRTYW1wbGVSYXRlYCBiZWZvcmUgYGFkZExpc3RlbmVyYC4nKTtcbiAgICB9XG4gICAgX2xpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgICByZXR1cm4ge1xuICAgICAgcmVtb3ZlOiAoKSA9PiB7XG4gICAgICAgIF9saXN0ZW5lcnMgPSBfbGlzdGVuZXJzLmZpbHRlcihsaXN0ZW5lciA9PiBjYWxsYmFjayAhPT0gbGlzdGVuZXIpO1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgc3RhdGljIHNldFNhbXBsZVJhdGUoc2FtcGxlUmF0ZTogbnVtYmVyKSB7XG4gICAgX3NhbXBsZVJhdGUgPSBzYW1wbGVSYXRlO1xuICB9XG5cbiAgc3RhdGljIHNldE1pblNhbXBsZUNvdW50KG1pblNhbXBsZUNvdW50OiBudW1iZXIpIHtcbiAgICBfbWluU2FtcGxlQ291bnQgPSBtaW5TYW1wbGVDb3VudDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGdldEZyYW1lTWV0cmljczogKGluZGV4OiBudW1iZXIpID0+ID9GcmFtZU1ldHJpY3MpIHtcbiAgICB0aGlzLl9nZXRGcmFtZU1ldHJpY3MgPSBnZXRGcmFtZU1ldHJpY3M7XG4gICAgdGhpcy5fZW5hYmxlZCA9IChfc2FtcGxlUmF0ZSB8fCAwKSA+IE1hdGgucmFuZG9tKCk7XG4gICAgdGhpcy5fcmVzZXREYXRhKCk7XG4gIH1cblxuICBhY3RpdmF0ZSgpIHtcbiAgICBpZiAodGhpcy5fZW5hYmxlZCAmJiB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lID09IG51bGwpIHtcbiAgICAgIERFQlVHICYmIGNvbnNvbGUuZGVidWcoJ0ZpbGxSYXRlSGVscGVyOiBhY3RpdmF0ZScpO1xuICAgICAgdGhpcy5fc2FtcGxlc1N0YXJ0VGltZSA9IGdsb2JhbC5wZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9XG4gIH1cblxuICBkZWFjdGl2YXRlQW5kRmx1c2goKSB7XG4gICAgaWYgKCF0aGlzLl9lbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fc2FtcGxlc1N0YXJ0VGltZTsgLy8gY29uc3QgZm9yIGZsb3dcbiAgICBpZiAoc3RhcnQgPT0gbnVsbCkge1xuICAgICAgREVCVUcgJiZcbiAgICAgICAgY29uc29sZS5kZWJ1ZygnRmlsbFJhdGVIZWxwZXI6IGJhaWwgb24gZGVhY3RpdmF0ZSB3aXRoIG5vIHN0YXJ0IHRpbWUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2luZm8uc2FtcGxlX2NvdW50IDwgX21pblNhbXBsZUNvdW50KSB7XG4gICAgICAvLyBEb24ndCBib3RoZXIgd2l0aCB1bmRlci1zYW1wbGVkIGV2ZW50cy5cbiAgICAgIHRoaXMuX3Jlc2V0RGF0YSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0b3RhbF90aW1lX3NwZW50ID0gZ2xvYmFsLnBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQ7XG4gICAgY29uc3QgaW5mbzogYW55ID0ge1xuICAgICAgLi4udGhpcy5faW5mbyxcbiAgICAgIHRvdGFsX3RpbWVfc3BlbnQsXG4gICAgfTtcbiAgICBpZiAoREVCVUcpIHtcbiAgICAgIGNvbnN0IGRlcml2ZWQgPSB7XG4gICAgICAgIGF2Z19ibGFua25lc3M6IHRoaXMuX2luZm8ucGl4ZWxzX2JsYW5rIC8gdGhpcy5faW5mby5waXhlbHNfc2FtcGxlZCxcbiAgICAgICAgYXZnX3NwZWVkOiB0aGlzLl9pbmZvLnBpeGVsc19zY3JvbGxlZCAvICh0b3RhbF90aW1lX3NwZW50IC8gMTAwMCksXG4gICAgICAgIGF2Z19zcGVlZF93aGVuX2FueV9ibGFuazpcbiAgICAgICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19zcGVlZF9zdW0gLyB0aGlzLl9pbmZvLmFueV9ibGFua19jb3VudCxcbiAgICAgICAgYW55X2JsYW5rX3Blcl9taW46XG4gICAgICAgICAgdGhpcy5faW5mby5hbnlfYmxhbmtfY291bnQgLyAodG90YWxfdGltZV9zcGVudCAvIDEwMDAgLyA2MCksXG4gICAgICAgIGFueV9ibGFua190aW1lX2ZyYWM6IHRoaXMuX2luZm8uYW55X2JsYW5rX21zIC8gdG90YWxfdGltZV9zcGVudCxcbiAgICAgICAgbW9zdGx5X2JsYW5rX3Blcl9taW46XG4gICAgICAgICAgdGhpcy5faW5mby5tb3N0bHlfYmxhbmtfY291bnQgLyAodG90YWxfdGltZV9zcGVudCAvIDEwMDAgLyA2MCksXG4gICAgICAgIG1vc3RseV9ibGFua190aW1lX2ZyYWM6IHRoaXMuX2luZm8ubW9zdGx5X2JsYW5rX21zIC8gdG90YWxfdGltZV9zcGVudCxcbiAgICAgIH07XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBkZXJpdmVkKSB7XG4gICAgICAgIGRlcml2ZWRba2V5XSA9IE1hdGgucm91bmQoMTAwMCAqIGRlcml2ZWRba2V5XSkgLyAxMDAwO1xuICAgICAgfVxuICAgICAgY29uc29sZS5kZWJ1ZygnRmlsbFJhdGVIZWxwZXIgZGVhY3RpdmF0ZUFuZEZsdXNoOiAnLCB7ZGVyaXZlZCwgaW5mb30pO1xuICAgIH1cbiAgICBfbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoaW5mbykpO1xuICAgIHRoaXMuX3Jlc2V0RGF0YSgpO1xuICB9XG5cbiAgY29tcHV0ZUJsYW5rbmVzcyhcbiAgICBwcm9wczoge1xuICAgICAgZGF0YTogYW55LFxuICAgICAgZ2V0SXRlbUNvdW50OiAoZGF0YTogYW55KSA9PiBudW1iZXIsXG4gICAgICBpbml0aWFsTnVtVG9SZW5kZXI/OiA/bnVtYmVyLFxuICAgICAgLi4uXG4gICAgfSxcbiAgICBzdGF0ZToge1xuICAgICAgZmlyc3Q6IG51bWJlcixcbiAgICAgIGxhc3Q6IG51bWJlcixcbiAgICAgIC4uLlxuICAgIH0sXG4gICAgc2Nyb2xsTWV0cmljczoge1xuICAgICAgZE9mZnNldDogbnVtYmVyLFxuICAgICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgICB2ZWxvY2l0eTogbnVtYmVyLFxuICAgICAgdmlzaWJsZUxlbmd0aDogbnVtYmVyLFxuICAgICAgLi4uXG4gICAgfSxcbiAgKTogbnVtYmVyIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5fZW5hYmxlZCB8fFxuICAgICAgcHJvcHMuZ2V0SXRlbUNvdW50KHByb3BzLmRhdGEpID09PSAwIHx8XG4gICAgICB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lID09IG51bGxcbiAgICApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBjb25zdCB7ZE9mZnNldCwgb2Zmc2V0LCB2ZWxvY2l0eSwgdmlzaWJsZUxlbmd0aH0gPSBzY3JvbGxNZXRyaWNzO1xuXG4gICAgLy8gRGVub21pbmF0b3IgbWV0cmljcyB0aGF0IHdlIHRyYWNrIGZvciBhbGwgZXZlbnRzIC0gbW9zdCBvZiB0aGUgdGltZSB0aGVyZSBpcyBubyBibGFua25lc3MgYW5kXG4gICAgLy8gd2Ugd2FudCB0byBjYXB0dXJlIHRoYXQuXG4gICAgdGhpcy5faW5mby5zYW1wbGVfY291bnQrKztcbiAgICB0aGlzLl9pbmZvLnBpeGVsc19zYW1wbGVkICs9IE1hdGgucm91bmQodmlzaWJsZUxlbmd0aCk7XG4gICAgdGhpcy5faW5mby5waXhlbHNfc2Nyb2xsZWQgKz0gTWF0aC5yb3VuZChNYXRoLmFicyhkT2Zmc2V0KSk7XG4gICAgY29uc3Qgc2Nyb2xsU3BlZWQgPSBNYXRoLnJvdW5kKE1hdGguYWJzKHZlbG9jaXR5KSAqIDEwMDApOyAvLyBweCAvIHNlY1xuXG4gICAgLy8gV2hldGhlciBibGFuayBub3cgb3Igbm90LCByZWNvcmQgdGhlIGVsYXBzZWQgdGltZSBibGFuayBpZiB3ZSB3ZXJlIGJsYW5rIGxhc3QgdGltZS5cbiAgICBjb25zdCBub3cgPSBnbG9iYWwucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgaWYgKHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX21zICs9IG5vdyAtIHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lO1xuICAgIH1cbiAgICB0aGlzLl9hbnlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG4gICAgaWYgKHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2luZm8ubW9zdGx5X2JsYW5rX21zICs9IG5vdyAtIHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lO1xuICAgIH1cbiAgICB0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG5cbiAgICBsZXQgYmxhbmtUb3AgPSAwO1xuICAgIGxldCBmaXJzdCA9IHN0YXRlLmZpcnN0O1xuICAgIGxldCBmaXJzdEZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGZpcnN0KTtcbiAgICB3aGlsZSAoZmlyc3QgPD0gc3RhdGUubGFzdCAmJiAoIWZpcnN0RnJhbWUgfHwgIWZpcnN0RnJhbWUuaW5MYXlvdXQpKSB7XG4gICAgICBmaXJzdEZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGZpcnN0KTtcbiAgICAgIGZpcnN0Kys7XG4gICAgfVxuICAgIC8vIE9ubHkgY291bnQgYmxhbmtUb3AgaWYgd2UgYXJlbid0IHJlbmRlcmluZyB0aGUgZmlyc3QgaXRlbSwgb3RoZXJ3aXNlIHdlIHdpbGwgY291bnQgdGhlIGhlYWRlclxuICAgIC8vIGFzIGJsYW5rLlxuICAgIGlmIChmaXJzdEZyYW1lICYmIGZpcnN0ID4gMCkge1xuICAgICAgYmxhbmtUb3AgPSBNYXRoLm1pbihcbiAgICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgICAgTWF0aC5tYXgoMCwgZmlyc3RGcmFtZS5vZmZzZXQgLSBvZmZzZXQpLFxuICAgICAgKTtcbiAgICB9XG4gICAgbGV0IGJsYW5rQm90dG9tID0gMDtcbiAgICBsZXQgbGFzdCA9IHN0YXRlLmxhc3Q7XG4gICAgbGV0IGxhc3RGcmFtZSA9IHRoaXMuX2dldEZyYW1lTWV0cmljcyhsYXN0KTtcbiAgICB3aGlsZSAobGFzdCA+PSBzdGF0ZS5maXJzdCAmJiAoIWxhc3RGcmFtZSB8fCAhbGFzdEZyYW1lLmluTGF5b3V0KSkge1xuICAgICAgbGFzdEZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGxhc3QpO1xuICAgICAgbGFzdC0tO1xuICAgIH1cbiAgICAvLyBPbmx5IGNvdW50IGJsYW5rQm90dG9tIGlmIHdlIGFyZW4ndCByZW5kZXJpbmcgdGhlIGxhc3QgaXRlbSwgb3RoZXJ3aXNlIHdlIHdpbGwgY291bnQgdGhlXG4gICAgLy8gZm9vdGVyIGFzIGJsYW5rLlxuICAgIGlmIChsYXN0RnJhbWUgJiYgbGFzdCA8IHByb3BzLmdldEl0ZW1Db3VudChwcm9wcy5kYXRhKSAtIDEpIHtcbiAgICAgIGNvbnN0IGJvdHRvbUVkZ2UgPSBsYXN0RnJhbWUub2Zmc2V0ICsgbGFzdEZyYW1lLmxlbmd0aDtcbiAgICAgIGJsYW5rQm90dG9tID0gTWF0aC5taW4oXG4gICAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgICAgIE1hdGgubWF4KDAsIG9mZnNldCArIHZpc2libGVMZW5ndGggLSBib3R0b21FZGdlKSxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHBpeGVsc19ibGFuayA9IE1hdGgucm91bmQoYmxhbmtUb3AgKyBibGFua0JvdHRvbSk7XG4gICAgY29uc3QgYmxhbmtuZXNzID0gcGl4ZWxzX2JsYW5rIC8gdmlzaWJsZUxlbmd0aDtcbiAgICBpZiAoYmxhbmtuZXNzID4gMCkge1xuICAgICAgdGhpcy5fYW55QmxhbmtTdGFydFRpbWUgPSBub3c7XG4gICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19zcGVlZF9zdW0gKz0gc2Nyb2xsU3BlZWQ7XG4gICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19jb3VudCsrO1xuICAgICAgdGhpcy5faW5mby5waXhlbHNfYmxhbmsgKz0gcGl4ZWxzX2JsYW5rO1xuICAgICAgaWYgKGJsYW5rbmVzcyA+IDAuNSkge1xuICAgICAgICB0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZSA9IG5vdztcbiAgICAgICAgdGhpcy5faW5mby5tb3N0bHlfYmxhbmtfY291bnQrKztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNjcm9sbFNwZWVkIDwgMC4wMSB8fCBNYXRoLmFicyhkT2Zmc2V0KSA8IDEpIHtcbiAgICAgIHRoaXMuZGVhY3RpdmF0ZUFuZEZsdXNoKCk7XG4gICAgfVxuICAgIHJldHVybiBibGFua25lc3M7XG4gIH1cblxuICBlbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9lbmFibGVkO1xuICB9XG5cbiAgX3Jlc2V0RGF0YSgpIHtcbiAgICB0aGlzLl9hbnlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG4gICAgdGhpcy5faW5mbyA9IG5ldyBJbmZvKCk7XG4gICAgdGhpcy5fbW9zdGx5QmxhbmtTdGFydFRpbWUgPSBudWxsO1xuICAgIHRoaXMuX3NhbXBsZXNTdGFydFRpbWUgPSBudWxsO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRmlsbFJhdGVIZWxwZXI7XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBLElBQUFDLFNBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFFLGFBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFHLGdCQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUlQSSxJQUFJLE9BQUFGLGFBQUEsQ0FBQUcsT0FBQSxXQUFBRCxLQUFBO0VBQUEsSUFBQUQsZ0JBQUEsQ0FBQUUsT0FBQSxRQUFBRCxJQUFBO0VBQUEsS0FDUkUsZUFBZSxHQUFXLENBQUM7RUFBQSxLQUMzQkMsWUFBWSxHQUFXLENBQUM7RUFBQSxLQUN4QkMsbUJBQW1CLEdBQVcsQ0FBQztFQUFBLEtBQy9CQyxrQkFBa0IsR0FBVyxDQUFDO0VBQUEsS0FDOUJDLGVBQWUsR0FBVyxDQUFDO0VBQUEsS0FDM0JDLFlBQVksR0FBVyxDQUFDO0VBQUEsS0FDeEJDLGNBQWMsR0FBVyxDQUFDO0VBQUEsS0FDMUJDLGVBQWUsR0FBVyxDQUFDO0VBQUEsS0FDM0JDLGdCQUFnQixHQUFXLENBQUM7RUFBQSxLQUM1QkMsWUFBWSxHQUFXLENBQUM7QUFBQTtBQVUxQixJQUFNQyxLQUFLLEdBQUcsS0FBSztBQUVuQixJQUFJQyxVQUFpQyxHQUFHLEVBQUU7QUFDMUMsSUFBSUMsZUFBZSxHQUFHLEVBQUU7QUFDeEIsSUFBSUMsV0FBVyxHQUFHSCxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUk7QUFBQyxJQVU3QkksY0FBYztFQThCbEIsU0FBQUEsZUFBWUMsZUFBaUQsRUFBRTtJQUFBLElBQUFsQixnQkFBQSxDQUFBRSxPQUFBLFFBQUFlLGNBQUE7SUFBQSxLQTdCL0RFLGtCQUFrQixHQUFJLElBQUk7SUFBQSxLQUMxQkMsUUFBUSxHQUFHLEtBQUs7SUFBQSxLQUVoQkMsS0FBSyxHQUFHLElBQUlwQixJQUFJLEVBQUU7SUFBQSxLQUNsQnFCLHFCQUFxQixHQUFJLElBQUk7SUFBQSxLQUM3QkMsaUJBQWlCLEdBQUksSUFBSTtJQXlCdkIsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBR04sZUFBZTtJQUN2QyxJQUFJLENBQUNFLFFBQVEsR0FBRyxDQUFDSixXQUFXLElBQUksQ0FBQyxJQUFJUyxJQUFJLENBQUNDLE1BQU0sRUFBRTtJQUNsRCxJQUFJLENBQUNDLFVBQVUsRUFBRTtFQUNuQjtFQUFDLElBQUE1QixhQUFBLENBQUFHLE9BQUEsRUFBQWUsY0FBQTtJQUFBVyxHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBQyxTQUFBLEVBQVc7TUFDVCxJQUFJLElBQUksQ0FBQ1YsUUFBUSxJQUFJLElBQUksQ0FBQ0csaUJBQWlCLElBQUksSUFBSSxFQUFFO1FBQ25EVixLQUFLLElBQUlrQixPQUFPLENBQUNDLEtBQUssQ0FBQywwQkFBMEIsQ0FBQztRQUNsRCxJQUFJLENBQUNULGlCQUFpQixHQUFHVSxNQUFNLENBQUNDLFdBQVcsQ0FBQ0MsR0FBRyxFQUFFO01BQ25EO0lBQ0Y7RUFBQztJQUFBUCxHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBTyxtQkFBQSxFQUFxQjtNQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDaEIsUUFBUSxFQUFFO1FBQ2xCO01BQ0Y7TUFDQSxJQUFNaUIsS0FBSyxHQUFHLElBQUksQ0FBQ2QsaUJBQWlCO01BQ3BDLElBQUljLEtBQUssSUFBSSxJQUFJLEVBQUU7UUFDakJ4QixLQUFLLElBQ0hrQixPQUFPLENBQUNDLEtBQUssQ0FBQyx1REFBdUQsQ0FBQztRQUN4RTtNQUNGO01BQ0EsSUFBSSxJQUFJLENBQUNYLEtBQUssQ0FBQ1QsWUFBWSxHQUFHRyxlQUFlLEVBQUU7UUFFN0MsSUFBSSxDQUFDWSxVQUFVLEVBQUU7UUFDakI7TUFDRjtNQUNBLElBQU1oQixnQkFBZ0IsR0FBR3NCLE1BQU0sQ0FBQ0MsV0FBVyxDQUFDQyxHQUFHLEVBQUUsR0FBR0UsS0FBSztNQUN6RCxJQUFNQyxJQUFTLE9BQUF4QyxTQUFBLENBQUFJLE9BQUEsTUFDVixJQUFJLENBQUNtQixLQUFLO1FBQ2JWLGdCQUFnQixFQUFoQkE7TUFBZ0IsRUFDakI7TUFDRCxJQUFJRSxLQUFLLEVBQUU7UUFDVCxJQUFNMEIsT0FBTyxHQUFHO1VBQ2RDLGFBQWEsRUFBRSxJQUFJLENBQUNuQixLQUFLLENBQUNiLFlBQVksR0FBRyxJQUFJLENBQUNhLEtBQUssQ0FBQ1osY0FBYztVQUNsRWdDLFNBQVMsRUFBRSxJQUFJLENBQUNwQixLQUFLLENBQUNYLGVBQWUsSUFBSUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1VBQ2pFK0Isd0JBQXdCLEVBQ3RCLElBQUksQ0FBQ3JCLEtBQUssQ0FBQ2hCLG1CQUFtQixHQUFHLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ2xCLGVBQWU7VUFDN0R3QyxpQkFBaUIsRUFDZixJQUFJLENBQUN0QixLQUFLLENBQUNsQixlQUFlLElBQUlRLGdCQUFnQixHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7VUFDN0RpQyxtQkFBbUIsRUFBRSxJQUFJLENBQUN2QixLQUFLLENBQUNqQixZQUFZLEdBQUdPLGdCQUFnQjtVQUMvRGtDLG9CQUFvQixFQUNsQixJQUFJLENBQUN4QixLQUFLLENBQUNmLGtCQUFrQixJQUFJSyxnQkFBZ0IsR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1VBQ2hFbUMsc0JBQXNCLEVBQUUsSUFBSSxDQUFDekIsS0FBSyxDQUFDZCxlQUFlLEdBQUdJO1FBQ3ZELENBQUM7UUFDRCxLQUFLLElBQU1pQixHQUFHLElBQUlXLE9BQU8sRUFBRTtVQUN6QkEsT0FBTyxDQUFDWCxHQUFHLENBQUMsR0FBR0gsSUFBSSxDQUFDc0IsS0FBSyxDQUFDLElBQUksR0FBR1IsT0FBTyxDQUFDWCxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUk7UUFDdkQ7UUFDQUcsT0FBTyxDQUFDQyxLQUFLLENBQUMscUNBQXFDLEVBQUU7VUFBQ08sT0FBTyxFQUFQQSxPQUFPO1VBQUVELElBQUksRUFBSkE7UUFBSSxDQUFDLENBQUM7TUFDdkU7TUFDQXhCLFVBQVUsQ0FBQ2tDLE9BQU8sQ0FBQyxVQUFBQyxRQUFRO1FBQUEsT0FBSUEsUUFBUSxDQUFDWCxJQUFJLENBQUM7TUFBQSxFQUFDO01BQzlDLElBQUksQ0FBQ1gsVUFBVSxFQUFFO0lBQ25CO0VBQUM7SUFBQUMsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQXFCLGlCQUNFQyxLQUtDLEVBQ0RDLEtBSUMsRUFDREMsYUFNQyxFQUNPO01BQ1IsSUFDRSxDQUFDLElBQUksQ0FBQ2pDLFFBQVEsSUFDZCtCLEtBQUssQ0FBQ0csWUFBWSxDQUFDSCxLQUFLLENBQUNJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFDcEMsSUFBSSxDQUFDaEMsaUJBQWlCLElBQUksSUFBSSxFQUM5QjtRQUNBLE9BQU8sQ0FBQztNQUNWO01BQ0EsSUFBT2lDLE9BQU8sR0FBcUNILGFBQWEsQ0FBekRHLE9BQU87UUFBRUMsTUFBTSxHQUE2QkosYUFBYSxDQUFoREksTUFBTTtRQUFFQyxRQUFRLEdBQW1CTCxhQUFhLENBQXhDSyxRQUFRO1FBQUVDLGFBQWEsR0FBSU4sYUFBYSxDQUE5Qk0sYUFBYTtNQUkvQyxJQUFJLENBQUN0QyxLQUFLLENBQUNULFlBQVksRUFBRTtNQUN6QixJQUFJLENBQUNTLEtBQUssQ0FBQ1osY0FBYyxJQUFJZ0IsSUFBSSxDQUFDc0IsS0FBSyxDQUFDWSxhQUFhLENBQUM7TUFDdEQsSUFBSSxDQUFDdEMsS0FBSyxDQUFDWCxlQUFlLElBQUllLElBQUksQ0FBQ3NCLEtBQUssQ0FBQ3RCLElBQUksQ0FBQ21DLEdBQUcsQ0FBQ0osT0FBTyxDQUFDLENBQUM7TUFDM0QsSUFBTUssV0FBVyxHQUFHcEMsSUFBSSxDQUFDc0IsS0FBSyxDQUFDdEIsSUFBSSxDQUFDbUMsR0FBRyxDQUFDRixRQUFRLENBQUMsR0FBRyxJQUFJLENBQUM7TUFHekQsSUFBTXZCLEdBQUcsR0FBR0YsTUFBTSxDQUFDQyxXQUFXLENBQUNDLEdBQUcsRUFBRTtNQUNwQyxJQUFJLElBQUksQ0FBQ2hCLGtCQUFrQixJQUFJLElBQUksRUFBRTtRQUNuQyxJQUFJLENBQUNFLEtBQUssQ0FBQ2pCLFlBQVksSUFBSStCLEdBQUcsR0FBRyxJQUFJLENBQUNoQixrQkFBa0I7TUFDMUQ7TUFDQSxJQUFJLENBQUNBLGtCQUFrQixHQUFHLElBQUk7TUFDOUIsSUFBSSxJQUFJLENBQUNHLHFCQUFxQixJQUFJLElBQUksRUFBRTtRQUN0QyxJQUFJLENBQUNELEtBQUssQ0FBQ2QsZUFBZSxJQUFJNEIsR0FBRyxHQUFHLElBQUksQ0FBQ2IscUJBQXFCO01BQ2hFO01BQ0EsSUFBSSxDQUFDQSxxQkFBcUIsR0FBRyxJQUFJO01BRWpDLElBQUl3QyxRQUFRLEdBQUcsQ0FBQztNQUNoQixJQUFJQyxLQUFLLEdBQUdYLEtBQUssQ0FBQ1csS0FBSztNQUN2QixJQUFJQyxVQUFVLEdBQUcsSUFBSSxDQUFDeEMsZ0JBQWdCLENBQUN1QyxLQUFLLENBQUM7TUFDN0MsT0FBT0EsS0FBSyxJQUFJWCxLQUFLLENBQUNhLElBQUksS0FBSyxDQUFDRCxVQUFVLElBQUksQ0FBQ0EsVUFBVSxDQUFDRSxRQUFRLENBQUMsRUFBRTtRQUNuRUYsVUFBVSxHQUFHLElBQUksQ0FBQ3hDLGdCQUFnQixDQUFDdUMsS0FBSyxDQUFDO1FBQ3pDQSxLQUFLLEVBQUU7TUFDVDtNQUdBLElBQUlDLFVBQVUsSUFBSUQsS0FBSyxHQUFHLENBQUMsRUFBRTtRQUMzQkQsUUFBUSxHQUFHckMsSUFBSSxDQUFDMEMsR0FBRyxDQUNqQlIsYUFBYSxFQUNibEMsSUFBSSxDQUFDMkMsR0FBRyxDQUFDLENBQUMsRUFBRUosVUFBVSxDQUFDUCxNQUFNLEdBQUdBLE1BQU0sQ0FBQyxDQUN4QztNQUNIO01BQ0EsSUFBSVksV0FBVyxHQUFHLENBQUM7TUFDbkIsSUFBSUosSUFBSSxHQUFHYixLQUFLLENBQUNhLElBQUk7TUFDckIsSUFBSUssU0FBUyxHQUFHLElBQUksQ0FBQzlDLGdCQUFnQixDQUFDeUMsSUFBSSxDQUFDO01BQzNDLE9BQU9BLElBQUksSUFBSWIsS0FBSyxDQUFDVyxLQUFLLEtBQUssQ0FBQ08sU0FBUyxJQUFJLENBQUNBLFNBQVMsQ0FBQ0osUUFBUSxDQUFDLEVBQUU7UUFDakVJLFNBQVMsR0FBRyxJQUFJLENBQUM5QyxnQkFBZ0IsQ0FBQ3lDLElBQUksQ0FBQztRQUN2Q0EsSUFBSSxFQUFFO01BQ1I7TUFHQSxJQUFJSyxTQUFTLElBQUlMLElBQUksR0FBR2QsS0FBSyxDQUFDRyxZQUFZLENBQUNILEtBQUssQ0FBQ0ksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQzFELElBQU1nQixVQUFVLEdBQUdELFNBQVMsQ0FBQ2IsTUFBTSxHQUFHYSxTQUFTLENBQUNFLE1BQU07UUFDdERILFdBQVcsR0FBRzVDLElBQUksQ0FBQzBDLEdBQUcsQ0FDcEJSLGFBQWEsRUFDYmxDLElBQUksQ0FBQzJDLEdBQUcsQ0FBQyxDQUFDLEVBQUVYLE1BQU0sR0FBR0UsYUFBYSxHQUFHWSxVQUFVLENBQUMsQ0FDakQ7TUFDSDtNQUNBLElBQU0vRCxZQUFZLEdBQUdpQixJQUFJLENBQUNzQixLQUFLLENBQUNlLFFBQVEsR0FBR08sV0FBVyxDQUFDO01BQ3ZELElBQU1JLFNBQVMsR0FBR2pFLFlBQVksR0FBR21ELGFBQWE7TUFDOUMsSUFBSWMsU0FBUyxHQUFHLENBQUMsRUFBRTtRQUNqQixJQUFJLENBQUN0RCxrQkFBa0IsR0FBR2dCLEdBQUc7UUFDN0IsSUFBSSxDQUFDZCxLQUFLLENBQUNoQixtQkFBbUIsSUFBSXdELFdBQVc7UUFDN0MsSUFBSSxDQUFDeEMsS0FBSyxDQUFDbEIsZUFBZSxFQUFFO1FBQzVCLElBQUksQ0FBQ2tCLEtBQUssQ0FBQ2IsWUFBWSxJQUFJQSxZQUFZO1FBQ3ZDLElBQUlpRSxTQUFTLEdBQUcsR0FBRyxFQUFFO1VBQ25CLElBQUksQ0FBQ25ELHFCQUFxQixHQUFHYSxHQUFHO1VBQ2hDLElBQUksQ0FBQ2QsS0FBSyxDQUFDZixrQkFBa0IsRUFBRTtRQUNqQztNQUNGLENBQUMsTUFBTSxJQUFJdUQsV0FBVyxHQUFHLElBQUksSUFBSXBDLElBQUksQ0FBQ21DLEdBQUcsQ0FBQ0osT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ3RELElBQUksQ0FBQ3BCLGtCQUFrQixFQUFFO01BQzNCO01BQ0EsT0FBT3FDLFNBQVM7SUFDbEI7RUFBQztJQUFBN0MsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQTZDLFFBQUEsRUFBbUI7TUFDakIsT0FBTyxJQUFJLENBQUN0RCxRQUFRO0lBQ3RCO0VBQUM7SUFBQVEsR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQUYsV0FBQSxFQUFhO01BQ1gsSUFBSSxDQUFDUixrQkFBa0IsR0FBRyxJQUFJO01BQzlCLElBQUksQ0FBQ0UsS0FBSyxHQUFHLElBQUlwQixJQUFJLEVBQUU7TUFDdkIsSUFBSSxDQUFDcUIscUJBQXFCLEdBQUcsSUFBSTtNQUNqQyxJQUFJLENBQUNDLGlCQUFpQixHQUFHLElBQUk7SUFDL0I7RUFBQztJQUFBSyxHQUFBO0lBQUFDLEtBQUEsRUFyTEQsU0FBQThDLFlBQ0VDLFFBQThCLEVBQ0g7TUFDM0IsSUFBSTVELFdBQVcsS0FBSyxJQUFJLEVBQUU7UUFDeEJlLE9BQU8sQ0FBQzhDLElBQUksQ0FBQywyREFBMkQsQ0FBQztNQUMzRTtNQUNBL0QsVUFBVSxDQUFDZ0UsSUFBSSxDQUFDRixRQUFRLENBQUM7TUFDekIsT0FBTztRQUNMRyxNQUFNLEVBQUUsU0FBQUEsT0FBQSxFQUFNO1VBQ1pqRSxVQUFVLEdBQUdBLFVBQVUsQ0FBQ2tFLE1BQU0sQ0FBQyxVQUFBL0IsUUFBUTtZQUFBLE9BQUkyQixRQUFRLEtBQUszQixRQUFRO1VBQUEsRUFBQztRQUNuRTtNQUNGLENBQUM7SUFDSDtFQUFDO0lBQUFyQixHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBb0QsY0FBcUJDLFVBQWtCLEVBQUU7TUFDdkNsRSxXQUFXLEdBQUdrRSxVQUFVO0lBQzFCO0VBQUM7SUFBQXRELEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFzRCxrQkFBeUJDLGNBQXNCLEVBQUU7TUFDL0NyRSxlQUFlLEdBQUdxRSxjQUFjO0lBQ2xDO0VBQUM7RUFBQSxPQUFBbkUsY0FBQTtBQUFBO0FBb0tIb0UsTUFBTSxDQUFDQyxPQUFPLEdBQUdyRSxjQUFjIn0=