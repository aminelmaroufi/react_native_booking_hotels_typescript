{"version":3,"names":["React","_interopRequireWildcard","require","_LogBoxLog","_interopRequireDefault","_parseLogBoxLog","_parseErrorStack","_NativeLogBox","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf2","result","NewTarget","constructor","Reflect","construct","arguments","apply","_possibleConstructorReturn2","sham","Proxy","Boolean","valueOf","e","_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","next","bind","Array","isArray","_unsupportedIterableToArray","length","i","done","value","TypeError","minLen","_arrayLikeToArray","n","toString","slice","name","from","test","arr","len","arr2","observers","Set","ignorePatterns","appInfo","logs","updateTimeout","_isDisabled","_selectedIndex","warningFilter","format","finalFormat","forceDialogImmediately","suppressDialog_LEGACY","suppressCompletely","monitorEvent","monitorListVersion","monitorSampleRate","LOGBOX_ERROR_MESSAGE","getNextState","isDisabled","selectedLogIndex","reportLogBoxError","error","componentStack","ExceptionsManager","forceRedbox","message","handleException","isLogBoxErrorMessage","includes","isMessageIgnored","_iterator","_step","pattern","RegExp","handleUpdate","setImmediate","nextState","forEach","_ref","observer","appendNewLog","newLog","content","lastLog","pop","category","incrementCount","level","OPTIMISTIC_WAIT_TIME","addPendingLog","add","setSelectedLog","size","optimisticTimeout","setTimeout","symbolicate","status","clearTimeout","addLog","log","errorForStackTrace","Error","stack","parseErrorStack","LogBoxLog","isComponentError","addException","parseLogBoxException","loggingError","symbolicateLogNow","retrySymbolicateLogNow","retrySymbolicate","symbolicateLogLazy","clear","proposedNewIndex","oldIndex","newIndex","logArray","index","NativeLogBox","show","hide","clearWarnings","newLogs","filter","clearErrors","dismiss","delete","setWarningFilter","setAppInfo","info","getAppInfo","checkWarningFilter","addIgnorePatterns","patterns","newPatterns","_iterator2","entries","_step2","existingPattern","_iterator3","_step3","setDisabled","observe","subscription","unsubscribe","withSubscription","WrappedComponent","LogBoxStateSubscription","_React$Component","_inherits2","_super","_this","_classCallCheck2","_len","args","_key","concat","state","hasError","_handleDismiss","_this$state","stateLogs","logsArray","_handleMinimize","_handleSetSelectedLog","_createClass2","componentDidCatch","err","errorInfo","render","createElement","componentDidMount","_this2","_subscription","data","setState","componentWillUnmount","getDerivedStateFromError","Component"],"sources":["LogBoxData.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\n('use strict');\n\nimport * as React from 'react';\nimport LogBoxLog from './LogBoxLog';\nimport {parseLogBoxException} from './parseLogBoxLog';\nimport type {LogLevel} from './LogBoxLog';\nimport type {\n  Message,\n  Category,\n  ComponentStack,\n  ExtendedExceptionData,\n} from './parseLogBoxLog';\nimport parseErrorStack from '../../Core/Devtools/parseErrorStack';\nimport type {ExtendedError} from '../../Core/ExtendedError';\nimport NativeLogBox from '../../NativeModules/specs/NativeLogBox';\nexport type LogBoxLogs = Set<LogBoxLog>;\nexport type LogData = $ReadOnly<{|\n  level: LogLevel,\n  message: Message,\n  category: Category,\n  componentStack: ComponentStack,\n|}>;\n\nexport type Observer = (\n  $ReadOnly<{|\n    logs: LogBoxLogs,\n    isDisabled: boolean,\n    selectedLogIndex: number,\n  |}>,\n) => void;\n\nexport type IgnorePattern = string | RegExp;\n\nexport type Subscription = $ReadOnly<{|\n  unsubscribe: () => void,\n|}>;\n\nexport type WarningInfo = {|\n  finalFormat: string,\n  forceDialogImmediately: boolean,\n  suppressDialog_LEGACY: boolean,\n  suppressCompletely: boolean,\n  monitorEvent: string | null,\n  monitorListVersion: number,\n  monitorSampleRate: number,\n|};\n\nexport type WarningFilter = (format: string) => WarningInfo;\n\ntype AppInfo = $ReadOnly<{|\n  appVersion: string,\n  engine: string,\n  onPress?: ?() => void,\n|}>;\n\nconst observers: Set<{observer: Observer, ...}> = new Set();\nconst ignorePatterns: Set<IgnorePattern> = new Set();\nlet appInfo: ?() => AppInfo = null;\nlet logs: LogBoxLogs = new Set();\nlet updateTimeout = null;\nlet _isDisabled = false;\nlet _selectedIndex = -1;\n\nlet warningFilter: WarningFilter = function(format) {\n  return {\n    finalFormat: format,\n    forceDialogImmediately: false,\n    suppressDialog_LEGACY: true,\n    suppressCompletely: false,\n    monitorEvent: 'unknown',\n    monitorListVersion: 0,\n    monitorSampleRate: 1,\n  };\n};\n\nconst LOGBOX_ERROR_MESSAGE =\n  'An error was thrown when attempting to render log messages via LogBox.';\n\nfunction getNextState() {\n  return {\n    logs,\n    isDisabled: _isDisabled,\n    selectedLogIndex: _selectedIndex,\n  };\n}\n\nexport function reportLogBoxError(\n  error: ExtendedError,\n  componentStack?: string,\n): void {\n  const ExceptionsManager = require('../../Core/ExceptionsManager');\n\n  error.forceRedbox = true;\n  error.message = `${LOGBOX_ERROR_MESSAGE}\\n\\n${error.message}`;\n  if (componentStack != null) {\n    error.componentStack = componentStack;\n  }\n  ExceptionsManager.handleException(error, /* isFatal */ true);\n}\n\nexport function isLogBoxErrorMessage(message: string): boolean {\n  return typeof message === 'string' && message.includes(LOGBOX_ERROR_MESSAGE);\n}\n\nexport function isMessageIgnored(message: string): boolean {\n  for (const pattern of ignorePatterns) {\n    if (\n      (pattern instanceof RegExp && pattern.test(message)) ||\n      (typeof pattern === 'string' && message.includes(pattern))\n    ) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction handleUpdate(): void {\n  if (updateTimeout == null) {\n    updateTimeout = setImmediate(() => {\n      updateTimeout = null;\n      const nextState = getNextState();\n      observers.forEach(({observer}) => observer(nextState));\n    });\n  }\n}\n\nfunction appendNewLog(newLog) {\n  // Don't want store these logs because they trigger a\n  // state update when we add them to the store.\n  if (isMessageIgnored(newLog.message.content)) {\n    return;\n  }\n\n  // If the next log has the same category as the previous one\n  // then roll it up into the last log in the list by incrementing\n  // the count (similar to how Chrome does it).\n  const lastLog = Array.from(logs).pop();\n  if (lastLog && lastLog.category === newLog.category) {\n    lastLog.incrementCount();\n    handleUpdate();\n    return;\n  }\n\n  if (newLog.level === 'fatal') {\n    // If possible, to avoid jank, we don't want to open the error before\n    // it's symbolicated. To do that, we optimistically wait for\n    // sybolication for up to a second before adding the log.\n    const OPTIMISTIC_WAIT_TIME = 1000;\n\n    let addPendingLog = () => {\n      logs.add(newLog);\n      if (_selectedIndex < 0) {\n        setSelectedLog(logs.size - 1);\n      } else {\n        handleUpdate();\n      }\n      addPendingLog = null;\n    };\n\n    const optimisticTimeout = setTimeout(() => {\n      if (addPendingLog) {\n        addPendingLog();\n      }\n    }, OPTIMISTIC_WAIT_TIME);\n\n    newLog.symbolicate(status => {\n      if (addPendingLog && status !== 'PENDING') {\n        addPendingLog();\n        clearTimeout(optimisticTimeout);\n      } else if (status !== 'PENDING') {\n        // The log has already been added but we need to trigger a render.\n        handleUpdate();\n      }\n    });\n  } else if (newLog.level === 'syntax') {\n    logs.add(newLog);\n    setSelectedLog(logs.size - 1);\n  } else {\n    logs.add(newLog);\n    handleUpdate();\n  }\n}\n\nexport function addLog(log: LogData): void {\n  const errorForStackTrace = new Error();\n\n  // Parsing logs are expensive so we schedule this\n  // otherwise spammy logs would pause rendering.\n  setImmediate(() => {\n    try {\n      const stack = parseErrorStack(errorForStackTrace?.stack);\n\n      appendNewLog(\n        new LogBoxLog({\n          level: log.level,\n          message: log.message,\n          isComponentError: false,\n          stack,\n          category: log.category,\n          componentStack: log.componentStack,\n        }),\n      );\n    } catch (error) {\n      reportLogBoxError(error);\n    }\n  });\n}\n\nexport function addException(error: ExtendedExceptionData): void {\n  // Parsing logs are expensive so we schedule this\n  // otherwise spammy logs would pause rendering.\n  setImmediate(() => {\n    try {\n      appendNewLog(new LogBoxLog(parseLogBoxException(error)));\n    } catch (loggingError) {\n      reportLogBoxError(loggingError);\n    }\n  });\n}\n\nexport function symbolicateLogNow(log: LogBoxLog) {\n  log.symbolicate(() => {\n    handleUpdate();\n  });\n}\n\nexport function retrySymbolicateLogNow(log: LogBoxLog) {\n  log.retrySymbolicate(() => {\n    handleUpdate();\n  });\n}\n\nexport function symbolicateLogLazy(log: LogBoxLog) {\n  log.symbolicate();\n}\n\nexport function clear(): void {\n  if (logs.size > 0) {\n    logs = new Set();\n    setSelectedLog(-1);\n  }\n}\n\nexport function setSelectedLog(proposedNewIndex: number): void {\n  const oldIndex = _selectedIndex;\n  let newIndex = proposedNewIndex;\n\n  const logArray = Array.from(logs);\n  let index = logArray.length - 1;\n  while (index >= 0) {\n    // The latest syntax error is selected and displayed before all other logs.\n    if (logArray[index].level === 'syntax') {\n      newIndex = index;\n      break;\n    }\n    index -= 1;\n  }\n  _selectedIndex = newIndex;\n  handleUpdate();\n  if (NativeLogBox) {\n    setTimeout(() => {\n      if (oldIndex < 0 && newIndex >= 0) {\n        NativeLogBox.show();\n      } else if (oldIndex >= 0 && newIndex < 0) {\n        NativeLogBox.hide();\n      }\n    }, 0);\n  }\n}\n\nexport function clearWarnings(): void {\n  const newLogs = Array.from(logs).filter(log => log.level !== 'warn');\n  if (newLogs.length !== logs.size) {\n    logs = new Set(newLogs);\n    setSelectedLog(-1);\n    handleUpdate();\n  }\n}\n\nexport function clearErrors(): void {\n  const newLogs = Array.from(logs).filter(\n    log => log.level !== 'error' && log.level !== 'fatal',\n  );\n  if (newLogs.length !== logs.size) {\n    logs = new Set(newLogs);\n    setSelectedLog(-1);\n  }\n}\n\nexport function dismiss(log: LogBoxLog): void {\n  if (logs.has(log)) {\n    logs.delete(log);\n    handleUpdate();\n  }\n}\n\nexport function setWarningFilter(filter: WarningFilter): void {\n  warningFilter = filter;\n}\n\nexport function setAppInfo(info: () => AppInfo): void {\n  appInfo = info;\n}\n\nexport function getAppInfo(): ?AppInfo {\n  return appInfo != null ? appInfo() : null;\n}\n\nexport function checkWarningFilter(format: string): WarningInfo {\n  return warningFilter(format);\n}\n\nexport function addIgnorePatterns(\n  patterns: $ReadOnlyArray<IgnorePattern>,\n): void {\n  // The same pattern may be added multiple times, but adding a new pattern\n  // can be expensive so let's find only the ones that are new.\n  const newPatterns = patterns.filter((pattern: IgnorePattern) => {\n    if (pattern instanceof RegExp) {\n      for (const existingPattern of ignorePatterns.entries()) {\n        if (\n          existingPattern instanceof RegExp &&\n          existingPattern.toString() === pattern.toString()\n        ) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return !ignorePatterns.has(pattern);\n  });\n\n  if (newPatterns.length === 0) {\n    return;\n  }\n  for (const pattern of newPatterns) {\n    ignorePatterns.add(pattern);\n\n    // We need to recheck all of the existing logs.\n    // This allows adding an ignore pattern anywhere in the codebase.\n    // Without this, if you ignore a pattern after the a log is created,\n    // then we would keep showing the log.\n    logs = new Set(\n      Array.from(logs).filter(log => !isMessageIgnored(log.message.content)),\n    );\n  }\n  handleUpdate();\n}\n\nexport function setDisabled(value: boolean): void {\n  if (value === _isDisabled) {\n    return;\n  }\n  _isDisabled = value;\n  handleUpdate();\n}\n\nexport function isDisabled(): boolean {\n  return _isDisabled;\n}\n\nexport function observe(observer: Observer): Subscription {\n  const subscription = {observer};\n  observers.add(subscription);\n\n  observer(getNextState());\n\n  return {\n    unsubscribe(): void {\n      observers.delete(subscription);\n    },\n  };\n}\n\ntype Props = $ReadOnly<{||}>;\ntype State = $ReadOnly<{|\n  logs: LogBoxLogs,\n  isDisabled: boolean,\n  hasError: boolean,\n  selectedLogIndex: number,\n|}>;\n\ntype SubscribedComponent = React.AbstractComponent<\n  $ReadOnly<{|\n    logs: $ReadOnlyArray<LogBoxLog>,\n    isDisabled: boolean,\n    selectedLogIndex: number,\n  |}>,\n>;\n\nexport function withSubscription(\n  WrappedComponent: SubscribedComponent,\n): React.AbstractComponent<{||}> {\n  class LogBoxStateSubscription extends React.Component<Props, State> {\n    static getDerivedStateFromError() {\n      return {hasError: true};\n    }\n\n    componentDidCatch(err: Error, errorInfo: {componentStack: string, ...}) {\n      /* $FlowFixMe[class-object-subtyping] added when improving typing for\n       * this parameters */\n      reportLogBoxError(err, errorInfo.componentStack);\n    }\n\n    _subscription: ?Subscription;\n\n    state = {\n      logs: new Set(),\n      isDisabled: false,\n      hasError: false,\n      selectedLogIndex: -1,\n    };\n\n    render(): React.Node {\n      if (this.state.hasError) {\n        // This happens when the component failed to render, in which case we delegate to the native redbox.\n        // We can't show anyback fallback UI here, because the error may be with <View> or <Text>.\n        return null;\n      }\n\n      return (\n        <WrappedComponent\n          logs={Array.from(this.state.logs)}\n          isDisabled={this.state.isDisabled}\n          selectedLogIndex={this.state.selectedLogIndex}\n        />\n      );\n    }\n\n    componentDidMount(): void {\n      this._subscription = observe(data => {\n        this.setState(data);\n      });\n    }\n\n    componentWillUnmount(): void {\n      if (this._subscription != null) {\n        this._subscription.unsubscribe();\n      }\n    }\n\n    _handleDismiss = (): void => {\n      // Here we handle the cases when the log is dismissed and it\n      // was either the last log, or when the current index\n      // is now outside the bounds of the log array.\n      const {selectedLogIndex, logs: stateLogs} = this.state;\n      const logsArray = Array.from(stateLogs);\n      if (selectedLogIndex != null) {\n        if (logsArray.length - 1 <= 0) {\n          setSelectedLog(-1);\n        } else if (selectedLogIndex >= logsArray.length - 1) {\n          setSelectedLog(selectedLogIndex - 1);\n        }\n\n        dismiss(logsArray[selectedLogIndex]);\n      }\n    };\n\n    _handleMinimize = (): void => {\n      setSelectedLog(-1);\n    };\n\n    _handleSetSelectedLog = (index: number): void => {\n      setSelectedLog(index);\n    };\n  }\n\n  return LogBoxStateSubscription;\n}\n"],"mappings":"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"}