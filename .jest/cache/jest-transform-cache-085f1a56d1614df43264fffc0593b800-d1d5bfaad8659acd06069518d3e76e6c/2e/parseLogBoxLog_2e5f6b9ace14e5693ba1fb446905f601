fca15a6c5e0d781db89a91b829f020d2
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.parseComponentStack = parseComponentStack;
exports.parseInterpolation = parseInterpolation;
exports.parseLogBoxException = parseLogBoxException;
exports.parseLogBoxLog = parseLogBoxLog;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _UTFSequence = _interopRequireDefault(require("../../UTFSequence"));
var _stringifySafe = _interopRequireDefault(require("../../Utilities/stringifySafe"));
var _parseErrorStack = _interopRequireDefault(require("../../Core/Devtools/parseErrorStack"));
function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }
var BABEL_TRANSFORM_ERROR_FORMAT = /^(?:TransformError )?(?:SyntaxError: |ReferenceError: )(.*): (.*) \((\d+):(\d+)\)\n\n([\s\S]+)/;
var BABEL_CODE_FRAME_ERROR_FORMAT = /^(?:TransformError )?(?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*):? (?:(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)(\/(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*): ((?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+?)\n([ >]{2}[\t-\r 0-9\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+ \|(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+|\x1B(?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)/;
var METRO_ERROR_FORMAT = /^(?:InternalError Metro has encountered an error:) ((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*): ((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*) \(([0-9]+):([0-9]+)\)\n\n((?:[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)/;
var SUBSTITUTION = _UTFSequence.default.BOM + '%s';
function parseInterpolation(args) {
  var categoryParts = [];
  var contentParts = [];
  var substitutionOffsets = [];
  var remaining = (0, _toConsumableArray2.default)(args);
  if (typeof remaining[0] === 'string') {
    var formatString = String(remaining.shift());
    var formatStringParts = formatString.split('%s');
    var substitutionCount = formatStringParts.length - 1;
    var substitutions = remaining.splice(0, substitutionCount);
    var categoryString = '';
    var contentString = '';
    var substitutionIndex = 0;
    for (var _iterator = _createForOfIteratorHelperLoose(formatStringParts), _step; !(_step = _iterator()).done;) {
      var formatStringPart = _step.value;
      categoryString += formatStringPart;
      contentString += formatStringPart;
      if (substitutionIndex < substitutionCount) {
        if (substitutionIndex < substitutions.length) {
          var substitution = typeof substitutions[substitutionIndex] === 'string' ? substitutions[substitutionIndex] : (0, _stringifySafe.default)(substitutions[substitutionIndex]);
          substitutionOffsets.push({
            length: substitution.length,
            offset: contentString.length
          });
          categoryString += SUBSTITUTION;
          contentString += substitution;
        } else {
          substitutionOffsets.push({
            length: 2,
            offset: contentString.length
          });
          categoryString += '%s';
          contentString += '%s';
        }
        substitutionIndex++;
      }
    }
    categoryParts.push(categoryString);
    contentParts.push(contentString);
  }
  var remainingArgs = remaining.map(function (arg) {
    return typeof arg === 'string' ? arg : (0, _stringifySafe.default)(arg);
  });
  categoryParts.push.apply(categoryParts, (0, _toConsumableArray2.default)(remainingArgs));
  contentParts.push.apply(contentParts, (0, _toConsumableArray2.default)(remainingArgs));
  return {
    category: categoryParts.join(' '),
    message: {
      content: contentParts.join(' '),
      substitutions: substitutionOffsets
    }
  };
}
function isComponentStack(consoleArgument) {
  var isOldComponentStackFormat = / {4}in/.test(consoleArgument);
  var isNewComponentStackFormat = / {4}at/.test(consoleArgument);
  var isNewJSCComponentStackFormat = /@.*\n/.test(consoleArgument);
  return isOldComponentStackFormat || isNewComponentStackFormat || isNewJSCComponentStackFormat;
}
function parseComponentStack(message) {
  var stack = (0, _parseErrorStack.default)(message);
  if (stack && stack.length > 0) {
    return stack.map(function (frame) {
      return {
        content: frame.methodName,
        collapse: frame.collapse || false,
        fileName: frame.file == null ? 'unknown' : frame.file,
        location: {
          column: frame.column == null ? -1 : frame.column,
          row: frame.lineNumber == null ? -1 : frame.lineNumber
        }
      };
    });
  }
  return message.split(/\n {4}in /g).map(function (s) {
    if (!s) {
      return null;
    }
    var match = s.match(/(.*) \(at (.*\.js):([\d]+)\)/);
    if (!match) {
      return null;
    }
    var _match$slice = match.slice(1),
      _match$slice2 = (0, _slicedToArray2.default)(_match$slice, 3),
      content = _match$slice2[0],
      fileName = _match$slice2[1],
      row = _match$slice2[2];
    return {
      content: content,
      fileName: fileName,
      location: {
        column: -1,
        row: parseInt(row, 10)
      }
    };
  }).filter(Boolean);
}
function parseLogBoxException(error) {
  var message = error.originalMessage != null ? error.originalMessage : 'Unknown';
  var metroInternalError = message.match(METRO_ERROR_FORMAT);
  if (metroInternalError) {
    var _metroInternalError$s = metroInternalError.slice(1),
      _metroInternalError$s2 = (0, _slicedToArray2.default)(_metroInternalError$s, 5),
      content = _metroInternalError$s2[0],
      fileName = _metroInternalError$s2[1],
      row = _metroInternalError$s2[2],
      column = _metroInternalError$s2[3],
      codeFrame = _metroInternalError$s2[4];
    return {
      level: 'fatal',
      type: 'Metro Error',
      stack: [],
      isComponentError: false,
      componentStack: [],
      codeFrame: {
        fileName: fileName,
        location: {
          row: parseInt(row, 10),
          column: parseInt(column, 10)
        },
        content: codeFrame
      },
      message: {
        content: content,
        substitutions: []
      },
      category: fileName + "-" + row + "-" + column
    };
  }
  var babelTransformError = message.match(BABEL_TRANSFORM_ERROR_FORMAT);
  if (babelTransformError) {
    var _babelTransformError$ = babelTransformError.slice(1),
      _babelTransformError$2 = (0, _slicedToArray2.default)(_babelTransformError$, 5),
      _fileName = _babelTransformError$2[0],
      _content = _babelTransformError$2[1],
      _row = _babelTransformError$2[2],
      _column = _babelTransformError$2[3],
      _codeFrame = _babelTransformError$2[4];
    return {
      level: 'syntax',
      stack: [],
      isComponentError: false,
      componentStack: [],
      codeFrame: {
        fileName: _fileName,
        location: {
          row: parseInt(_row, 10),
          column: parseInt(_column, 10)
        },
        content: _codeFrame
      },
      message: {
        content: _content,
        substitutions: []
      },
      category: _fileName + "-" + _row + "-" + _column
    };
  }
  var babelCodeFrameError = message.match(BABEL_CODE_FRAME_ERROR_FORMAT);
  if (babelCodeFrameError) {
    var _babelCodeFrameError$ = babelCodeFrameError.slice(1),
      _babelCodeFrameError$2 = (0, _slicedToArray2.default)(_babelCodeFrameError$, 3),
      _fileName2 = _babelCodeFrameError$2[0],
      _content2 = _babelCodeFrameError$2[1],
      _codeFrame2 = _babelCodeFrameError$2[2];
    return {
      level: 'syntax',
      stack: [],
      isComponentError: false,
      componentStack: [],
      codeFrame: {
        fileName: _fileName2,
        location: null,
        content: _codeFrame2
      },
      message: {
        content: _content2,
        substitutions: []
      },
      category: _fileName2 + "-" + 1 + "-" + 1
    };
  }
  if (message.match(/^TransformError /)) {
    return {
      level: 'syntax',
      stack: error.stack,
      isComponentError: error.isComponentError,
      componentStack: [],
      message: {
        content: message,
        substitutions: []
      },
      category: message
    };
  }
  var componentStack = error.componentStack;
  if (error.isFatal || error.isComponentError) {
    return (0, _extends2.default)({
      level: 'fatal',
      stack: error.stack,
      isComponentError: error.isComponentError,
      componentStack: componentStack != null ? parseComponentStack(componentStack) : []
    }, parseInterpolation([message]));
  }
  if (componentStack != null) {
    return (0, _extends2.default)({
      level: 'error',
      stack: error.stack,
      isComponentError: error.isComponentError,
      componentStack: parseComponentStack(componentStack)
    }, parseInterpolation([message]));
  }
  return (0, _extends2.default)({
    level: 'error',
    stack: error.stack,
    isComponentError: error.isComponentError
  }, parseLogBoxLog([message]));
}
function parseLogBoxLog(args) {
  var message = args[0];
  var argsWithoutComponentStack = [];
  var componentStack = [];
  if (typeof message === 'string' && message.slice(-2) === '%s' && args.length > 0) {
    var lastArg = args[args.length - 1];
    if (typeof lastArg === 'string' && isComponentStack(lastArg)) {
      argsWithoutComponentStack = args.slice(0, -1);
      argsWithoutComponentStack[0] = message.slice(0, -2);
      componentStack = parseComponentStack(lastArg);
    }
  }
  if (componentStack.length === 0) {
    for (var _iterator2 = _createForOfIteratorHelperLoose(args), _step2; !(_step2 = _iterator2()).done;) {
      var arg = _step2.value;
      if (typeof arg === 'string' && isComponentStack(arg)) {
        var messageEndIndex = arg.search(/\n {4}(in|at) /);
        if (messageEndIndex < 0) {
          messageEndIndex = arg.search(/\n/);
        }
        if (messageEndIndex > 0) {
          argsWithoutComponentStack.push(arg.slice(0, messageEndIndex));
        }
        componentStack = parseComponentStack(arg);
      } else {
        argsWithoutComponentStack.push(arg);
      }
    }
  }
  return (0, _extends2.default)({}, parseInterpolation(argsWithoutComponentStack), {
    componentStack: componentStack
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfVVRGU2VxdWVuY2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9zdHJpbmdpZnlTYWZlIiwiX3BhcnNlRXJyb3JTdGFjayIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY2FsbCIsIm5leHQiLCJiaW5kIiwiQXJyYXkiLCJpc0FycmF5IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwibGVuZ3RoIiwiaSIsImRvbmUiLCJ2YWx1ZSIsIlR5cGVFcnJvciIsIm1pbkxlbiIsIl9hcnJheUxpa2VUb0FycmF5IiwibiIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwic2xpY2UiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJmcm9tIiwidGVzdCIsImFyciIsImxlbiIsImFycjIiLCJCQUJFTF9UUkFOU0ZPUk1fRVJST1JfRk9STUFUIiwiQkFCRUxfQ09ERV9GUkFNRV9FUlJPUl9GT1JNQVQiLCJNRVRST19FUlJPUl9GT1JNQVQiLCJTVUJTVElUVVRJT04iLCJVVEZTZXF1ZW5jZSIsIkJPTSIsInBhcnNlSW50ZXJwb2xhdGlvbiIsImFyZ3MiLCJjYXRlZ29yeVBhcnRzIiwiY29udGVudFBhcnRzIiwic3Vic3RpdHV0aW9uT2Zmc2V0cyIsInJlbWFpbmluZyIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJkZWZhdWx0IiwiZm9ybWF0U3RyaW5nIiwiU3RyaW5nIiwic2hpZnQiLCJmb3JtYXRTdHJpbmdQYXJ0cyIsInNwbGl0Iiwic3Vic3RpdHV0aW9uQ291bnQiLCJzdWJzdGl0dXRpb25zIiwic3BsaWNlIiwiY2F0ZWdvcnlTdHJpbmciLCJjb250ZW50U3RyaW5nIiwic3Vic3RpdHV0aW9uSW5kZXgiLCJfaXRlcmF0b3IiLCJfc3RlcCIsImZvcm1hdFN0cmluZ1BhcnQiLCJzdWJzdGl0dXRpb24iLCJzdHJpbmdpZnlTYWZlIiwicHVzaCIsIm9mZnNldCIsInJlbWFpbmluZ0FyZ3MiLCJtYXAiLCJhcmciLCJhcHBseSIsImNhdGVnb3J5Iiwiam9pbiIsIm1lc3NhZ2UiLCJjb250ZW50IiwiaXNDb21wb25lbnRTdGFjayIsImNvbnNvbGVBcmd1bWVudCIsImlzT2xkQ29tcG9uZW50U3RhY2tGb3JtYXQiLCJpc05ld0NvbXBvbmVudFN0YWNrRm9ybWF0IiwiaXNOZXdKU0NDb21wb25lbnRTdGFja0Zvcm1hdCIsInBhcnNlQ29tcG9uZW50U3RhY2siLCJzdGFjayIsInBhcnNlRXJyb3JTdGFjayIsImZyYW1lIiwibWV0aG9kTmFtZSIsImNvbGxhcHNlIiwiZmlsZU5hbWUiLCJmaWxlIiwibG9jYXRpb24iLCJjb2x1bW4iLCJyb3ciLCJsaW5lTnVtYmVyIiwicyIsIm1hdGNoIiwiX21hdGNoJHNsaWNlIiwiX21hdGNoJHNsaWNlMiIsIl9zbGljZWRUb0FycmF5MiIsInBhcnNlSW50IiwiZmlsdGVyIiwiQm9vbGVhbiIsInBhcnNlTG9nQm94RXhjZXB0aW9uIiwiZXJyb3IiLCJvcmlnaW5hbE1lc3NhZ2UiLCJtZXRyb0ludGVybmFsRXJyb3IiLCJfbWV0cm9JbnRlcm5hbEVycm9yJHMiLCJfbWV0cm9JbnRlcm5hbEVycm9yJHMyIiwiY29kZUZyYW1lIiwibGV2ZWwiLCJ0eXBlIiwiaXNDb21wb25lbnRFcnJvciIsImNvbXBvbmVudFN0YWNrIiwiYmFiZWxUcmFuc2Zvcm1FcnJvciIsIl9iYWJlbFRyYW5zZm9ybUVycm9yJCIsIl9iYWJlbFRyYW5zZm9ybUVycm9yJDIiLCJiYWJlbENvZGVGcmFtZUVycm9yIiwiX2JhYmVsQ29kZUZyYW1lRXJyb3IkIiwiX2JhYmVsQ29kZUZyYW1lRXJyb3IkMiIsImlzRmF0YWwiLCJfZXh0ZW5kczIiLCJwYXJzZUxvZ0JveExvZyIsImFyZ3NXaXRob3V0Q29tcG9uZW50U3RhY2siLCJsYXN0QXJnIiwiX2l0ZXJhdG9yMiIsIl9zdGVwMiIsIm1lc3NhZ2VFbmRJbmRleCIsInNlYXJjaCJdLCJzb3VyY2VzIjpbInBhcnNlTG9nQm94TG9nLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IFVURlNlcXVlbmNlIGZyb20gJy4uLy4uL1VURlNlcXVlbmNlJztcbmltcG9ydCBzdHJpbmdpZnlTYWZlIGZyb20gJy4uLy4uL1V0aWxpdGllcy9zdHJpbmdpZnlTYWZlJztcbmltcG9ydCB0eXBlIHtFeGNlcHRpb25EYXRhfSBmcm9tICcuLi8uLi9Db3JlL05hdGl2ZUV4Y2VwdGlvbnNNYW5hZ2VyJztcbmltcG9ydCB0eXBlIHtMb2dCb3hMb2dEYXRhfSBmcm9tICcuL0xvZ0JveExvZyc7XG5pbXBvcnQgcGFyc2VFcnJvclN0YWNrIGZyb20gJy4uLy4uL0NvcmUvRGV2dG9vbHMvcGFyc2VFcnJvclN0YWNrJztcblxuY29uc3QgQkFCRUxfVFJBTlNGT1JNX0VSUk9SX0ZPUk1BVCA9IC9eKD86VHJhbnNmb3JtRXJyb3IgKT8oPzpTeW50YXhFcnJvcjogfFJlZmVyZW5jZUVycm9yOiApKC4qKTogKC4qKSBcXCgoXFxkKyk6KFxcZCspXFwpXFxuXFxuKFtcXHNcXFNdKykvO1xuY29uc3QgQkFCRUxfQ09ERV9GUkFNRV9FUlJPUl9GT1JNQVQgPSAvXig/OlRyYW5zZm9ybUVycm9yICk/KD86LiopOj8gKD86Lio/KShcXC8uKik6IChbXFxzXFxTXSs/KVxcbihbID5dezJ9W1xcZFxcc10rIFxcfFtcXHNcXFNdK3xcXHV7MDAxYn1bXFxzXFxTXSspL3U7XG5jb25zdCBNRVRST19FUlJPUl9GT1JNQVQgPSAvXig/OkludGVybmFsRXJyb3IgTWV0cm8gaGFzIGVuY291bnRlcmVkIGFuIGVycm9yOikgKC4qKTogKC4qKSBcXCgoXFxkKyk6KFxcZCspXFwpXFxuXFxuKFtcXHNcXFNdKykvdTtcblxuZXhwb3J0IHR5cGUgRXh0ZW5kZWRFeGNlcHRpb25EYXRhID0gRXhjZXB0aW9uRGF0YSAmIHtcbiAgaXNDb21wb25lbnRFcnJvcjogYm9vbGVhbixcbiAgLi4uXG59O1xuZXhwb3J0IHR5cGUgQ2F0ZWdvcnkgPSBzdHJpbmc7XG5leHBvcnQgdHlwZSBDb2RlRnJhbWUgPSAkUmVhZE9ubHk8e3xcbiAgY29udGVudDogc3RyaW5nLFxuICBsb2NhdGlvbjogP3tcbiAgICByb3c6IG51bWJlcixcbiAgICBjb2x1bW46IG51bWJlcixcbiAgICAuLi5cbiAgfSxcbiAgZmlsZU5hbWU6IHN0cmluZyxcblxuICAvLyBUT0RPOiBXaGVuIFJlYWN0IHN3aXRjaGVkIHRvIHVzaW5nIGNhbGwgc3RhY2sgZnJhbWVzLFxuICAvLyB3ZSBnYWluZWQgdGhlIGFiaWxpdHkgdG8gdXNlIHRoZSBjb2xsYXBzZSBmbGFnLCBidXRcbiAgLy8gaXQgaXMgbm90IGludGVncmF0ZWQgaW50byB0aGUgTG9nQm94IFVJLlxuICBjb2xsYXBzZT86IGJvb2xlYW4sXG58fT47XG5leHBvcnQgdHlwZSBNZXNzYWdlID0gJFJlYWRPbmx5PHt8XG4gIGNvbnRlbnQ6IHN0cmluZyxcbiAgc3Vic3RpdHV0aW9uczogJFJlYWRPbmx5QXJyYXk8XG4gICAgJFJlYWRPbmx5PHt8XG4gICAgICBsZW5ndGg6IG51bWJlcixcbiAgICAgIG9mZnNldDogbnVtYmVyLFxuICAgIHx9PixcbiAgPixcbnx9PjtcblxuZXhwb3J0IHR5cGUgQ29tcG9uZW50U3RhY2sgPSAkUmVhZE9ubHlBcnJheTxDb2RlRnJhbWU+O1xuXG5jb25zdCBTVUJTVElUVVRJT04gPSBVVEZTZXF1ZW5jZS5CT00gKyAnJXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJbnRlcnBvbGF0aW9uKFxuICBhcmdzOiAkUmVhZE9ubHlBcnJheTxtaXhlZD4sXG4pOiAkUmVhZE9ubHk8e3xcbiAgY2F0ZWdvcnk6IENhdGVnb3J5LFxuICBtZXNzYWdlOiBNZXNzYWdlLFxufH0+IHtcbiAgY29uc3QgY2F0ZWdvcnlQYXJ0cyA9IFtdO1xuICBjb25zdCBjb250ZW50UGFydHMgPSBbXTtcbiAgY29uc3Qgc3Vic3RpdHV0aW9uT2Zmc2V0cyA9IFtdO1xuXG4gIGNvbnN0IHJlbWFpbmluZyA9IFsuLi5hcmdzXTtcbiAgaWYgKHR5cGVvZiByZW1haW5pbmdbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgZm9ybWF0U3RyaW5nID0gU3RyaW5nKHJlbWFpbmluZy5zaGlmdCgpKTtcbiAgICBjb25zdCBmb3JtYXRTdHJpbmdQYXJ0cyA9IGZvcm1hdFN0cmluZy5zcGxpdCgnJXMnKTtcbiAgICBjb25zdCBzdWJzdGl0dXRpb25Db3VudCA9IGZvcm1hdFN0cmluZ1BhcnRzLmxlbmd0aCAtIDE7XG4gICAgY29uc3Qgc3Vic3RpdHV0aW9ucyA9IHJlbWFpbmluZy5zcGxpY2UoMCwgc3Vic3RpdHV0aW9uQ291bnQpO1xuXG4gICAgbGV0IGNhdGVnb3J5U3RyaW5nID0gJyc7XG4gICAgbGV0IGNvbnRlbnRTdHJpbmcgPSAnJztcblxuICAgIGxldCBzdWJzdGl0dXRpb25JbmRleCA9IDA7XG4gICAgZm9yIChjb25zdCBmb3JtYXRTdHJpbmdQYXJ0IG9mIGZvcm1hdFN0cmluZ1BhcnRzKSB7XG4gICAgICBjYXRlZ29yeVN0cmluZyArPSBmb3JtYXRTdHJpbmdQYXJ0O1xuICAgICAgY29udGVudFN0cmluZyArPSBmb3JtYXRTdHJpbmdQYXJ0O1xuXG4gICAgICBpZiAoc3Vic3RpdHV0aW9uSW5kZXggPCBzdWJzdGl0dXRpb25Db3VudCkge1xuICAgICAgICBpZiAoc3Vic3RpdHV0aW9uSW5kZXggPCBzdWJzdGl0dXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgIC8vIERvbid0IHN0cmluZ2lmeSBhIHN0cmluZyB0eXBlLlxuICAgICAgICAgIC8vIEl0IGFkZHMgcXVvdGF0aW9uIG1hcmsgd3JhcHBlcnMgYXJvdW5kIHRoZSBzdHJpbmcsXG4gICAgICAgICAgLy8gd2hpY2ggY2F1c2VzIHRoZSBMb2dCb3ggdG8gbG9vayBvZGQuXG4gICAgICAgICAgY29uc3Qgc3Vic3RpdHV0aW9uID1cbiAgICAgICAgICAgIHR5cGVvZiBzdWJzdGl0dXRpb25zW3N1YnN0aXR1dGlvbkluZGV4XSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgPyBzdWJzdGl0dXRpb25zW3N1YnN0aXR1dGlvbkluZGV4XVxuICAgICAgICAgICAgICA6IHN0cmluZ2lmeVNhZmUoc3Vic3RpdHV0aW9uc1tzdWJzdGl0dXRpb25JbmRleF0pO1xuICAgICAgICAgIHN1YnN0aXR1dGlvbk9mZnNldHMucHVzaCh7XG4gICAgICAgICAgICBsZW5ndGg6IHN1YnN0aXR1dGlvbi5sZW5ndGgsXG4gICAgICAgICAgICBvZmZzZXQ6IGNvbnRlbnRTdHJpbmcubGVuZ3RoLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2F0ZWdvcnlTdHJpbmcgKz0gU1VCU1RJVFVUSU9OO1xuICAgICAgICAgIGNvbnRlbnRTdHJpbmcgKz0gc3Vic3RpdHV0aW9uO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1YnN0aXR1dGlvbk9mZnNldHMucHVzaCh7XG4gICAgICAgICAgICBsZW5ndGg6IDIsXG4gICAgICAgICAgICBvZmZzZXQ6IGNvbnRlbnRTdHJpbmcubGVuZ3RoLFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2F0ZWdvcnlTdHJpbmcgKz0gJyVzJztcbiAgICAgICAgICBjb250ZW50U3RyaW5nICs9ICclcyc7XG4gICAgICAgIH1cblxuICAgICAgICBzdWJzdGl0dXRpb25JbmRleCsrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNhdGVnb3J5UGFydHMucHVzaChjYXRlZ29yeVN0cmluZyk7XG4gICAgY29udGVudFBhcnRzLnB1c2goY29udGVudFN0cmluZyk7XG4gIH1cblxuICBjb25zdCByZW1haW5pbmdBcmdzID0gcmVtYWluaW5nLm1hcChhcmcgPT4ge1xuICAgIC8vIERvbid0IHN0cmluZ2lmeSBhIHN0cmluZyB0eXBlLlxuICAgIC8vIEl0IGFkZHMgcXVvdGF0aW9uIG1hcmsgd3JhcHBlcnMgYXJvdW5kIHRoZSBzdHJpbmcsXG4gICAgLy8gd2hpY2ggY2F1c2VzIHRoZSBMb2dCb3ggdG8gbG9vayBvZGQuXG4gICAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnID8gYXJnIDogc3RyaW5naWZ5U2FmZShhcmcpO1xuICB9KTtcbiAgY2F0ZWdvcnlQYXJ0cy5wdXNoKC4uLnJlbWFpbmluZ0FyZ3MpO1xuICBjb250ZW50UGFydHMucHVzaCguLi5yZW1haW5pbmdBcmdzKTtcblxuICByZXR1cm4ge1xuICAgIGNhdGVnb3J5OiBjYXRlZ29yeVBhcnRzLmpvaW4oJyAnKSxcbiAgICBtZXNzYWdlOiB7XG4gICAgICBjb250ZW50OiBjb250ZW50UGFydHMuam9pbignICcpLFxuICAgICAgc3Vic3RpdHV0aW9uczogc3Vic3RpdHV0aW9uT2Zmc2V0cyxcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBpc0NvbXBvbmVudFN0YWNrKGNvbnNvbGVBcmd1bWVudDogc3RyaW5nKSB7XG4gIGNvbnN0IGlzT2xkQ29tcG9uZW50U3RhY2tGb3JtYXQgPSAvIHs0fWluLy50ZXN0KGNvbnNvbGVBcmd1bWVudCk7XG4gIGNvbnN0IGlzTmV3Q29tcG9uZW50U3RhY2tGb3JtYXQgPSAvIHs0fWF0Ly50ZXN0KGNvbnNvbGVBcmd1bWVudCk7XG4gIGNvbnN0IGlzTmV3SlNDQ29tcG9uZW50U3RhY2tGb3JtYXQgPSAvQC4qXFxuLy50ZXN0KGNvbnNvbGVBcmd1bWVudCk7XG5cbiAgcmV0dXJuIChcbiAgICBpc09sZENvbXBvbmVudFN0YWNrRm9ybWF0IHx8XG4gICAgaXNOZXdDb21wb25lbnRTdGFja0Zvcm1hdCB8fFxuICAgIGlzTmV3SlNDQ29tcG9uZW50U3RhY2tGb3JtYXRcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ29tcG9uZW50U3RhY2sobWVzc2FnZTogc3RyaW5nKTogQ29tcG9uZW50U3RhY2sge1xuICAvLyBJbiBuZXdlciB2ZXJzaW9ucyBvZiBSZWFjdCwgdGhlIGNvbXBvbmVudCBzdGFjayBpcyBmb3JtYXR0ZWQgYXMgYSBjYWxsIHN0YWNrIGZyYW1lLlxuICAvLyBGaXJzdCB0cnkgdG8gcGFyc2UgdGhlIGNvbXBvbmVudCBzdGFjayBhcyBhIGNhbGwgc3RhY2sgZnJhbWUsIGFuZCBpZiB0aGF0IGRvZXNuJ3RcbiAgLy8gd29yayB0aGVuIHdlJ2xsIGZhbGxiYWNrIHRvIHRoZSBvbGQgY3VzdG9tIGNvbXBvbmVudCBzdGFjayBmb3JtYXQgcGFyc2luZy5cbiAgY29uc3Qgc3RhY2sgPSBwYXJzZUVycm9yU3RhY2sobWVzc2FnZSk7XG4gIGlmIChzdGFjayAmJiBzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIHN0YWNrLm1hcChmcmFtZSA9PiAoe1xuICAgICAgY29udGVudDogZnJhbWUubWV0aG9kTmFtZSxcbiAgICAgIGNvbGxhcHNlOiBmcmFtZS5jb2xsYXBzZSB8fCBmYWxzZSxcbiAgICAgIGZpbGVOYW1lOiBmcmFtZS5maWxlID09IG51bGwgPyAndW5rbm93bicgOiBmcmFtZS5maWxlLFxuICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgY29sdW1uOiBmcmFtZS5jb2x1bW4gPT0gbnVsbCA/IC0xIDogZnJhbWUuY29sdW1uLFxuICAgICAgICByb3c6IGZyYW1lLmxpbmVOdW1iZXIgPT0gbnVsbCA/IC0xIDogZnJhbWUubGluZU51bWJlcixcbiAgICAgIH0sXG4gICAgfSkpO1xuICB9XG5cbiAgcmV0dXJuIG1lc3NhZ2VcbiAgICAuc3BsaXQoL1xcbiB7NH1pbiAvZylcbiAgICAubWFwKHMgPT4ge1xuICAgICAgaWYgKCFzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgbWF0Y2ggPSBzLm1hdGNoKC8oLiopIFxcKGF0ICguKlxcLmpzKTooW1xcZF0rKVxcKS8pO1xuICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgbGV0IFtjb250ZW50LCBmaWxlTmFtZSwgcm93XSA9IG1hdGNoLnNsaWNlKDEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgIGxvY2F0aW9uOiB7Y29sdW1uOiAtMSwgcm93OiBwYXJzZUludChyb3csIDEwKX0sXG4gICAgICB9O1xuICAgIH0pXG4gICAgLmZpbHRlcihCb29sZWFuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTG9nQm94RXhjZXB0aW9uKFxuICBlcnJvcjogRXh0ZW5kZWRFeGNlcHRpb25EYXRhLFxuKTogTG9nQm94TG9nRGF0YSB7XG4gIGNvbnN0IG1lc3NhZ2UgPVxuICAgIGVycm9yLm9yaWdpbmFsTWVzc2FnZSAhPSBudWxsID8gZXJyb3Iub3JpZ2luYWxNZXNzYWdlIDogJ1Vua25vd24nO1xuXG4gIGNvbnN0IG1ldHJvSW50ZXJuYWxFcnJvciA9IG1lc3NhZ2UubWF0Y2goTUVUUk9fRVJST1JfRk9STUFUKTtcbiAgaWYgKG1ldHJvSW50ZXJuYWxFcnJvcikge1xuICAgIGNvbnN0IFtcbiAgICAgIGNvbnRlbnQsXG4gICAgICBmaWxlTmFtZSxcbiAgICAgIHJvdyxcbiAgICAgIGNvbHVtbixcbiAgICAgIGNvZGVGcmFtZSxcbiAgICBdID0gbWV0cm9JbnRlcm5hbEVycm9yLnNsaWNlKDEpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiAnZmF0YWwnLFxuICAgICAgdHlwZTogJ01ldHJvIEVycm9yJyxcbiAgICAgIHN0YWNrOiBbXSxcbiAgICAgIGlzQ29tcG9uZW50RXJyb3I6IGZhbHNlLFxuICAgICAgY29tcG9uZW50U3RhY2s6IFtdLFxuICAgICAgY29kZUZyYW1lOiB7XG4gICAgICAgIGZpbGVOYW1lLFxuICAgICAgICBsb2NhdGlvbjoge1xuICAgICAgICAgIHJvdzogcGFyc2VJbnQocm93LCAxMCksXG4gICAgICAgICAgY29sdW1uOiBwYXJzZUludChjb2x1bW4sIDEwKSxcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDogY29kZUZyYW1lLFxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgc3Vic3RpdHV0aW9uczogW10sXG4gICAgICB9LFxuICAgICAgY2F0ZWdvcnk6IGAke2ZpbGVOYW1lfS0ke3Jvd30tJHtjb2x1bW59YCxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgYmFiZWxUcmFuc2Zvcm1FcnJvciA9IG1lc3NhZ2UubWF0Y2goQkFCRUxfVFJBTlNGT1JNX0VSUk9SX0ZPUk1BVCk7XG4gIGlmIChiYWJlbFRyYW5zZm9ybUVycm9yKSB7XG4gICAgLy8gVHJhbnNmb3JtIGVycm9ycyBhcmUgdGhyb3duIGZyb20gaW5zaWRlIHRoZSBCYWJlbCB0cmFuc2Zvcm1lci5cbiAgICBjb25zdCBbXG4gICAgICBmaWxlTmFtZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICByb3csXG4gICAgICBjb2x1bW4sXG4gICAgICBjb2RlRnJhbWUsXG4gICAgXSA9IGJhYmVsVHJhbnNmb3JtRXJyb3Iuc2xpY2UoMSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGV2ZWw6ICdzeW50YXgnLFxuICAgICAgc3RhY2s6IFtdLFxuICAgICAgaXNDb21wb25lbnRFcnJvcjogZmFsc2UsXG4gICAgICBjb21wb25lbnRTdGFjazogW10sXG4gICAgICBjb2RlRnJhbWU6IHtcbiAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgcm93OiBwYXJzZUludChyb3csIDEwKSxcbiAgICAgICAgICBjb2x1bW46IHBhcnNlSW50KGNvbHVtbiwgMTApLFxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiBjb2RlRnJhbWUsXG4gICAgICB9LFxuICAgICAgbWVzc2FnZToge1xuICAgICAgICBjb250ZW50LFxuICAgICAgICBzdWJzdGl0dXRpb25zOiBbXSxcbiAgICAgIH0sXG4gICAgICBjYXRlZ29yeTogYCR7ZmlsZU5hbWV9LSR7cm93fS0ke2NvbHVtbn1gLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBiYWJlbENvZGVGcmFtZUVycm9yID0gbWVzc2FnZS5tYXRjaChCQUJFTF9DT0RFX0ZSQU1FX0VSUk9SX0ZPUk1BVCk7XG5cbiAgaWYgKGJhYmVsQ29kZUZyYW1lRXJyb3IpIHtcbiAgICAvLyBDb2RlZnJhbWUgZXJyb3JzIGFyZSB0aHJvd24gZnJvbSBhbnkgdXNlIG9mIGJ1aWxkQ29kZUZyYW1lRXJyb3IuXG4gICAgY29uc3QgW2ZpbGVOYW1lLCBjb250ZW50LCBjb2RlRnJhbWVdID0gYmFiZWxDb2RlRnJhbWVFcnJvci5zbGljZSgxKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGV2ZWw6ICdzeW50YXgnLFxuICAgICAgc3RhY2s6IFtdLFxuICAgICAgaXNDb21wb25lbnRFcnJvcjogZmFsc2UsXG4gICAgICBjb21wb25lbnRTdGFjazogW10sXG4gICAgICBjb2RlRnJhbWU6IHtcbiAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgIGxvY2F0aW9uOiBudWxsLCAvLyBXZSBhcmUgbm90IGdpdmVuIHRoZSBsb2NhdGlvbi5cbiAgICAgICAgY29udGVudDogY29kZUZyYW1lLFxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgc3Vic3RpdHV0aW9uczogW10sXG4gICAgICB9LFxuICAgICAgY2F0ZWdvcnk6IGAke2ZpbGVOYW1lfS0kezF9LSR7MX1gLFxuICAgIH07XG4gIH1cblxuICBpZiAobWVzc2FnZS5tYXRjaCgvXlRyYW5zZm9ybUVycm9yIC8pKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiAnc3ludGF4JyxcbiAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgIGlzQ29tcG9uZW50RXJyb3I6IGVycm9yLmlzQ29tcG9uZW50RXJyb3IsXG4gICAgICBjb21wb25lbnRTdGFjazogW10sXG4gICAgICBtZXNzYWdlOiB7XG4gICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICAgIHN1YnN0aXR1dGlvbnM6IFtdLFxuICAgICAgfSxcbiAgICAgIGNhdGVnb3J5OiBtZXNzYWdlLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBjb21wb25lbnRTdGFjayA9IGVycm9yLmNvbXBvbmVudFN0YWNrO1xuICBpZiAoZXJyb3IuaXNGYXRhbCB8fCBlcnJvci5pc0NvbXBvbmVudEVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiAnZmF0YWwnLFxuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgICAgaXNDb21wb25lbnRFcnJvcjogZXJyb3IuaXNDb21wb25lbnRFcnJvcixcbiAgICAgIGNvbXBvbmVudFN0YWNrOlxuICAgICAgICBjb21wb25lbnRTdGFjayAhPSBudWxsID8gcGFyc2VDb21wb25lbnRTdGFjayhjb21wb25lbnRTdGFjaykgOiBbXSxcbiAgICAgIC4uLnBhcnNlSW50ZXJwb2xhdGlvbihbbWVzc2FnZV0pLFxuICAgIH07XG4gIH1cblxuICBpZiAoY29tcG9uZW50U3RhY2sgIT0gbnVsbCkge1xuICAgIC8vIEl0IGlzIHBvc3NpYmxlIHRoYXQgY29uc29sZSBlcnJvcnMgaGF2ZSBhIGNvbXBvbmVudFN0YWNrLlxuICAgIHJldHVybiB7XG4gICAgICBsZXZlbDogJ2Vycm9yJyxcbiAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgIGlzQ29tcG9uZW50RXJyb3I6IGVycm9yLmlzQ29tcG9uZW50RXJyb3IsXG4gICAgICBjb21wb25lbnRTdGFjazogcGFyc2VDb21wb25lbnRTdGFjayhjb21wb25lbnRTdGFjayksXG4gICAgICAuLi5wYXJzZUludGVycG9sYXRpb24oW21lc3NhZ2VdKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gTW9zdCBgY29uc29sZS5lcnJvcmAgY2FsbHMgd29uJ3QgaGF2ZSBhIGNvbXBvbmVudFN0YWNrLiBXZSBwYXJzZSB0aGVtIGxpa2VcbiAgLy8gcmVndWxhciBsb2dzIHdoaWNoIGhhdmUgdGhlIGNvbXBvbmVudCBzdGFjayBidXJyaWVkIGluIHRoZSBtZXNzYWdlLlxuICByZXR1cm4ge1xuICAgIGxldmVsOiAnZXJyb3InLFxuICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICBpc0NvbXBvbmVudEVycm9yOiBlcnJvci5pc0NvbXBvbmVudEVycm9yLFxuICAgIC4uLnBhcnNlTG9nQm94TG9nKFttZXNzYWdlXSksXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUxvZ0JveExvZyhcbiAgYXJnczogJFJlYWRPbmx5QXJyYXk8bWl4ZWQ+LFxuKToge3xcbiAgY29tcG9uZW50U3RhY2s6IENvbXBvbmVudFN0YWNrLFxuICBjYXRlZ29yeTogQ2F0ZWdvcnksXG4gIG1lc3NhZ2U6IE1lc3NhZ2UsXG58fSB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBhcmdzWzBdO1xuICBsZXQgYXJnc1dpdGhvdXRDb21wb25lbnRTdGFjayA9IFtdO1xuICBsZXQgY29tcG9uZW50U3RhY2sgPSBbXTtcblxuICAvLyBFeHRyYWN0IGNvbXBvbmVudCBzdGFjayBmcm9tIHdhcm5pbmdzIGxpa2UgXCJTb21lIHdhcm5pbmclc1wiLlxuICBpZiAoXG4gICAgdHlwZW9mIG1lc3NhZ2UgPT09ICdzdHJpbmcnICYmXG4gICAgbWVzc2FnZS5zbGljZSgtMikgPT09ICclcycgJiZcbiAgICBhcmdzLmxlbmd0aCA+IDBcbiAgKSB7XG4gICAgY29uc3QgbGFzdEFyZyA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgICBpZiAodHlwZW9mIGxhc3RBcmcgPT09ICdzdHJpbmcnICYmIGlzQ29tcG9uZW50U3RhY2sobGFzdEFyZykpIHtcbiAgICAgIGFyZ3NXaXRob3V0Q29tcG9uZW50U3RhY2sgPSBhcmdzLnNsaWNlKDAsIC0xKTtcbiAgICAgIGFyZ3NXaXRob3V0Q29tcG9uZW50U3RhY2tbMF0gPSBtZXNzYWdlLnNsaWNlKDAsIC0yKTtcbiAgICAgIGNvbXBvbmVudFN0YWNrID0gcGFyc2VDb21wb25lbnRTdGFjayhsYXN0QXJnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoY29tcG9uZW50U3RhY2subGVuZ3RoID09PSAwKSB7XG4gICAgLy8gVHJ5IGZpbmRpbmcgdGhlIGNvbXBvbmVudCBzdGFjayBlbHNld2hlcmUuXG4gICAgZm9yIChjb25zdCBhcmcgb2YgYXJncykge1xuICAgICAgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnICYmIGlzQ29tcG9uZW50U3RhY2soYXJnKSkge1xuICAgICAgICAvLyBTdHJpcCBvdXQgYW55IG1lc3NhZ2VzIGJlZm9yZSB0aGUgY29tcG9uZW50IHN0YWNrLlxuICAgICAgICBsZXQgbWVzc2FnZUVuZEluZGV4ID0gYXJnLnNlYXJjaCgvXFxuIHs0fShpbnxhdCkgLyk7XG4gICAgICAgIGlmIChtZXNzYWdlRW5kSW5kZXggPCAwKSB7XG4gICAgICAgICAgLy8gSGFuZGxlIEpTQyBjb21wb25lbnQgc3RhY2tzLlxuICAgICAgICAgIG1lc3NhZ2VFbmRJbmRleCA9IGFyZy5zZWFyY2goL1xcbi8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXNzYWdlRW5kSW5kZXggPiAwKSB7XG4gICAgICAgICAgYXJnc1dpdGhvdXRDb21wb25lbnRTdGFjay5wdXNoKGFyZy5zbGljZSgwLCBtZXNzYWdlRW5kSW5kZXgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBvbmVudFN0YWNrID0gcGFyc2VDb21wb25lbnRTdGFjayhhcmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJnc1dpdGhvdXRDb21wb25lbnRTdGFjay5wdXNoKGFyZyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5wYXJzZUludGVycG9sYXRpb24oYXJnc1dpdGhvdXRDb21wb25lbnRTdGFjayksXG4gICAgY29tcG9uZW50U3RhY2ss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