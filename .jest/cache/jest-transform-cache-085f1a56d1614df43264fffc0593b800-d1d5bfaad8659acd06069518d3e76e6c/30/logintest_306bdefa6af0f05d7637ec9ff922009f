1f6ba3ba3f864f0f3dd82b557b05f486
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _native = require("@react-navigation/native");
var eva = _interopRequireWildcard(require("@eva-design/eva"));
var _components = require("@ui-kitten/components");
var _store = _interopRequireDefault(require("../../redux/store"));
var _Login = _interopRequireDefault(require("../Login"));
var _actions = require("../../redux/actions");
var _reactRedux = require("react-redux");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
var store = (0, _store.default)();
var email = 'test@test.com';
var password = 'Azerty123@@';
var navigation = jest.mock('useNavigation');
var setup = function setup() {
  return (0, _reactNative.render)(_react.default.createElement(_components.ApplicationProvider, (0, _extends2.default)({}, eva, {
    theme: eva.light
  }), _react.default.createElement(_reactRedux.Provider, {
    store: store
  }, _react.default.createElement(_native.NavigationContainer, null, _react.default.createElement(_Login.default, null)))));
};
describe('Test Login Component', function () {
  beforeEach(function () {
    store.dispatch = jest.fn();
  });
  afterEach(_reactNative.cleanup);
  it('should render all form element', function () {
    setup();
    expect(_reactNative.screen.getByTestId('logo')).toBeDefined();
    expect(_reactNative.screen.getByTestId('email')).toBeDefined();
    expect(_reactNative.screen.getByTestId('password')).toBeDefined();
    var loginBtn = _reactNative.screen.getByTestId('login-btn');
    expect(loginBtn).toBeDefined();
  });
  it('should enable login button after entereing valid email and password value', function () {
    setup();
    var emailInput = _reactNative.screen.getByTestId('email');
    var passwordInput = _reactNative.screen.getByTestId('password');
    var loginBtn = _reactNative.screen.getByTestId('login-btn');
    expect(loginBtn.props.accessibilityState).toHaveProperty('disabled', true);
    _reactNative.fireEvent.changeText(emailInput, email);
    _reactNative.fireEvent.changeText(passwordInput, password);
    expect(loginBtn.props.accessibilityState).toHaveProperty('disabled', false);
    _reactNative.fireEvent.press(loginBtn);
    expect(store.dispatch).toHaveBeenCalledTimes(1);
    expect(store.dispatch).toHaveBeenCalledWith((0, _actions.loginRequest)(email, password, navigation));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdE5hdGl2ZSIsIl9uYXRpdmUiLCJldmEiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9jb21wb25lbnRzIiwiX3N0b3JlIiwiX0xvZ2luIiwiX2FjdGlvbnMiLCJfcmVhY3RSZWR1eCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJzdG9yZSIsImNvbmZpZ3VyZVN0b3JlIiwiZW1haWwiLCJwYXNzd29yZCIsIm5hdmlnYXRpb24iLCJqZXN0IiwibW9jayIsInNldHVwIiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsIkFwcGxpY2F0aW9uUHJvdmlkZXIiLCJfZXh0ZW5kczIiLCJ0aGVtZSIsImxpZ2h0IiwiUHJvdmlkZXIiLCJOYXZpZ2F0aW9uQ29udGFpbmVyIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiZGlzcGF0Y2giLCJmbiIsImFmdGVyRWFjaCIsImNsZWFudXAiLCJpdCIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGVzdElkIiwidG9CZURlZmluZWQiLCJsb2dpbkJ0biIsImVtYWlsSW5wdXQiLCJwYXNzd29yZElucHV0IiwicHJvcHMiLCJhY2Nlc3NpYmlsaXR5U3RhdGUiLCJ0b0hhdmVQcm9wZXJ0eSIsImZpcmVFdmVudCIsImNoYW5nZVRleHQiLCJwcmVzcyIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibG9naW5SZXF1ZXN0Il0sInNvdXJjZXMiOlsibG9naW4udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHtcbiAgY2xlYW51cCxcbiAgZmlyZUV2ZW50LFxuICByZW5kZXIsXG4gIHNjcmVlbixcbn0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdC1uYXRpdmUnO1xuaW1wb3J0IHt1c2VOYXZpZ2F0aW9ufSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnO1xuaW1wb3J0IHtOYXZpZ2F0aW9uQ29udGFpbmVyfSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnO1xuaW1wb3J0ICogYXMgZXZhIGZyb20gJ0BldmEtZGVzaWduL2V2YSc7XG5pbXBvcnQge0FwcGxpY2F0aW9uUHJvdmlkZXJ9IGZyb20gJ0B1aS1raXR0ZW4vY29tcG9uZW50cyc7XG5pbXBvcnQgY29uZmlndXJlU3RvcmUgZnJvbSAnLi4vLi4vcmVkdXgvc3RvcmUnO1xuaW1wb3J0IExvZ2luIGZyb20gJy4uL0xvZ2luJztcbmltcG9ydCB7bG9naW5SZXF1ZXN0fSBmcm9tICcuLi8uLi9yZWR1eC9hY3Rpb25zJztcbmltcG9ydCB7UHJvdmlkZXJ9IGZyb20gJ3JlYWN0LXJlZHV4JztcblxubGV0IHN0b3JlID0gY29uZmlndXJlU3RvcmUoKTtcblxuY29uc3QgZW1haWwgPSAndGVzdEB0ZXN0LmNvbSc7XG5jb25zdCBwYXNzd29yZCA9ICdBemVydHkxMjNAQCc7XG5cbmNvbnN0IG5hdmlnYXRpb24gPSBqZXN0Lm1vY2soJ3VzZU5hdmlnYXRpb24nKTtcbmNvbnN0IHNldHVwID0gKCkgPT5cbiAgcmVuZGVyKFxuICAgIDxBcHBsaWNhdGlvblByb3ZpZGVyIHsuLi5ldmF9IHRoZW1lPXtldmEubGlnaHR9PlxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XG4gICAgICAgIDxOYXZpZ2F0aW9uQ29udGFpbmVyPlxuICAgICAgICAgIDxMb2dpbiAvPlxuICAgICAgICA8L05hdmlnYXRpb25Db250YWluZXI+XG4gICAgICA8L1Byb3ZpZGVyPlxuICAgIDwvQXBwbGljYXRpb25Qcm92aWRlcj4sXG4gICk7XG5cbmRlc2NyaWJlKCdUZXN0IExvZ2luIENvbXBvbmVudCcsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgc3RvcmUuZGlzcGF0Y2ggPSBqZXN0LmZuKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChjbGVhbnVwKTtcblxuICBpdCgnc2hvdWxkIHJlbmRlciBhbGwgZm9ybSBlbGVtZW50JywgKCkgPT4ge1xuICAgIHNldHVwKCk7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdsb2dvJykpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZW1haWwnKSkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdwYXNzd29yZCcpKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgY29uc3QgbG9naW5CdG4gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2xvZ2luLWJ0bicpO1xuXG4gICAgZXhwZWN0KGxvZ2luQnRuKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGVuYWJsZSBsb2dpbiBidXR0b24gYWZ0ZXIgZW50ZXJlaW5nIHZhbGlkIGVtYWlsIGFuZCBwYXNzd29yZCB2YWx1ZScsICgpID0+IHtcbiAgICBzZXR1cCgpO1xuICAgIGNvbnN0IGVtYWlsSW5wdXQgPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2VtYWlsJyk7XG4gICAgY29uc3QgcGFzc3dvcmRJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgncGFzc3dvcmQnKTtcbiAgICBjb25zdCBsb2dpbkJ0biA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnbG9naW4tYnRuJyk7XG5cbiAgICBleHBlY3QobG9naW5CdG4ucHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlKS50b0hhdmVQcm9wZXJ0eSgnZGlzYWJsZWQnLCB0cnVlKTtcblxuICAgIGZpcmVFdmVudC5jaGFuZ2VUZXh0KGVtYWlsSW5wdXQsIGVtYWlsKTtcbiAgICBmaXJlRXZlbnQuY2hhbmdlVGV4dChwYXNzd29yZElucHV0LCBwYXNzd29yZCk7XG5cbiAgICBleHBlY3QobG9naW5CdG4ucHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlKS50b0hhdmVQcm9wZXJ0eSgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgZmlyZUV2ZW50LnByZXNzKGxvZ2luQnRuKTtcbiAgICBleHBlY3Qoc3RvcmUuZGlzcGF0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICBleHBlY3Qoc3RvcmUuZGlzcGF0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgbG9naW5SZXF1ZXN0KGVtYWlsLCBwYXNzd29yZCwgbmF2aWdhdGlvbiksXG4gICAgKTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLFlBQUEsR0FBQUQsT0FBQTtBQU9BLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLEdBQUEsR0FBQUMsdUJBQUEsQ0FBQUosT0FBQTtBQUNBLElBQUFLLFdBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLE1BQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFPLE1BQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFRLFFBQUEsR0FBQVIsT0FBQTtBQUNBLElBQUFTLFdBQUEsR0FBQVQsT0FBQTtBQUFxQyxTQUFBVSx5QkFBQUMsV0FBQSxlQUFBQyxPQUFBLGtDQUFBQyxpQkFBQSxPQUFBRCxPQUFBLFFBQUFFLGdCQUFBLE9BQUFGLE9BQUEsWUFBQUYsd0JBQUEsWUFBQUEseUJBQUFDLFdBQUEsV0FBQUEsV0FBQSxHQUFBRyxnQkFBQSxHQUFBRCxpQkFBQSxLQUFBRixXQUFB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