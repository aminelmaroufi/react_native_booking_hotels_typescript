84b71d7f9271f9b7aed85fedc20f4ba8
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _react = _interopRequireDefault(require("react"));
var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));
var _reactNative = require("@testing-library/react-native");
var _Home = _interopRequireDefault(require("../Home"));
var _actions = require("../../redux/actions");
var _hotels_response = _interopRequireDefault(require("./fixtures/hotels_response"));
var _setup = _interopRequireDefault(require("../setup"));
var mockStore = (0, _reduxMockStore.default)();
var navigation = {
  navigate: jest.fn(),
  goBack: jest.fn()
};
var store = mockStore({
  hotel: {
    hotels: _hotels_response.default.result.hotels
  }
});
describe('Test homepage screen', function () {
  beforeEach(function () {
    store.dispatch = jest.fn();
    (0, _setup.default)(_react.default.createElement(_Home.default, {
      hotels: _hotels_response.default
    }), store);
  });
  afterEach(_reactNative.cleanup);
  it('fetches the hotels on mount', function () {
    var expectedAction = (0, _actions.getHotels)({
      q: '',
      page: 1
    });
    expect(store.dispatch).toHaveBeenCalledTimes(1);
    expect(store.dispatch).toHaveBeenCalledWith(expectedAction);
  });
  it('should display the list of hotels', function () {
    expect(_reactNative.screen.getByTestId('search-box')).toBeDefined();
  });
  it('should render a list of hotels', function () {
    var hotels = _hotels_response.default.result.hotels;
    hotels.forEach(function (hotel) {
      var hotelName = _reactNative.screen.getByText(hotel.name);
      var addressElement = _reactNative.screen.getByText(hotel.short_address);
      expect(hotelName).toBeDefined();
      expect(addressElement).toBeDefined();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWR1eE1vY2tTdG9yZSIsIl9yZWFjdE5hdGl2ZSIsIl9Ib21lIiwiX2FjdGlvbnMiLCJfaG90ZWxzX3Jlc3BvbnNlIiwiX3NldHVwIiwibW9ja1N0b3JlIiwiY29uZmlndXJlU3RvcmUiLCJuYXZpZ2F0aW9uIiwibmF2aWdhdGUiLCJqZXN0IiwiZm4iLCJnb0JhY2siLCJzdG9yZSIsImhvdGVsIiwiaG90ZWxzIiwiaG90ZWxzX3Jlc3BvbnNlIiwicmVzdWx0IiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiZGlzcGF0Y2giLCJTZXR1cCIsImRlZmF1bHQiLCJjcmVhdGVFbGVtZW50IiwiYWZ0ZXJFYWNoIiwiY2xlYW51cCIsIml0IiwiZXhwZWN0ZWRBY3Rpb24iLCJnZXRIb3RlbHMiLCJxIiwicGFnZSIsImV4cGVjdCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic2NyZWVuIiwiZ2V0QnlUZXN0SWQiLCJ0b0JlRGVmaW5lZCIsImZvckVhY2giLCJob3RlbE5hbWUiLCJnZXRCeVRleHQiLCJuYW1lIiwiYWRkcmVzc0VsZW1lbnQiLCJzaG9ydF9hZGRyZXNzIl0sInNvdXJjZXMiOlsiaG9tZS50ZXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNvbmZpZ3VyZVN0b3JlIGZyb20gJ3JlZHV4LW1vY2stc3RvcmUnO1xuaW1wb3J0IHtcbiAgY2xlYW51cCxcbiAgZmlyZUV2ZW50LFxuICByZW5kZXIsXG4gIHNjcmVlbixcbn0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdC1uYXRpdmUnO1xuXG5pbXBvcnQgKiBhcyBldmEgZnJvbSAnQGV2YS1kZXNpZ24vZXZhJztcbmltcG9ydCB7QXBwbGljYXRpb25Qcm92aWRlcn0gZnJvbSAnQHVpLWtpdHRlbi9jb21wb25lbnRzJztcbi8vIGltcG9ydCBjb25maWd1cmVTdG9yZSBmcm9tICcuLi8uLi9yZWR1eC9zdG9yZSc7XG5pbXBvcnQgSG9tZSBmcm9tICcuLi9Ib21lJztcbmltcG9ydCB7Z2V0SG90ZWxzfSBmcm9tICcuLi8uLi9yZWR1eC9hY3Rpb25zJztcbmltcG9ydCB7UHJvdmlkZXJ9IGZyb20gJ3JlYWN0LXJlZHV4JztcbmltcG9ydCBob3RlbHNfcmVzcG9uc2UgZnJvbSAnLi9maXh0dXJlcy9ob3RlbHNfcmVzcG9uc2UnO1xuaW1wb3J0IHtOYXZpZ2F0aW9uQ29udGFpbmVyfSBmcm9tICdAcmVhY3QtbmF2aWdhdGlvbi9uYXRpdmUnO1xuaW1wb3J0IFNldHVwIGZyb20gJy4uL3NldHVwJztcblxubGV0IG1vY2tTdG9yZSA9IGNvbmZpZ3VyZVN0b3JlKCk7XG5cbmNvbnN0IG5hdmlnYXRpb24gPSB7XG4gIG5hdmlnYXRlOiBqZXN0LmZuKCksXG4gIGdvQmFjazogamVzdC5mbigpLFxufTtcblxuY29uc3Qgc3RvcmUgPSBtb2NrU3RvcmUoe1xuICBob3RlbDoge1xuICAgIGhvdGVsczogaG90ZWxzX3Jlc3BvbnNlLnJlc3VsdC5ob3RlbHMsXG4gIH0sXG59KTtcblxuLy8gY29uc3Qgc2V0dXAgPSAoTXlDb21wb25lbnQsIHN0b3JlKSA9PlxuLy8gICByZW5kZXIoXG4vLyAgICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XG4vLyAgICAgICA8QXBwbGljYXRpb25Qcm92aWRlciB7Li4uZXZhfSB0aGVtZT17ZXZhLmxpZ2h0fT5cbi8vICAgICAgICAgPE5hdmlnYXRpb25Db250YWluZXI+XG4vLyAgICAgICAgICAgey8qIDxIb21lIGhvdGVscz17aG90ZWxzX3Jlc3BvbnNlLnJlc3VsdC5ob3RlbHN9IC8+ICovfVxuLy8gICAgICAgICAgIHtNeUNvbXBvbmVudH1cbi8vICAgICAgICAgPC9OYXZpZ2F0aW9uQ29udGFpbmVyPlxuLy8gICAgICAgPC9BcHBsaWNhdGlvblByb3ZpZGVyPlxuLy8gICAgIDwvUHJvdmlkZXI+LFxuLy8gICApO1xuXG5kZXNjcmliZSgnVGVzdCBob21lcGFnZSBzY3JlZW4nLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHN0b3JlLmRpc3BhdGNoID0gamVzdC5mbigpO1xuICAgIFNldHVwKDxIb21lIGhvdGVscz17aG90ZWxzX3Jlc3BvbnNlfSAvPiwgc3RvcmUpO1xuICB9KTtcblxuICBhZnRlckVhY2goY2xlYW51cCk7XG5cbiAgaXQoJ2ZldGNoZXMgdGhlIGhvdGVscyBvbiBtb3VudCcsICgpID0+IHtcbiAgICBjb25zdCBleHBlY3RlZEFjdGlvbiA9IGdldEhvdGVscyh7cTogJycsIHBhZ2U6IDF9KTtcbiAgICBleHBlY3Qoc3RvcmUuZGlzcGF0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICBleHBlY3Qoc3RvcmUuZGlzcGF0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdGVkQWN0aW9uKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBkaXNwbGF5IHRoZSBsaXN0IG9mIGhvdGVscycsICgpID0+IHtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzZWFyY2gtYm94JykpLnRvQmVEZWZpbmVkKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVuZGVyIGEgbGlzdCBvZiBob3RlbHMnLCAoKSA9PiB7XG4gICAgY29uc3QgaG90ZWxzID0gaG90ZWxzX3Jlc3BvbnNlLnJlc3VsdC5ob3RlbHM7XG4gICAgaG90ZWxzLmZvckVhY2goaG90ZWwgPT4ge1xuICAgICAgY29uc3QgaG90ZWxOYW1lID0gc2NyZWVuLmdldEJ5VGV4dChob3RlbC5uYW1lKTtcbiAgICAgIGNvbnN0IGFkZHJlc3NFbGVtZW50ID0gc2NyZWVuLmdldEJ5VGV4dChob3RlbC5zaG9ydF9hZGRyZXNzKTtcbiAgICAgIGV4cGVjdChob3RlbE5hbWUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoYWRkcmVzc0VsZW1lbnQpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0p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