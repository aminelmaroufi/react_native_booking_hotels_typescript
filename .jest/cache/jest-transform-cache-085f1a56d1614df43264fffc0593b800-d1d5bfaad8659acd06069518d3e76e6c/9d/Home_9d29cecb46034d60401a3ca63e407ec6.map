{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_components","_FontAwesome","_interopRequireDefault","_reactRedux","_operators","_rxjs","_actions","_HotelItem","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Home","props","dispatch","useDispatch","_useSelector","useSelector","state","hotel","hotels","pages","page","_useState","useState","_useState2","_slicedToArray2","refreshing","setRefreshing","_useState3","Subject","_useState4","searchTerm","setSearchTerm","_useState5","_useState6","q","setTermText","SearchIcon","IconProps","createElement","_extends2","style","styles","searchIcon","name","size","color","useEffect","getHotels","subscription","pipe","debounceTime","subscribe","term","length","params","unsubscribe","next","_renderItem","_ref","item","HotelItem","onSelectHotel","_props$navigation","selectHotel","navigation","navigate","_handleRefresh","console","log","getMoreHotels","onLoadMore","do_search","Layout","container","Input","placeholder","accessoryRight","onChangeText","nextValue","onSubmitEditing","searchInput","FlatList","data","numColumns","keyExtractor","_id","renderItem","onEndReachedThreshold","onEndReached","onRefresh","StyleSheet","create","flex","backgroundColor","padding","paddingTop","borderRadius","marginTop","hotelRow","flexDirection","paddingBottom","borderBottomWidth","borderBottomColor","row","info","title","fontSize","fontWeight","marginRight","adress","room","price","typeStyle","alignItems","position","bottom","right","imageStyle","height","width","iconAdressStyle","_default","exports"],"sources":["Home.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {FlatList, StyleSheet} from 'react-native';\nimport {NativeStackNavigationProp} from '@react-navigation/native-stack';\nimport {Layout, Input} from '@ui-kitten/components';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {debounceTime} from 'rxjs/operators';\nimport {Subject} from 'rxjs';\nimport {getHotels, getMoreHotels, selectHotel} from '../redux/actions';\nimport {RootState} from '../redux/reducers';\nimport {IHotel} from '../models';\nimport {HotelItem} from '../components/home/HotelItem';\n\ntype Props = {\n  hotels: Array<IHotel>;\n  navigation: NativeStackNavigationProp<any>;\n};\n\nconst Home: React.FC<Props> = props => {\n  const dispatch = useDispatch();\n  const {hotels, pages, page} = useSelector((state: RootState) => state.hotel);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(() => new Subject());\n  const [q, setTermText] = useState('');\n\n  const SearchIcon = (IconProps: any) => (\n    <Icon\n      style={styles.searchIcon}\n      {...IconProps}\n      name=\"search\"\n      size={20}\n      color=\"#444\"\n    />\n  );\n\n  useEffect(() => {\n    dispatch(getHotels({q: '', page: 1}));\n  }, [dispatch]);\n\n  useEffect(() => {\n    setRefreshing(false);\n  }, [hotels]);\n\n  useEffect(() => {\n    const subscription = searchTerm\n      .pipe(debounceTime(300))\n      .subscribe((term: string) => {\n        if (term.length === 0 || term.length > 2) {\n          const params = {\n            q: term,\n            page: 1,\n          };\n          dispatch(getHotels(params));\n        }\n      });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [searchTerm]);\n\n  useEffect(() => {\n    searchTerm.next(q);\n  }, [q]);\n\n  const _renderItem = ({item}: {item: IHotel}) => {\n    return <HotelItem item={item} onSelectHotel={onSelectHotel} />;\n  };\n\n  const onSelectHotel = (item: IHotel) => {\n    dispatch(selectHotel(item));\n    props.navigation?.navigate('HotelDetails');\n  };\n\n  const _handleRefresh = () => {\n    console.log('refreshing...');\n    setRefreshing(true);\n    dispatch(getMoreHotels({q: '', page: 1}));\n  };\n\n  const onLoadMore = () => {\n    if (page < pages) {\n      dispatch(getMoreHotels({q: '', page: page + 1}));\n    }\n  };\n\n  const do_search = () => {\n    // dispatch(getHotels({q: value, page: page + 1}));\n  };\n\n  return (\n    <Layout style={styles.container}>\n      {/* <Input\n        placeholder=\"Search\"\n        icon={SearchIcon}\n        style={{backgroundColor: '#ddd', borderRadius: 100, marginTop: 5}}\n      /> */}\n      <Input\n        placeholder=\"Search hotel by name, city ....\"\n        accessoryRight={SearchIcon}\n        onChangeText={nextValue => setTermText(nextValue)}\n        onSubmitEditing={() => do_search()}\n        style={styles.searchInput}\n      />\n      {hotels.length > 0 && (\n        <FlatList\n          data={hotels}\n          numColumns={1}\n          keyExtractor={(item: IHotel) => item._id}\n          renderItem={_renderItem}\n          onEndReachedThreshold={0.7}\n          onEndReached={onLoadMore}\n          refreshing={refreshing}\n          onRefresh={_handleRefresh}\n        />\n      )}\n    </Layout>\n  );\n};\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    padding: 10,\n    paddingTop: 0,\n  },\n  searchInput: {\n    backgroundColor: '#ddd',\n    borderRadius: 100,\n    marginTop: 10,\n  },\n  searchIcon: {\n    marginTop: 60,\n  },\n  hotelRow: {\n    flexDirection: 'row',\n    padding: 10,\n    paddingBottom: 15,\n    borderBottomWidth: 3,\n    borderBottomColor: '#f4ab49',\n  },\n  row: {\n    flexDirection: 'row',\n    padding: 10,\n  },\n  info: {\n    flex: 1,\n    padding: 10,\n  },\n  title: {\n    fontSize: 16,\n    color: '#000',\n    fontWeight: 'bold',\n    marginRight: 7,\n  },\n  adress: {\n    fontSize: 14,\n    color: '#000',\n  },\n  room: {\n    fontSize: 12,\n    color: '#000',\n  },\n  price: {\n    fontSize: 17,\n    fontWeight: 'bold',\n    color: '#000',\n    marginTop: 5,\n  },\n  typeStyle: {\n    alignItems: 'flex-end',\n    position: 'absolute',\n    bottom: 5,\n    right: 10,\n  },\n  imageStyle: {\n    height: 190,\n    width: 130,\n  },\n  iconAdressStyle: {marginRight: 5, marginTop: 2},\n});\nexport default Home;\n"],"mappings":";;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,WAAA,GAAAF,OAAA;AACA,IAAAG,YAAA,GAAAC,sBAAA,CAAAJ,OAAA;AACA,IAAAK,WAAA,GAAAL,OAAA;AACA,IAAAM,UAAA,GAAAN,OAAA;AACA,IAAAO,KAAA,GAAAP,OAAA;AACA,IAAAQ,QAAA,GAAAR,OAAA;AAGA,IAAAS,UAAA,GAAAT,OAAA;AAAuD,SAAAU,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAZ,wBAAAgB,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,oBAAAA,GAAA,wBAAAA,GAAA,4BAAAE,OAAA,EAAAF,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,CAAAJ,OAAA,GAAAF,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAOvD,IAAMW,IAAqB,GAAG,SAAxBA,IAAqBA,CAAGC,KAAK,EAAI;EACrC,IAAMC,QAAQ,GAAG,IAAAC,uBAAW,GAAE;EAC9B,IAAAC,YAAA,GAA8B,IAAAC,uBAAW,EAAC,UAACC,KAAgB;MAAA,OAAKA,KAAK,CAACC,KAAK;IAAA,EAAC;IAArEC,MAAM,GAAAJ,YAAA,CAANI,MAAM;IAAEC,KAAK,GAAAL,YAAA,CAALK,KAAK;IAAEC,IAAI,GAAAN,YAAA,CAAJM,IAAI;EAC1B,IAAAC,SAAA,GAAoC,IAAAC,eAAQ,EAAC,KAAK,CAAC;IAAAC,UAAA,OAAAC,eAAA,CAAA7B,OAAA,EAAA0B,SAAA;IAA5CI,UAAU,GAAAF,UAAA;IAAEG,aAAa,GAAAH,UAAA;EAChC,IAAAI,UAAA,GAAoC,IAAAL,eAAQ,EAAC;MAAA,OAAM,IAAIM,aAAO,EAAE;IAAA,EAAC;IAAAC,UAAA,OAAAL,eAAA,CAAA7B,OAAA,EAAAgC,UAAA;IAA1DG,UAAU,GAAAD,UAAA;IAAEE,aAAa,GAAAF,UAAA;EAChC,IAAAG,UAAA,GAAyB,IAAAV,eAAQ,EAAC,EAAE,CAAC;IAAAW,UAAA,OAAAT,eAAA,CAAA7B,OAAA,EAAAqC,UAAA;IAA9BE,CAAC,GAAAD,UAAA;IAAEE,WAAW,GAAAF,UAAA;EAErB,IAAMG,UAAU,GAAG,SAAbA,UAAUA,CAAIC,SAAc;IAAA,OAChC7D,MAAA,CAAAmB,OAAA,CAAA2C,aAAA,CAACzD,YAAA,CAAAc,OAAI,MAAA4C,SAAA,CAAA5C,OAAA;MACH6C,KAAK,EAAEC,MAAM,CAACC;IAAW,GACrBL,SAAS;MACbM,IAAI,EAAC,QAAQ;MACbC,IAAI,EAAE,EAAG;MACTC,KAAK,EAAC;IAAM,GACZ;EAAA,CACH;EAED,IAAAC,gBAAS,EAAC,YAAM;IACdlC,QAAQ,CAAC,IAAAmC,kBAAS,EAAC;MAACb,CAAC,EAAE,EAAE;MAAEd,IAAI,EAAE;IAAC,CAAC,CAAC,CAAC;EACvC,CAAC,EAAE,CAACR,QAAQ,CAAC,CAAC;EAEd,IAAAkC,gBAAS,EAAC,YAAM;IACdpB,aAAa,CAAC,KAAK,CAAC;EACtB,CAAC,EAAE,CAACR,MAAM,CAAC,CAAC;EAEZ,IAAA4B,gBAAS,EAAC,YAAM;IACd,IAAME,YAAY,GAAGlB,UAAU,CAC5BmB,IAAI,CAAC,IAAAC,uBAAY,EAAC,GAAG,CAAC,CAAC,CACvBC,SAAS,CAAC,UAACC,IAAY,EAAK;MAC3B,IAAIA,IAAI,CAACC,MAAM,KAAK,CAAC,IAAID,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;QACxC,IAAMC,MAAM,GAAG;UACbpB,CAAC,EAAEkB,IAAI;UACPhC,IAAI,EAAE;QACR,CAAC;QACDR,QAAQ,CAAC,IAAAmC,kBAAS,EAACO,MAAM,CAAC,CAAC;MAC7B;IACF,CAAC,CAAC;IACJ,OAAO,YAAM;MACXN,YAAY,CAACO,WAAW,EAAE;IAC5B,CAAC;EACH,CAAC,EAAE,CAACzB,UAAU,CAAC,CAAC;EAEhB,IAAAgB,gBAAS,EAAC,YAAM;IACdhB,UAAU,CAAC0B,IAAI,CAACtB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACA,CAAC,CAAC,CAAC;EAEP,IAAMuB,WAAW,GAAG,SAAdA,WAAWA,CAAAC,IAAA,EAA+B;IAAA,IAA1BC,IAAI,GAAAD,IAAA,CAAJC,IAAI;IACxB,OAAOnF,MAAA,CAAAmB,OAAA,CAAA2C,aAAA,CAACnD,UAAA,CAAAyE,SAAS;MAACD,IAAI,EAAEA,IAAK;MAACE,aAAa,EAAEA;IAAc,EAAG;EAChE,CAAC;EAED,IAAMA,aAAa,GAAG,SAAhBA,aAAaA,CAAIF,IAAY,EAAK;IAAA,IAAAG,iBAAA;IACtClD,QAAQ,CAAC,IAAAmD,oBAAW,EAACJ,IAAI,CAAC,CAAC;IAC3B,CAAAG,iBAAA,GAAAnD,KAAK,CAACqD,UAAU,qBAAhBF,iBAAA,CAAkBG,QAAQ,CAAC,cAAc,CAAC;EAC5C,CAAC;EAED,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAA,EAAS;IAC3BC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC5B1C,aAAa,CAAC,IAAI,CAAC;IACnBd,QAAQ,CAAC,IAAAyD,sBAAa,EAAC;MAACnC,CAAC,EAAE,EAAE;MAAEd,IAAI,EAAE;IAAC,CAAC,CAAC,CAAC;EAC3C,CAAC;EAED,IAAMkD,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;IACvB,IAAIlD,IAAI,GAAGD,KAAK,EAAE;MAChBP,QAAQ,CAAC,IAAAyD,sBAAa,EAAC;QAACnC,CAAC,EAAE,EAAE;QAAEd,IAAI,EAAEA,IAAI,GAAG;MAAC,CAAC,CAAC,CAAC;IAClD;EACF,CAAC;EAED,IAAMmD,SAAS,GAAG,SAAZA,SAASA,CAAA,EAAS,CAExB,CAAC;EAED,OACE/F,MAAA,CAAAmB,OAAA,CAAA2C,aAAA,CAAC1D,WAAA,CAAA4F,MAAM;IAAChC,KAAK,EAAEC,MAAM,CAACgC;EAAU,GAM9BjG,MAAA,CAAAmB,OAAA,CAAA2C,aAAA,CAAC1D,WAAA,CAAA8F,KAAK;IACJC,WAAW,EAAC,iCAAiC;IAC7CC,cAAc,EAAExC,UAAW;IAC3ByC,YAAY,EAAE,SAAAA,aAAAC,SAAS;MAAA,OAAI3C,WAAW,CAAC2C,SAAS,CAAC;IAAA,CAAC;IAClDC,eAAe,EAAE,SAAAA,gBAAA;MAAA,OAAMR,SAAS,EAAE;IAAA,CAAC;IACnC/B,KAAK,EAAEC,MAAM,CAACuC;EAAY,EAC1B,EACD9D,MAAM,CAACmC,MAAM,GAAG,CAAC,IAChB7E,MAAA,CAAAmB,OAAA,CAAA2C,aAAA,CAAC3D,YAAA,CAAAsG,QAAQ;IACPC,IAAI,EAAEhE,MAAO;IACbiE,UAAU,EAAE,CAAE;IACdC,YAAY,EAAE,SAAAA,aAACzB,IAAY;MAAA,OAAKA,IAAI,CAAC0B,GAAG;IAAA,CAAC;IACzCC,UAAU,EAAE7B,WAAY;IACxB8B,qBAAqB,EAAE,GAAI;IAC3BC,YAAY,EAAElB,UAAW;IACzB7C,UAAU,EAAEA,UAAW;IACvBgE,SAAS,EAAEvB;EAAe,EAE7B,CACM;AAEb,CAAC;AACD,IAAMzB,MAAM,GAAGiD,uBAAU,CAACC,MAAM,CAAC;EAC/BlB,SAAS,EAAE;IACTmB,IAAI,EAAE,CAAC;IACPC,eAAe,EAAE,MAAM;IACvBC,OAAO,EAAE,EAAE;IACXC,UAAU,EAAE;EACd,CAAC;EACDf,WAAW,EAAE;IACXa,eAAe,EAAE,MAAM;IACvBG,YAAY,EAAE,GAAG;IACjBC,SAAS,EAAE;EACb,CAAC;EACDvD,UAAU,EAAE;IACVuD,SAAS,EAAE;EACb,CAAC;EACDC,QAAQ,EAAE;IACRC,aAAa,EAAE,KAAK;IACpBL,OAAO,EAAE,EAAE;IACXM,aAAa,EAAE,EAAE;IACjBC,iBAAiB,EAAE,CAAC;IACpBC,iBAAiB,EAAE;EACrB,CAAC;EACDC,GAAG,EAAE;IACHJ,aAAa,EAAE,KAAK;IACpBL,OAAO,EAAE;EACX,CAAC;EACDU,IAAI,EAAE;IACJZ,IAAI,EAAE,CAAC;IACPE,OAAO,EAAE;EACX,CAAC;EACDW,KAAK,EAAE;IACLC,QAAQ,EAAE,EAAE;IACZ7D,KAAK,EAAE,MAAM;IACb8D,UAAU,EAAE,MAAM;IAClBC,WAAW,EAAE;EACf,CAAC;EACDC,MAAM,EAAE;IACNH,QAAQ,EAAE,EAAE;IACZ7D,KAAK,EAAE;EACT,CAAC;EACDiE,IAAI,EAAE;IACJJ,QAAQ,EAAE,EAAE;IACZ7D,KAAK,EAAE;EACT,CAAC;EACDkE,KAAK,EAAE;IACLL,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE,MAAM;IAClB9D,KAAK,EAAE,MAAM;IACboD,SAAS,EAAE;EACb,CAAC;EACDe,SAAS,EAAE;IACTC,UAAU,EAAE,UAAU;IACtBC,QAAQ,EAAE,UAAU;IACpBC,MAAM,EAAE,CAAC;IACTC,KAAK,EAAE;EACT,CAAC;EACDC,UAAU,EAAE;IACVC,MAAM,EAAE,GAAG;IACXC,KAAK,EAAE;EACT,CAAC;EACDC,eAAe,EAAE;IAACZ,WAAW,EAAE,CAAC;IAAEX,SAAS,EAAE;EAAC;AAChD,CAAC,CAAC;AAAC,IAAAwB,QAAA,GACY/G,IAAI;AAAAgH,OAAA,CAAA/H,OAAA,GAAA8H,QAAA"}