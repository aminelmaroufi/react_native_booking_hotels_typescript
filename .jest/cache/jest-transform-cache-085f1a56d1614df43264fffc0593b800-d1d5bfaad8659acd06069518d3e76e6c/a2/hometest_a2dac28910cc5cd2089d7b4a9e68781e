096042046a049b754066d16b1f85de58
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _react = _interopRequireDefault(require("react"));
var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));
var _reactNative = require("@testing-library/react-native");
var eva = _interopRequireWildcard(require("@eva-design/eva"));
var _components = require("@ui-kitten/components");
var _Home = _interopRequireDefault(require("../Home"));
var _actions = require("../../redux/actions");
var _reactRedux = require("react-redux");
var _hotels_response = _interopRequireDefault(require("./fixtures/hotels_response"));
var _native = require("@react-navigation/native");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
var mockStore = (0, _reduxMockStore.default)();
var navigation = {
  navigate: jest.fn(),
  goBack: jest.fn()
};
var store = mockStore({
  hotel: {
    hotels: _hotels_response.default.result.hotels
  }
});
var setup = function setup(MyComponent, store) {
  return (0, _reactNative.render)(_react.default.createElement(_reactRedux.Provider, {
    store: store
  }, _react.default.createElement(_components.ApplicationProvider, (0, _extends2.default)({}, eva, {
    theme: eva.light
  }), _react.default.createElement(_native.NavigationContainer, null, MyComponent))));
};
describe('Test homepage screen', function () {
  beforeEach(function () {
    store.dispatch = jest.fn();
    setup(_react.default.createElement(_Home.default, {
      hotels: _hotels_response.default
    }), store);
  });
  afterEach(_reactNative.cleanup);
  it('fetches the hotels on mount', function () {
    var expectedAction = (0, _actions.getHotels)({
      q: '',
      page: 1
    });
    expect(store.dispatch).toHaveBeenCalledTimes(1);
    expect(store.dispatch).toHaveBeenCalledWith(expectedAction);
  });
  it('should display the list of hotels', function () {
    expect(_reactNative.screen.getByTestId('search-box')).toBeDefined();
  });
  it('should render a list of hotels', function () {
    var hotels = _hotels_response.default.result.hotels;
    hotels.forEach(function (hotel) {
      var hotelName = _reactNative.screen.getByText(hotel.name);
      var addressElement = _reactNative.screen.getByText(hotel.short_address);
      expect(hotelName).toBeDefined();
      expect(addressElement).toBeDefined();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWR1eE1vY2tTdG9yZSIsIl9yZWFjdE5hdGl2ZSIsImV2YSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX2NvbXBvbmVudHMiLCJfSG9tZSIsIl9hY3Rpb25zIiwiX3JlYWN0UmVkdXgiLCJfaG90ZWxzX3Jlc3BvbnNlIiwiX25hdGl2ZSIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImRlc2MiLCJzZXQiLCJtb2NrU3RvcmUiLCJjb25maWd1cmVTdG9yZSIsIm5hdmlnYXRpb24iLCJuYXZpZ2F0ZSIsImplc3QiLCJmbiIsImdvQmFjayIsInN0b3JlIiwiaG90ZWwiLCJob3RlbHMiLCJob3RlbHNfcmVzcG9uc2UiLCJyZXN1bHQiLCJzZXR1cCIsIk15Q29tcG9uZW50IiwicmVuZGVyIiwiY3JlYXRlRWxlbWVudCIsIlByb3ZpZGVyIiwiQXBwbGljYXRpb25Qcm92aWRlciIsIl9leHRlbmRzMiIsInRoZW1lIiwibGlnaHQiLCJOYXZpZ2F0aW9uQ29udGFpbmVyIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiZGlzcGF0Y2giLCJhZnRlckVhY2giLCJjbGVhbnVwIiwiaXQiLCJleHBlY3RlZEFjdGlvbiIsImdldEhvdGVscyIsInEiLCJwYWdlIiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJzY3JlZW4iLCJnZXRCeVRlc3RJZCIsInRvQmVEZWZpbmVkIiwiZm9yRWFjaCIsImhvdGVsTmFtZSIsImdldEJ5VGV4dCIsIm5hbWUiLCJhZGRyZXNzRWxlbWVudCIsInNob3J0X2FkZHJlc3MiXSwic291cmNlcyI6WyJob21lLnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY29uZmlndXJlU3RvcmUgZnJvbSAncmVkdXgtbW9jay1zdG9yZSc7XG5pbXBvcnQge1xuICBjbGVhbnVwLFxuICBmaXJlRXZlbnQsXG4gIHJlbmRlcixcbiAgc2NyZWVuLFxufSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0LW5hdGl2ZSc7XG5cbmltcG9ydCAqIGFzIGV2YSBmcm9tICdAZXZhLWRlc2lnbi9ldmEnO1xuaW1wb3J0IHtBcHBsaWNhdGlvblByb3ZpZGVyfSBmcm9tICdAdWkta2l0dGVuL2NvbXBvbmVudHMnO1xuLy8gaW1wb3J0IGNvbmZpZ3VyZVN0b3JlIGZyb20gJy4uLy4uL3JlZHV4L3N0b3JlJztcbmltcG9ydCBIb21lIGZyb20gJy4uL0hvbWUnO1xuaW1wb3J0IHtnZXRIb3RlbHN9IGZyb20gJy4uLy4uL3JlZHV4L2FjdGlvbnMnO1xuaW1wb3J0IHtQcm92aWRlcn0gZnJvbSAncmVhY3QtcmVkdXgnO1xuaW1wb3J0IGhvdGVsc19yZXNwb25zZSBmcm9tICcuL2ZpeHR1cmVzL2hvdGVsc19yZXNwb25zZSc7XG5pbXBvcnQge05hdmlnYXRpb25Db250YWluZXJ9IGZyb20gJ0ByZWFjdC1uYXZpZ2F0aW9uL25hdGl2ZSc7XG5cbmxldCBtb2NrU3RvcmUgPSBjb25maWd1cmVTdG9yZSgpO1xuXG5jb25zdCBuYXZpZ2F0aW9uID0ge1xuICBuYXZpZ2F0ZTogamVzdC5mbigpLFxuICBnb0JhY2s6IGplc3QuZm4oKSxcbn07XG5cbmNvbnN0IHN0b3JlID0gbW9ja1N0b3JlKHtcbiAgaG90ZWw6IHtcbiAgICBob3RlbHM6IGhvdGVsc19yZXNwb25zZS5yZXN1bHQuaG90ZWxzLFxuICB9LFxufSk7XG5cbmNvbnN0IHNldHVwID0gKE15Q29tcG9uZW50LCBzdG9yZSkgPT5cbiAgcmVuZGVyKFxuICAgIDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxuICAgICAgPEFwcGxpY2F0aW9uUHJvdmlkZXIgey4uLmV2YX0gdGhlbWU9e2V2YS5saWdodH0+XG4gICAgICAgIDxOYXZpZ2F0aW9uQ29udGFpbmVyPlxuICAgICAgICAgIHsvKiA8SG9tZSBob3RlbHM9e2hvdGVsc19yZXNwb25zZS5yZXN1bHQuaG90ZWxzfSAvPiAqL31cbiAgICAgICAgICB7TXlDb21wb25lbnR9XG4gICAgICAgIDwvTmF2aWdhdGlvbkNvbnRhaW5lcj5cbiAgICAgIDwvQXBwbGljYXRpb25Qcm92aWRlcj5cbiAgICA8L1Byb3ZpZGVyPixcbiAgKTtcblxuZGVzY3JpYmUoJ1Rlc3QgaG9tZXBhZ2Ugc2NyZWVuJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBzdG9yZS5kaXNwYXRjaCA9IGplc3QuZm4oKTtcbiAgICBzZXR1cCg8SG9tZSBob3RlbHM9e2hvdGVsc19yZXNwb25zZX0gLz4sIHN0b3JlKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGNsZWFudXApO1xuXG4gIGl0KCdmZXRjaGVzIHRoZSBob3RlbHMgb24gbW91bnQnLCAoKSA9PiB7XG4gICAgY29uc3QgZXhwZWN0ZWRBY3Rpb24gPSBnZXRIb3RlbHMoe3E6ICcnLCBwYWdlOiAxfSk7XG4gICAgZXhwZWN0KHN0b3JlLmRpc3BhdGNoKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgZXhwZWN0KHN0b3JlLmRpc3BhdGNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3RlZEFjdGlvbik7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgZGlzcGxheSB0aGUgbGlzdCBvZiBob3RlbHMnLCAoKSA9PiB7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnc2VhcmNoLWJveCcpKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlbmRlciBhIGxpc3Qgb2YgaG90ZWxzJywgKCkgPT4ge1xuICAgIGNvbnN0IGhvdGVscyA9IGhvdGVsc19yZXNwb25zZS5yZXN1bHQuaG90ZWxzO1xuICAgIGhvdGVscy5mb3JFYWNoKGhvdGVsID0+IHtcbiAgICAgIGNvbnN0IGhvdGVsTmFtZSA9IHNjcmVlbi5nZXRCeVRleHQoaG90ZWwubmFtZSk7XG4gICAgICBjb25zdCBhZGRyZXNzRWxlbWVudCA9IHNjcmVlbi5nZXRCeVRleHQoaG90ZWwuc2hvcnRfYWRkcmVzcyk7XG4gICAgICBleHBlY3QoaG90ZWxOYW1lKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGFkZHJlc3NFbGVtZW50KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsZUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsWUFBQSxHQUFBRixPQUFBO0FBT0EsSUFBQUcsR0FBQSxHQUFBQyx1QkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQUssV0FBQSxHQUFBTCxPQUFBO0FBRUEsSUFBQU0sS0FBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU8sUUFBQSxHQUFBUCxPQUFBO0FBQ0EsSUFBQVEsV0FBQSxHQUFBUixPQUFBO0FBQ0EsSUFBQVMsZ0JBQUEsR0FBQVYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFVLE9BQUEsR0FBQVYsT0FBQTtBQUE2RCxTQUFBVyx5QkFBQUMsV0FBQSxlQUFBQyxPQUFBLGtDQUFBQyxpQkFBQSxPQUFBRCxPQUFBLFFBQUFFLGdCQUFBLE9BQUFGLE9BQUEsWUFBQUYsd0JBQUEsWUFBQUEseUJBQUFDLFdBQUEsV0FBQUEsV0FBQSxHQUFBRyxnQkFBQSxHQUFBRCxpQkFBQSxLQUFBRixXQUFBO0FBQUEsU0FBQVIs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