{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_resolveAssetSource","_interopRequireDefault","_xml","_css","NativeModules","RNSVGRenderableManager","getRawResource","getUriFromSource","source","resolvedAssetSource","default","uri","loadLocalRawResourceDefault","fetchText","isUriAnAndroidResourceIdentifier","indexOf","loadAndroidRawResource","_regenerator","async","loadAndroidRawResource$","_context","prev","next","awrap","abrupt","sent","t0","console","error","stop","Promise","loadLocalRawResourceAndroid","loadLocalRawResource","Platform","OS","LocalSvg","props","asset","rest","_objectWithoutProperties2","_useState","useState","_useState2","_slicedToArray2","xml","setXml","useEffect","then","createElement","SvgCss","_extends2","__source","fileName","_jsxFileName","lineNumber","WithLocalSvg","load","prevProps","setState","_context2","t4","state","SvgWithCss","override","Component"],"sources":["LocalSvg.tsx"],"sourcesContent":["import React, { useState, useEffect, Component } from 'react';\nimport { NativeModules, Platform } from 'react-native';\n// @ts-ignore\nimport resolveAssetSource from 'react-native/Libraries/Image/resolveAssetSource';\n\nimport { fetchText } from './xml';\nimport { SvgCss, SvgWithCss } from './css';\n\nconst { getRawResource } = NativeModules.RNSVGRenderableManager || {};\n\nexport function getUriFromSource(source?: string | number) {\n  const resolvedAssetSource = resolveAssetSource(source);\n  return resolvedAssetSource.uri;\n}\n\nexport function loadLocalRawResourceDefault(source?: string | number) {\n  const uri = getUriFromSource(source);\n  return fetchText(uri);\n}\n\nexport function isUriAnAndroidResourceIdentifier(uri?: string | number) {\n  return typeof uri === 'string' && uri.indexOf('/') <= -1;\n}\n\nexport async function loadAndroidRawResource(uri?: string | number) {\n  try {\n    return await getRawResource(uri);\n  } catch (e) {\n    console.error(\n      'Error in RawResourceUtils while trying to natively load an Android raw resource: ',\n      e,\n    );\n    return null;\n  }\n}\n\nexport function loadLocalRawResourceAndroid(source?: string | number) {\n  const uri = getUriFromSource(source);\n  if (isUriAnAndroidResourceIdentifier(uri)) {\n    return loadAndroidRawResource(uri);\n  } else {\n    return fetchText(uri);\n  }\n}\n\nexport const loadLocalRawResource =\n  Platform.OS !== 'android'\n    ? loadLocalRawResourceDefault\n    : loadLocalRawResourceAndroid;\n\nexport type LocalProps = { asset?: string | number; override?: Object };\nexport type LocalState = { xml: string | null };\n\nexport function LocalSvg(props: LocalProps) {\n  const { asset, ...rest } = props;\n  const [xml, setXml] = useState(null);\n  useEffect(() => {\n    loadLocalRawResource(asset).then(setXml);\n  }, [asset]);\n  return <SvgCss xml={xml} {...rest} />;\n}\n\nexport class WithLocalSvg extends Component<LocalProps, LocalState> {\n  state = { xml: null };\n  componentDidMount() {\n    this.load(this.props.asset);\n  }\n  componentDidUpdate(prevProps: { asset?: string | number }) {\n    const { asset } = this.props;\n    if (asset !== prevProps.asset) {\n      this.load(asset);\n    }\n  }\n  async load(asset?: string | number) {\n    try {\n      this.setState({ xml: asset ? await loadLocalRawResource(asset) : null });\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  render() {\n    const {\n      props,\n      state: { xml },\n    } = this;\n    return <SvgWithCss xml={xml} override={props} />;\n  }\n}\n\nexport default LocalSvg;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,mBAAA,GAAAC,sBAAA,CAAAH,OAAA;AAEA,IAAAI,IAAA,GAAAJ,OAAA;AACA,IAAAK,IAAA,GAAAL,OAAA;;WAE2BC,YAAA,CAAAK,aAAA,CAAcC,sBAAd,IAAwC,E;EAA3DC,c,QAAAA,c;AAED,SAASC,gBAATA,CAA0BC,MAA1B,EAAoD;EACzD,IAAMC,mBAAmB,GAAG,IAAAT,mBAAA,CAAAU,OAAA,EAAmBF,MAAnB,CAA5B;EACA,OAAOC,mBAAmB,CAACE,GAA3B;AACD;AAEM,SAASC,2BAATA,CAAqCJ,MAArC,EAA+D;EACpE,IAAMG,GAAG,GAAGJ,gBAAgB,CAACC,MAAD,CAA5B;EACA,OAAO,IAAAN,IAAA,CAAAW,SAAA,EAAUF,GAAV,CAAP;AACD;AAEM,SAASG,gCAATA,CAA0CH,GAA1C,EAAiE;EACtE,OAAO,OAAOA,GAAP,KAAe,QAAf,IAA2BA,GAAG,CAACI,OAAJ,CAAY,GAAZ,KAAoB,CAAC,CAAvD;AACD;AAEM,SAAeC,sBAAfA,CAAsCL,GAAtC;EAAA,OAAAM,YAAA,CAAAP,OAAA,CAAAQ,KAAA,UAAAC,wBAAAC,QAAA;IAAA;MAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UAAAF,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAE,IAAA;UAAA,OAAAL,YAAA,CAAAP,OAAA,CAAAa,KAAA,CAEUjB,cAAc,CAACK,GAAD,CAFxB;QAAA;UAAA,OAAAS,QAAA,CAAAI,MAAA,WAAAJ,QAAA,CAAAK,IAAA;QAAA;UAAAL,QAAA,CAAAC,IAAA;UAAAD,QAAA,CAAAM,EAAA,GAAAN,QAAA;UAIHO,OAAO,CAACC,KAAR,CACE,mFADF,EAAAR,QAAA,CAAAM,EAAA;UAJG,OAAAN,QAAA,CAAAI,MAAA,WAQI,IARJ;QAAA;QAAA;UAAA,OAAAJ,QAAA,CAAAS,IAAA;MAAA;IAAA;EAAA,yBAAAC,OAAA;AAAA;AAYA,SAASC,2BAATA,CAAqCvB,MAArC,EAA+D;EACpE,IAAMG,GAAG,GAAGJ,gBAAgB,CAACC,MAAD,CAA5B;EACA,IAAIM,gCAAgC,CAACH,GAAD,CAApC,EAA2C;IACzC,OAAOK,sBAAsB,CAACL,GAAD,CAA7B;EACD,CAFD,MAEO;IACL,OAAO,IAAAT,IAAA,CAAAW,SAAA,EAAUF,GAAV,CAAP;EACD;AACF;AAEM,IAAMqB,oBAAoB,GAC/BjC,YAAA,CAAAkC,QAAA,CAASC,EAAT,KAAgB,SAAhB,GACItB,2BADJ,GAEImB,2BAHC;;AAQA,SAASI,QAATA,CAAkBC,KAAlB,EAAqC;EAAA,IAClCC,KADkC,GACfD,KADe,CAClCC,KADkC;IACxBC,IADwB,OAAAC,yBAAA,CAAA7B,OAAA,EACf0B,KADe;EAAA,IAAAI,SAAA,GAEpB,IAAA5C,MAAA,CAAA6C,QAAA,EAAS,IAAT,CAFoB;IAAAC,UAAA,OAAAC,eAAA,CAAAjC,OAAA,EAAA8B,SAAA;IAEnCI,GAFmC,GAAAF,UAAA;IAE9BG,MAF8B,GAAAH,UAAA;EAG1C,IAAA9C,MAAA,CAAAkD,SAAA,EAAU,YAAM;IACdd,oBAAoB,CAACK,KAAD,CAApB,CAA4BU,IAA5B,CAAiCF,MAAjC;EACD,CAFD,EAEG,CAACR,KAAD,CAFH;EAGA,OAAOzC,MAAA,CAAAc,OAAA,CAAAsC,aAAA,CAAC7C,IAAA,CAAA8C,MAAD,MAAAC,SAAA,CAAAxC,OAAA;IAAQkC,GAAG,EAAEA;EAAb,GAAsBN,IAAtB;IAAAa,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;IAAA;EAAA,GAAP;AACD;IAEYC,Y;;;;;;;;;;wFACH;MAAEX,GAAG,EAAE;IAAP,C;;;;;wCACY;MAClB,KAAKY,IAAL,CAAU,KAAKpB,KAAL,CAAWC,KAArB;IACD;;;uCACkBoB,S,EAAwC;MAAA,IACjDpB,KADiD,GACvC,KAAKD,KADkC,CACjDC,KADiD;MAEzD,IAAIA,KAAK,KAAKoB,SAAS,CAACpB,KAAxB,EAA+B;QAC7B,KAAKmB,IAAL,CAAUnB,KAAV;MACD;IACF;;;yBACUA,K;;;;;;6BAEP,I;mBAAqBA,K;;;;;gDAAcL,oBAAoB,CAACK,KAAD,C;;;;;;6BAAU,I;;;;gBAAjDO,G;;2BAAXc,Q;;;;;;cAEL/B,OAAO,CAACC,KAAR,CAAA+B,SAAA,CAAAC,EAAA;;;;;;;;;;6BAGK;MAAA,IAELxB,KAFK,GAIH,IAJG,CAELA,KAFK;QAGIQ,GAHJ,GAIH,IAJG,CAGLiB,KAHK,CAGIjB,GAHJ;MAKP,OAAOhD,MAAA,CAAAc,OAAA,CAAAsC,aAAA,CAAC7C,IAAA,CAAA2D,UAAD;QAAYlB,GAAG,EAAEA,GAAjB;QAAsBmB,QAAQ,EAAE3B,KAAhC;QAAAe,QAAA;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;QAAA;MAAA,EAAP;IACD;;;EAxB+B1D,MAAA,CAAAoE,S;;eA2BnB7B,Q"}