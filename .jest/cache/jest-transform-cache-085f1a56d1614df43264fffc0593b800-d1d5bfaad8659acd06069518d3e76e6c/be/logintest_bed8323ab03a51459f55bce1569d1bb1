43ab7ec60e43435c9ad12b7059f80c88
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var eva = _interopRequireWildcard(require("@eva-design/eva"));
var _components = require("@ui-kitten/components");
var _store = _interopRequireDefault(require("../../redux/store"));
var _Login = _interopRequireDefault(require("../Login"));
var _actions = require("../../redux/actions");
var _reactRedux = require("react-redux");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
var store = (0, _store.default)();
var email = 'test@test.com';
var password = 'Azerty123@@';
var navigation = {
  navigate: jest.fn(),
  goBack: jest.fn()
};
var setup = function setup(chlidren) {
  return (0, _reactNative.render)(_react.default.createElement(_components.ApplicationProvider, (0, _extends2.default)({}, eva, {
    theme: eva.light
  }), _react.default.createElement(_reactRedux.Provider, {
    store: store
  }, _react.default.createElement("chlidren", {
    navigation: navigation
  }))));
};
describe('Test Login Component', function () {
  beforeEach(function () {
    store.dispatch = jest.fn();
  });
  afterEach(_reactNative.cleanup);
  it('should render all form element', function () {
    setup(_Login.default);
    expect(_reactNative.screen.getByTestId('logo')).toBeDefined();
    expect(_reactNative.screen.getByTestId('email')).toBeDefined();
    expect(_reactNative.screen.getByTestId('password')).toBeDefined();
    var loginBtn = _reactNative.screen.getByTestId('login-btn');
    expect(loginBtn).toBeDefined();
  });
  it('should enable login button after entereing valid email and password value', function () {
    setup(_Login.default);
    var emailInput = _reactNative.screen.getByTestId('email');
    var passwordInput = _reactNative.screen.getByTestId('password');
    var loginBtn = _reactNative.screen.getByTestId('login-btn');
    expect(loginBtn.props.accessibilityState).toHaveProperty('disabled', true);
    _reactNative.fireEvent.changeText(emailInput, email);
    _reactNative.fireEvent.changeText(passwordInput, password);
    expect(loginBtn.props.accessibilityState).toHaveProperty('disabled', false);
    _reactNative.fireEvent.press(loginBtn);
    expect(store.dispatch).toHaveBeenCalledTimes(1);
    expect(store.dispatch).toHaveBeenCalledWith((0, _actions.loginRequest)(email, password, navigation));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdE5hdGl2ZSIsImV2YSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX2NvbXBvbmVudHMiLCJfc3RvcmUiLCJfTG9naW4iLCJfYWN0aW9ucyIsIl9yZWFjdFJlZHV4IiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwibm9kZUludGVyb3AiLCJXZWFrTWFwIiwiY2FjaGVCYWJlbEludGVyb3AiLCJjYWNoZU5vZGVJbnRlcm9wIiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJjYWNoZSIsImhhcyIsImdldCIsIm5ld09iaiIsImhhc1Byb3BlcnR5RGVzY3JpcHRvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwia2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZGVzYyIsInNldCIsInN0b3JlIiwiY29uZmlndXJlU3RvcmUiLCJlbWFpbCIsInBhc3N3b3JkIiwibmF2aWdhdGlvbiIsIm5hdmlnYXRlIiwiamVzdCIsImZuIiwiZ29CYWNrIiwic2V0dXAiLCJjaGxpZHJlbiIsInJlbmRlciIsImNyZWF0ZUVsZW1lbnQiLCJBcHBsaWNhdGlvblByb3ZpZGVyIiwiX2V4dGVuZHMyIiwidGhlbWUiLCJsaWdodCIsIlByb3ZpZGVyIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiZGlzcGF0Y2giLCJhZnRlckVhY2giLCJjbGVhbnVwIiwiaXQiLCJMb2dpbiIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGVzdElkIiwidG9CZURlZmluZWQiLCJsb2dpbkJ0biIsImVtYWlsSW5wdXQiLCJwYXNzd29yZElucHV0IiwicHJvcHMiLCJhY2Nlc3NpYmlsaXR5U3RhdGUiLCJ0b0hhdmVQcm9wZXJ0eSIsImZpcmVFdmVudCIsImNoYW5nZVRleHQiLCJwcmVzcyIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibG9naW5SZXF1ZXN0Il0sInNvdXJjZXMiOlsibG9naW4udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7XG4gIGNsZWFudXAsXG4gIGZpcmVFdmVudCxcbiAgcmVuZGVyLFxuICBzY3JlZW4sXG59IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QtbmF0aXZlJztcblxuaW1wb3J0ICogYXMgZXZhIGZyb20gJ0BldmEtZGVzaWduL2V2YSc7XG5pbXBvcnQge0FwcGxpY2F0aW9uUHJvdmlkZXJ9IGZyb20gJ0B1aS1raXR0ZW4vY29tcG9uZW50cyc7XG5pbXBvcnQgY29uZmlndXJlU3RvcmUgZnJvbSAnLi4vLi4vcmVkdXgvc3RvcmUnO1xuaW1wb3J0IExvZ2luIGZyb20gJy4uL0xvZ2luJztcbmltcG9ydCB7bG9naW5SZXF1ZXN0fSBmcm9tICcuLi8uLi9yZWR1eC9hY3Rpb25zJztcbmltcG9ydCB7UHJvdmlkZXJ9IGZyb20gJ3JlYWN0LXJlZHV4JztcblxubGV0IHN0b3JlID0gY29uZmlndXJlU3RvcmUoKTtcblxuY29uc3QgZW1haWwgPSAndGVzdEB0ZXN0LmNvbSc7XG5jb25zdCBwYXNzd29yZCA9ICdBemVydHkxMjNAQCc7XG5cbmNvbnN0IG5hdmlnYXRpb24gPSB7XG4gIG5hdmlnYXRlOiBqZXN0LmZuKCksXG4gIGdvQmFjazogamVzdC5mbigpLFxufTtcbmNvbnN0IHNldHVwID0gY2hsaWRyZW4gPT5cbiAgcmVuZGVyKFxuICAgIDxBcHBsaWNhdGlvblByb3ZpZGVyIHsuLi5ldmF9IHRoZW1lPXtldmEubGlnaHR9PlxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XG4gICAgICAgIDxjaGxpZHJlbiBuYXZpZ2F0aW9uPXtuYXZpZ2F0aW9ufSAvPlxuICAgICAgPC9Qcm92aWRlcj5cbiAgICA8L0FwcGxpY2F0aW9uUHJvdmlkZXI+LFxuICApO1xuXG5kZXNjcmliZSgnVGVzdCBMb2dpbiBDb21wb25lbnQnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHN0b3JlLmRpc3BhdGNoID0gamVzdC5mbigpO1xuICB9KTtcblxuICBhZnRlckVhY2goY2xlYW51cCk7XG5cbiAgaXQoJ3Nob3VsZCByZW5kZXIgYWxsIGZvcm0gZWxlbWVudCcsICgpID0+IHtcbiAgICBzZXR1cChMb2dpbik7XG5cbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdsb2dvJykpLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnZW1haWwnKSkudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdwYXNzd29yZCcpKS50b0JlRGVmaW5lZCgpO1xuXG4gICAgY29uc3QgbG9naW5CdG4gPSBzY3JlZW4uZ2V0QnlUZXN0SWQoJ2xvZ2luLWJ0bicpO1xuXG4gICAgZXhwZWN0KGxvZ2luQnRuKS50b0JlRGVmaW5lZCgpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGVuYWJsZSBsb2dpbiBidXR0b24gYWZ0ZXIgZW50ZXJlaW5nIHZhbGlkIGVtYWlsIGFuZCBwYXNzd29yZCB2YWx1ZScsICgpID0+IHtcbiAgICBzZXR1cChMb2dpbik7XG4gICAgY29uc3QgZW1haWxJbnB1dCA9IHNjcmVlbi5nZXRCeVRlc3RJZCgnZW1haWwnKTtcbiAgICBjb25zdCBwYXNzd29yZElucHV0ID0gc2NyZWVuLmdldEJ5VGVzdElkKCdwYXNzd29yZCcpO1xuICAgIGNvbnN0IGxvZ2luQnRuID0gc2NyZWVuLmdldEJ5VGVzdElkKCdsb2dpbi1idG4nKTtcblxuICAgIGV4cGVjdChsb2dpbkJ0bi5wcm9wcy5hY2Nlc3NpYmlsaXR5U3RhdGUpLnRvSGF2ZVByb3BlcnR5KCdkaXNhYmxlZCcsIHRydWUpO1xuXG4gICAgZmlyZUV2ZW50LmNoYW5nZVRleHQoZW1haWxJbnB1dCwgZW1haWwpO1xuICAgIGZpcmVFdmVudC5jaGFuZ2VUZXh0KHBhc3N3b3JkSW5wdXQsIHBhc3N3b3JkKTtcblxuICAgIGV4cGVjdChsb2dpbkJ0bi5wcm9wcy5hY2Nlc3NpYmlsaXR5U3RhdGUpLnRvSGF2ZVByb3BlcnR5KCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICBmaXJlRXZlbnQucHJlc3MobG9naW5CdG4pO1xuICAgIGV4cGVjdChzdG9yZS5kaXNwYXRjaCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIGV4cGVjdChzdG9yZS5kaXNwYXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICBsb2dpblJlcXVlc3QoZW1haWwsIHBhc3N3b3JkLCBuYXZpZ2F0aW9uKSxcbiAgICApO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBRCxPQUFBO0FBT0EsSUFBQUUsR0FBQSxHQUFBQyx1QkFBQSxDQUFBSCxPQUFBO0FBQ0EsSUFBQUksV0FBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssTUFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU0sTUFBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU8sUUFBQSxHQUFBUCxPQUFBO0FBQ0EsSUFBQVEsV0FBQSxHQUFBUixPQUFBO0FBQXFDLFNBQUFTLHlCQUFBQyxXQUFBLGVBQUFDLE9BQUEsa0NBQUFDLGlCQUFBLE9BQUFELE9BQUEsUUFBQUUsZ0JBQUEsT0FBQUYsT0FBQSxZQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsV0FBQSxXQUFBQSxXQUFBLEdBQUFHLGdCQUFBLEdBQUFELGlCQUFBLEtBQUFGLFdBQUE7QUFBQSxTQUFBUCx3QkFBQVcsR0FBQSxFQUFBSixXQUFBLFNBQUFBLFdBQUEsSUFBQUksR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsV0FBQUQsR0FBQSxRQUFBQSxHQUFBLG9CQUFBQSxHQUFBLHdCQUFBQSxHQUFBLDRCQUFBRSxPQUFBLEVBQUFGLEdB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