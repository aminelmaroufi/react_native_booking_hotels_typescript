0d57ef6b9679a481f79c67035bc14ae2
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _react = _interopRequireDefault(require("react"));
var _deepmerge = _interopRequireDefault(require("deepmerge"));
var _hoistNonReactStatics = _interopRequireDefault(require("hoist-non-react-statics"));
var _ThemeProvider = require("./ThemeProvider");
var _theme = _interopRequireDefault(require("./theme"));
var _jsxRuntime = require("react/jsx-runtime");
var __rest = this && this.__rest || function (s, e) {
  var t = {};
  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];
  if (s != null && typeof Object.getOwnPropertySymbols === "function") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];
  }
  return t;
};
var isClassComponent = function isClassComponent(Component) {
  return Boolean(Component.prototype && Component.prototype.isReactComponent);
};
var ThemedComponent = function ThemedComponent(WrappedComponent, themeKey, displayName) {
  return (0, _extends2.default)(function (props, forwardedRef) {
    var _children = props.children,
      rest = __rest(props, ["children"]);
    return (0, _jsxRuntime.jsx)(_ThemeProvider.ThemeConsumer, {
      children: function children(context) {
        if (!context) {
          var _newProps = (0, _extends2.default)((0, _extends2.default)({}, rest), {
            theme: _theme.default,
            children: _children
          });
          return isClassComponent(WrappedComponent) ? (0, _jsxRuntime.jsx)(WrappedComponent, (0, _extends2.default)({
            ref: forwardedRef
          }, _newProps)) : (0, _jsxRuntime.jsx)(WrappedComponent, (0, _extends2.default)({}, _newProps));
        }
        var theme = context.theme,
          updateTheme = context.updateTheme,
          replaceTheme = context.replaceTheme;
        var newProps = (0, _extends2.default)((0, _extends2.default)({
          theme: theme,
          updateTheme: updateTheme,
          replaceTheme: replaceTheme
        }, (0, _deepmerge.default)(themeKey && theme[themeKey] || {}, rest, {
          clone: false
        })), {
          children: _children
        });
        if (isClassComponent(WrappedComponent)) {
          return (0, _jsxRuntime.jsx)(WrappedComponent, (0, _extends2.default)({
            ref: forwardedRef
          }, newProps));
        }
        return (0, _jsxRuntime.jsx)(WrappedComponent, (0, _extends2.default)({}, newProps));
      }
    });
  }, {
    displayName: displayName
  });
};
function withTheme(WrappedComponent, themeKey) {
  var name = themeKey ? "Themed." + themeKey : "Themed." + (WrappedComponent.displayName || WrappedComponent.name || 'Component');
  var Component = ThemedComponent(WrappedComponent, themeKey, name);
  if (isClassComponent(WrappedComponent)) {
    return (0, _hoistNonReactStatics.default)(_react.default.forwardRef(Component), WrappedComponent);
  }
  return Component;
}
var _default = withTheme;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9kZWVwbWVyZ2UiLCJfaG9pc3ROb25SZWFjdFN0YXRpY3MiLCJfVGhlbWVQcm92aWRlciIsIl90aGVtZSIsIl9qc3hSdW50aW1lIiwiX19yZXN0IiwicyIsImUiLCJ0IiwicCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJpIiwibGVuZ3RoIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJpc0NsYXNzQ29tcG9uZW50IiwiQ29tcG9uZW50IiwiQm9vbGVhbiIsImlzUmVhY3RDb21wb25lbnQiLCJUaGVtZWRDb21wb25lbnQiLCJXcmFwcGVkQ29tcG9uZW50IiwidGhlbWVLZXkiLCJkaXNwbGF5TmFtZSIsIl9leHRlbmRzMiIsImRlZmF1bHQiLCJwcm9wcyIsImZvcndhcmRlZFJlZiIsImNoaWxkcmVuIiwicmVzdCIsImpzeCIsIlRoZW1lQ29uc3VtZXIiLCJjb250ZXh0IiwibmV3UHJvcHMiLCJ0aGVtZSIsIkRlZmF1bHRUaGVtZSIsInJlZiIsInVwZGF0ZVRoZW1lIiwicmVwbGFjZVRoZW1lIiwiZGVlcG1lcmdlIiwiY2xvbmUiLCJ3aXRoVGhlbWUiLCJuYW1lIiwiaG9pc3ROb25SZWFjdFN0YXRpY3MiLCJSZWFjdCIsImZvcndhcmRSZWYiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ3aXRoVGhlbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICAgIHRbcF0gPSBzW3BdO1xuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHQ7XG59O1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBkZWVwbWVyZ2UgZnJvbSAnZGVlcG1lcmdlJztcbmltcG9ydCBob2lzdE5vblJlYWN0U3RhdGljcyBmcm9tICdob2lzdC1ub24tcmVhY3Qtc3RhdGljcyc7XG5pbXBvcnQgeyBUaGVtZUNvbnN1bWVyIH0gZnJvbSAnLi9UaGVtZVByb3ZpZGVyJztcbmltcG9ydCBEZWZhdWx0VGhlbWUgZnJvbSAnLi90aGVtZSc7XG5jb25zdCBpc0NsYXNzQ29tcG9uZW50ID0gKENvbXBvbmVudCkgPT4gQm9vbGVhbihDb21wb25lbnQucHJvdG90eXBlICYmIENvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCk7XG5jb25zdCBUaGVtZWRDb21wb25lbnQgPSAoV3JhcHBlZENvbXBvbmVudCwgdGhlbWVLZXksIGRpc3BsYXlOYW1lKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oKHByb3BzLCBmb3J3YXJkZWRSZWYpID0+IHtcbiAgICAgICAgY29uc3QgeyBjaGlsZHJlbiB9ID0gcHJvcHMsIHJlc3QgPSBfX3Jlc3QocHJvcHMsIFtcImNoaWxkcmVuXCJdKTtcbiAgICAgICAgcmV0dXJuICg8VGhlbWVDb25zdW1lcj5cbiAgICAgICAgICB7KGNvbnRleHQpID0+IHtcbiAgICAgICAgICAgIC8vIElmIHVzZXIgaXNuJ3QgdXNpbmcgVGhlbWVQcm92aWRlclxuICAgICAgICAgICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UHJvcHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3QpLCB7IHRoZW1lOiBEZWZhdWx0VGhlbWUsIGNoaWxkcmVuIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc0NsYXNzQ29tcG9uZW50KFdyYXBwZWRDb21wb25lbnQpID8gKDxXcmFwcGVkQ29tcG9uZW50IHJlZj17Zm9yd2FyZGVkUmVmfSB7Li4ubmV3UHJvcHN9Lz4pIDogKDxXcmFwcGVkQ29tcG9uZW50IHsuLi5uZXdQcm9wc30vPik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IHRoZW1lLCB1cGRhdGVUaGVtZSwgcmVwbGFjZVRoZW1lIH0gPSBjb250ZXh0O1xuICAgICAgICAgICAgY29uc3QgbmV3UHJvcHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyB0aGVtZSxcbiAgICAgICAgICAgICAgICB1cGRhdGVUaGVtZSxcbiAgICAgICAgICAgICAgICByZXBsYWNlVGhlbWUgfSwgZGVlcG1lcmdlKCh0aGVtZUtleSAmJlxuICAgICAgICAgICAgICAgIHRoZW1lW3RoZW1lS2V5XSkgfHxcbiAgICAgICAgICAgICAgICB7fSwgcmVzdCwge1xuICAgICAgICAgICAgICAgIGNsb25lOiBmYWxzZSxcbiAgICAgICAgICAgIH0pKSwgeyBjaGlsZHJlbiB9KTtcbiAgICAgICAgICAgIGlmIChpc0NsYXNzQ29tcG9uZW50KFdyYXBwZWRDb21wb25lbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDxXcmFwcGVkQ29tcG9uZW50IHJlZj17Zm9yd2FyZGVkUmVmfSB7Li4ubmV3UHJvcHN9Lz47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gPFdyYXBwZWRDb21wb25lbnQgey4uLm5ld1Byb3BzfS8+O1xuICAgICAgICB9fVxuICAgICAgICA8L1RoZW1lQ29uc3VtZXI+KTtcbiAgICB9LCB7IGRpc3BsYXlOYW1lOiBkaXNwbGF5TmFtZSB9KTtcbn07XG5mdW5jdGlvbiB3aXRoVGhlbWUoV3JhcHBlZENvbXBvbmVudCwgdGhlbWVLZXkpIHtcbiAgICBjb25zdCBuYW1lID0gdGhlbWVLZXlcbiAgICAgICAgPyBgVGhlbWVkLiR7dGhlbWVLZXl9YFxuICAgICAgICA6IGBUaGVtZWQuJHtXcmFwcGVkQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IFdyYXBwZWRDb21wb25lbnQubmFtZSB8fCAnQ29tcG9uZW50J31gO1xuICAgIGNvbnN0IENvbXBvbmVudCA9IFRoZW1lZENvbXBvbmVudChXcmFwcGVkQ29tcG9uZW50LCB0aGVtZUtleSwgbmFtZSk7XG4gICAgaWYgKGlzQ2xhc3NDb21wb25lbnQoV3JhcHBlZENvbXBvbmVudCkpIHtcbiAgICAgICAgcmV0dXJuIGhvaXN0Tm9uUmVhY3RTdGF0aWNzKFJlYWN0LmZvcndhcmRSZWYoQ29tcG9uZW50KSwgV3JhcHBlZENvbXBvbmVudCk7XG4gICAgfVxuICAgIHJldHVybiBDb21wb25lbnQ7XG59XG5leHBvcnQgZGVmYXVsdCB3aXRoVGhlbWU7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQVdBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLHFCQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxjQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxNQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFBbUMsSUFBQUssV0FBQSxHQUFBTCxPQUFBO0FBZm5DLElBQUlNLE1BQU0sR0FBSSxJQUFJLElBQUksSUFBSSxDQUFDQSxNQUFNLElBQUssVUFBVUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUU7RUFDbEQsSUFBSUMsQ0FBQyxH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