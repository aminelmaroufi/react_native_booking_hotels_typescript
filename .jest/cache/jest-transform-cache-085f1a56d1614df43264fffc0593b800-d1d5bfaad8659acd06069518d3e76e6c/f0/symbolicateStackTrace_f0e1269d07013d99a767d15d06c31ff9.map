{"version":3,"names":["_interopRequireDefault","require","_regenerator","getDevServer","symbolicateStackTrace","stack","_global$fetch","devServer","fetch","response","default","async","symbolicateStackTrace$","_context","prev","next","bundleLoadedFromServer","Error","global","awrap","url","method","body","JSON","stringify","sent","json","abrupt","stop","Promise","module","exports"],"sources":["symbolicateStackTrace.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow strict\n */\n\n'use strict';\n\nconst getDevServer = require('./getDevServer');\n\nimport type {StackFrame} from '../NativeExceptionsManager';\n\nexport type CodeFrame = $ReadOnly<{\n  content: string,\n  location: ?{\n    row: number,\n    column: number,\n    ...\n  },\n  fileName: string,\n}>;\n\nexport type SymbolicatedStackTrace = $ReadOnly<{\n  stack: Array<StackFrame>,\n  codeFrame: ?CodeFrame,\n}>;\n\nasync function symbolicateStackTrace(\n  stack: Array<StackFrame>,\n): Promise<SymbolicatedStackTrace> {\n  const devServer = getDevServer();\n  if (!devServer.bundleLoadedFromServer) {\n    throw new Error('Bundle was not loaded from Metro.');\n  }\n\n  // Lazy-load `fetch` until the first symbolication call to avoid circular requires.\n  const fetch = global.fetch ?? require('../../Network/fetch');\n  const response = await fetch(devServer.url + 'symbolicate', {\n    method: 'POST',\n    body: JSON.stringify({stack}),\n  });\n  return await response.json();\n}\n\nmodule.exports = symbolicateStackTrace;\n"],"mappings":"AAUA,YAAY;;AAAC,IAAAA,sBAAA,GAAAC,OAAA;AAAA,IAAAC,YAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEb,IAAME,YAAY,GAAGF,OAAO,CAAC,gBAAgB,CAAC;AAmB9C,SAAeG,qBAAqBA,CAClCC,KAAwB;EAAA,IAAAC,aAAA;EAAA,IAAAC,SAAA,EAAAC,KAAA,EAAAC,QAAA;EAAA,OAAAP,YAAA,CAAAQ,OAAA,CAAAC,KAAA,UAAAC,uBAAAC,QAAA;IAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;MAAA;QAElBR,SAAS,GAAGJ,YAAY,EAAE;QAAA,IAC3BI,SAAS,CAACS,sBAAsB;UAAAH,QAAA,CAAAE,IAAA;UAAA;QAAA;QAAA,MAC7B,IAAIE,KAAK,CAAC,mCAAmC,CAAC;MAAA;QAIhDT,KAAK,IAAAF,aAAA,GAAGY,MAAM,CAACV,KAAK,YAAAF,aAAA,GAAIL,OAAO,CAAC,qBAAqB,CAAC;QAAAY,QAAA,CAAAE,IAAA;QAAA,OAAAb,YAAA,CAAAQ,OAAA,CAAAS,KAAA,CACrCX,KAAK,CAACD,SAAS,CAACa,GAAG,GAAG,aAAa,EAAE;UAC1DC,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAACnB,KAAK,EAALA;UAAK,CAAC;QAC9B,CAAC,CAAC;MAAA;QAHII,QAAQ,GAAAI,QAAA,CAAAY,IAAA;QAAAZ,QAAA,CAAAE,IAAA;QAAA,OAAAb,YAAA,CAAAQ,OAAA,CAAAS,KAAA,CAIDV,QAAQ,CAACiB,IAAI,EAAE;MAAA;QAAA,OAAAb,QAAA,CAAAc,MAAA,WAAAd,QAAA,CAAAY,IAAA;MAAA;MAAA;QAAA,OAAAZ,QAAA,CAAAe,IAAA;IAAA;EAAA,qBAAAC,OAAA;AAAA;AAG9BC,MAAM,CAACC,OAAO,GAAG3B,qBAAqB"}