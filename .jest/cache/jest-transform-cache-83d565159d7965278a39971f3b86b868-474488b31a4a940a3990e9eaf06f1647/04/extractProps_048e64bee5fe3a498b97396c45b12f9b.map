{"version":3,"names":["_extractFill","_interopRequireDefault","require","_extractStroke","_extractTransform","_extractResponder","_extractOpacity","_util","clipRules","evenodd","nonzero","propsAndStyles","props","style","_extends2","default","Array","isArray","Object","assign","apply","concat","_toConsumableArray2","getMarker","marker","undefined","matched","match","idPattern","extractProps","ref","id","opacity","onLayout","clipPath","clipRule","display","mask","_props$markerStart","markerStart","_props$markerMid","markerMid","_props$markerEnd","markerEnd","transform","extracted","inherited","length","propList","transformProps","props2transform","matrix","transformToMatrix","name","String","console","warn","_matched","extract","instance","withoutXY","x","y"],"sources":["extractProps.ts"],"sourcesContent":["import extractFill from './extractFill';\nimport extractStroke from './extractStroke';\nimport { props2transform, transformToMatrix } from './extractTransform';\nimport extractResponder from './extractResponder';\nimport extractOpacity from './extractOpacity';\nimport { idPattern } from '../util';\nimport {\n  ClipProps,\n  extractedProps,\n  FillProps,\n  NumberProp,\n  ResponderProps,\n  StrokeProps,\n  TransformProps,\n} from './types';\n\nconst clipRules: { evenodd: number; nonzero: number } = {\n  evenodd: 0,\n  nonzero: 1,\n};\n\nexport function propsAndStyles(props: Object & { style?: [] | {} }) {\n  const { style } = props;\n  return !style\n    ? props\n    : {\n        ...(Array.isArray(style) ? Object.assign({}, ...style) : style),\n        ...props,\n      };\n}\n\nfunction getMarker(marker?: string) {\n  if (!marker) {\n    return undefined;\n  }\n  const matched = marker.match(idPattern);\n  return matched ? matched[1] : undefined;\n}\n\nexport default function extractProps(\n  props: {\n    id?: string;\n    mask?: string;\n    marker?: string;\n    markerStart?: string;\n    markerMid?: string;\n    markerEnd?: string;\n    clipPath?: string;\n    display?: string;\n    opacity?: NumberProp;\n    onLayout?: () => void;\n    transform?: number[] | string | TransformProps;\n  } & TransformProps &\n    ResponderProps &\n    StrokeProps &\n    FillProps &\n    ClipProps,\n  ref: Object,\n) {\n  const {\n    id,\n    opacity,\n    onLayout,\n    clipPath,\n    clipRule,\n    display,\n    mask,\n    marker,\n    markerStart = marker,\n    markerMid = marker,\n    markerEnd = marker,\n    transform,\n  } = props;\n  const extracted: extractedProps = {};\n\n  const inherited: string[] = [];\n  extractResponder(extracted, props, ref);\n  extractFill(extracted, props, inherited);\n  extractStroke(extracted, props, inherited);\n\n  if (inherited.length) {\n    extracted.propList = inherited;\n  }\n\n  const transformProps = props2transform(props);\n  const matrix = transformToMatrix(transformProps, transform);\n  if (matrix !== null) {\n    extracted.matrix = matrix;\n  }\n\n  if (opacity != null) {\n    extracted.opacity = extractOpacity(opacity);\n  }\n\n  if (display != null) {\n    extracted.display = display === 'none' ? 'none' : undefined;\n  }\n\n  if (onLayout) {\n    extracted.onLayout = onLayout;\n  }\n\n  if (markerStart) {\n    extracted.markerStart = getMarker(markerStart);\n  }\n  if (markerMid) {\n    extracted.markerMid = getMarker(markerMid);\n  }\n  if (markerEnd) {\n    extracted.markerEnd = getMarker(markerEnd);\n  }\n\n  if (id) {\n    extracted.name = String(id);\n  }\n\n  if (clipRule) {\n    extracted.clipRule = clipRules[clipRule] === 0 ? 0 : 1;\n  }\n  if (clipPath) {\n    const matched = clipPath.match(idPattern);\n    if (matched) {\n      extracted.clipPath = matched[1];\n    } else {\n      console.warn(\n        'Invalid `clipPath` prop, expected a clipPath like \"#id\", but got: \"' +\n          clipPath +\n          '\"',\n      );\n    }\n  }\n\n  if (mask) {\n    const matched = mask.match(idPattern);\n\n    if (matched) {\n      extracted.mask = matched[1];\n    } else {\n      console.warn(\n        'Invalid `mask` prop, expected a mask like \"#id\", but got: \"' +\n          mask +\n          '\"',\n      );\n    }\n  }\n\n  return extracted;\n}\n\nexport function extract(instance: Object, props: Object & { style?: [] | {} }) {\n  return extractProps(propsAndStyles(props), instance);\n}\n\nexport function withoutXY(\n  instance: Object,\n  props: Object & { style?: [] | {} },\n) {\n  return extractProps({ ...propsAndStyles(props), x: null, y: null }, instance);\n}\n"],"mappings":"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"}