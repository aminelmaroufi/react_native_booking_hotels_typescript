531d7a0681cc749140f75857918a6394
"use strict";

var __importDefault = void 0 && (void 0).__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.login = exports.saveAccount = exports.checkUser = void 0;
var adapter_1 = __importDefault(require("../utils/adapter"));
var checkUser = function checkUser() {
  return adapter_1.default.get('/me').catch(function (err) {
    var error;
    if (typeof err === 'string') {
      error.message = err;
    } else {
      error = err.response.data.message ? err.response.data : err.response.data.result;
    }
    return Promise.reject(error);
  });
};
exports.checkUser = checkUser;
var saveAccount = function saveAccount(user) {
  user.cards = [];
  return adapter_1.default.post('/auth/signup', user).catch(function (err) {
    var error;
    if (typeof err === 'string') {
      error.message = err;
    } else {
      error = err.response.data.message ? err.response.data : err.response.data.result;
    }
    return Promise.reject(error);
  });
};
exports.saveAccount = saveAccount;
var login = function login(email, password) {
  var payload = {
    username: email,
    password: password
  };
  return adapter_1.default.post('/auth/signin?scope=customer', payload).catch(function (err) {
    var error;
    if (typeof err === 'string') {
      error.message = err;
    } else {
      error = err.response.data.message ? err.response.data : err.response.data.result;
    }
    return Promise.reject(error);
  });
};
exports.login = login;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhZGFwdGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiY2hlY2tVc2VyIiwiZGVmYXVsdCIsImdldCIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJtZXNzYWdlIiwicmVzcG9uc2UiLCJkYXRhIiwicmVzdWx0IiwiUHJvbWlzZSIsInJlamVjdCIsImV4cG9ydHMiLCJzYXZlQWNjb3VudCIsInVzZXIiLCJjYXJkcyIsInBvc3QiLCJsb2dpbiIsImVtYWlsIiwicGFzc3dvcmQiLCJwYXlsb2FkIiwidXNlcm5hbWUiXSwic291cmNlcyI6WyIvVXNlcnMvQW1pbmUvRGVza3RvcC9wcm9qZWN0cy9Cb29raW5nSG90ZWxzQXBwL3NyYy9hcGkvYXV0aC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFkYXB0ZXIgZnJvbSAnLi4vdXRpbHMvYWRhcHRlcic7XG5pbXBvcnQge0lVc2VyfSBmcm9tICcuLi9tb2RlbHMnO1xuXG5leHBvcnQgY29uc3QgY2hlY2tVc2VyID0gKCkgPT4ge1xuICByZXR1cm4gYWRhcHRlci5nZXQoJy9tZScpLmNhdGNoKGVyciA9PiB7XG4gICAgbGV0IGVycm9yOiBhbnk7XG4gICAgaWYgKHR5cGVvZiBlcnIgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlcnJvci5tZXNzYWdlID0gZXJyO1xuICAgIH0gZWxzZSB7XG4gICAgICBlcnJvciA9IGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2VcbiAgICAgICAgPyBlcnIucmVzcG9uc2UuZGF0YVxuICAgICAgICA6IGVyci5yZXNwb25zZS5kYXRhLnJlc3VsdDtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2F2ZUFjY291bnQgPSAodXNlcjogSVVzZXIpID0+IHtcbiAgdXNlci5jYXJkcyA9IFtdO1xuICByZXR1cm4gYWRhcHRlci5wb3N0KCcvYXV0aC9zaWdudXAnLCB1c2VyKS5jYXRjaChlcnIgPT4ge1xuICAgIGxldCBlcnJvcjogYW55O1xuICAgIGlmICh0eXBlb2YgZXJyID09PSAnc3RyaW5nJykge1xuICAgICAgZXJyb3IubWVzc2FnZSA9IGVycjtcbiAgICB9IGVsc2Uge1xuICAgICAgZXJyb3IgPSBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlXG4gICAgICAgID8gZXJyLnJlc3BvbnNlLmRhdGFcbiAgICAgICAgOiBlcnIucmVzcG9uc2UuZGF0YS5yZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGxvZ2luID0gKGVtYWlsOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICB1c2VybmFtZTogZW1haWwsXG4gICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICB9O1xuICByZXR1cm4gYWRhcHRlci5wb3N0KCcvYXV0aC9zaWduaW4/c2NvcGU9Y3VzdG9tZXInLCBwYXlsb2FkKS5jYXRjaChlcnIgPT4ge1xuICAgIGxldCBlcnJvcjogYW55O1xuICAgIGlmICh0eXBlb2YgZXJyID09PSAnc3RyaW5nJykge1xuICAgICAgZXJyb3IubWVzc2FnZSA9IGVycjtcbiAgICB9IGVsc2Uge1xuICAgICAgZXJyb3IgPSBlcnIucmVzcG9uc2UuZGF0YS5tZXNzYWdlXG4gICAgICAgID8gZXJyLnJlc3BvbnNlLmRhdGFcbiAgICAgICAgOiBlcnIucmVzcG9uc2UuZGF0YS5yZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gIH0pO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxTQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUdPLElBQU1DLFNBQVMsR0FBRyxTQUFaQSxTQUFTQSxDQUFBLEVBQVE7RUFDNUIsT0FBT0gsU0FBQSxDQUFBSSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLFVBQUFDLEdBQUcsRUFBRztJQUNwQyxJQUFJQyxLQUFVO0lBQ2QsSUFBSSxPQUFPRCxHQUFHLEtBQUssUUFBUSxFQUFFO01BQzNCQyxLQUFLLENBQUNDLE9BQU8sR0FBR0YsR0FBRztLQUNwQixNQUFNO01BQ0xDLEtBQUssR0FBR0QsR0FBRyxDQUFDRyxRQUFRLENBQUNDLElBQUksQ0FBQ0YsT0FBTyxHQUM3QkYsR0FBRyxDQUFDRyxRQUFRLENBQUNDLElBQUksR0FDakJKLEdBQUcsQ0FBQ0csUUFBUSxDQUFDQyxJQUFJLENBQUNDLE1BQU07O0lBRTlCLE9BQU9DLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDTixLQUFLLENBQUM7RUFDOUIsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQVpZTyxPQUFBLENBQUFaLFNBQVMsR0FBQUEsU0FBQTtBQWNmLElBQU1hLFdBQVcsR0FBRyxTQUFkQSxXQUFXQSxDQUFJQyxJQUFXLEVBQUk7RUFDekNBLElBQUksQ0FBQ0MsS0FBSyxHQUFHLEVBQUU7RUFDZixPQUFPbEIsU0FBQSxDQUFBSSxPQUFPLENBQUNlLElBQUksQ0FBQyxjQUFjLEVBQUVGLElBQUksQ0FBQyxDQUFDWCxLQUFLLENBQUMsVUFBQUMsR0FBRyxFQUFHO0lBQ3BELElBQUlDLEtBQVU7SUFDZCxJQUFJLE9BQU9ELEdBQUcsS0FBSyxRQUFRLEVBQUU7TUFDM0JDLEtBQUssQ0FBQ0MsT0FBTyxHQUFHRixHQUFHO0tBQ3BCLE1BQU07TUFDTEMsS0FBSyxHQUFHRCxHQUFHLENBQUNHLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDRixPQUFPLEdBQzdCRixHQUFHLENBQUNHLFFBQVEsQ0FBQ0MsSUFBSSxHQUNqQkosR0FBRyxDQUFDRyxRQUFRLENBQUNDLElBQUksQ0FBQ0MsTUFBTTs7SUFFOUIsT0FBT0MsT0FBTyxDQUFDQyxNQUFNLENBQUNOLEtBQUssQ0FBQztFQUM5QixDQUFDLENBQUM7QUFDSixDQUFDO0FBYllPLE9BQUEsQ0FBQUMsV0FBVyxHQUFBQSxXQUFBO0FBZWpCLElBQU1JLEtBQUssR0FBRyxTQUFSQSxLQUFLQSxDQUFJQyxLQUFhLEVBQUVDLFFBQWdCLEVBQUk7RUFDdkQsSUFBTUMsT0FBTyxHQUFHO0lBQ2RDLFFBQVEsRUFBRUgsS0FBSztJQUNmQyxRQUFRLEVBQUVBO0dBQ1g7RUFDRCxPQUFPdEIsU0FBQSxDQUFBSSxPQUFPLENBQUNlLElBQUksQ0FBQyw2QkFBNkIsRUFBRUksT0FBTyxDQUFDLENBQUNqQixLQUFLLENBQUMsVUFBQUMsR0FBRyxFQUFHO0lBQ3RFLElBQUlDLEtBQVU7SUFDZCxJQUFJLE9BQU9ELEdBQUcsS0FBSyxRQUFRLEVBQUU7TUFDM0JDLEtBQUssQ0FBQ0MsT0FBTyxHQUFHRixHQUFHO0tBQ3BCLE1BQU07TUFDTEMsS0FBSyxHQUFHRCxHQUFHLENBQUNHLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDRixPQUFPLEdBQzdCRixHQUFHLENBQUNHLFFBQVEsQ0FBQ0MsSUFBSSxHQUNqQkosR0FBRyxDQUFDRyxRQUFRLENBQUNDLElBQUksQ0FBQ0MsTUFBTTs7SUFFOUIsT0FBT0MsT0FBTyxDQUFDQyxNQUFNLENBQUNOLEtBQUssQ0FBQztFQUM5QixDQUFDLENBQUM7QUFDSixDQUFDO0FBaEJZTyxPQUFBLENBQUFLLEtBQUssR0FBQUEsS0FBQSJ9