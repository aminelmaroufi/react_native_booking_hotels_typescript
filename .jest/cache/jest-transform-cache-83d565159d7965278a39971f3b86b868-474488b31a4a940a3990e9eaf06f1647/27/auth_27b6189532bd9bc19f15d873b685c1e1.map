{"version":3,"names":["_actionTypes","_interopRequireDefault","require","_user","initialState","fetching","isLoggedIn","message","error","user","emptyUser","success","reducer","state","arguments","length","undefined","action","type","ActionTypes","API_CALL_REQUEST","_extends2","default","API_CALL_SUCCESS","API_CALL_FAILURE","payload","SUCCESS_OPERATION","CHECK_USER_SUCCESS","CREATE_ACCOUNT_SUCCESS","LOGIN_SUCCESS","ADD_CARD_SUCCESS","cards","concat","_toConsumableArray2","card","SET_DEFAULT_CARD","filter","c","id","unshift"],"sources":["auth.ts"],"sourcesContent":["import ActionTypes from '../../utils/actionTypes';\nimport {authActions, AuthState} from '../../types';\nimport {emptyUser} from '../../models/user';\n\nconst initialState: AuthState = {\n  fetching: false,\n  isLoggedIn: false,\n  message: '',\n  error: false,\n  user: emptyUser,\n  success: false,\n};\nexport default function reducer(state = initialState, action: authActions) {\n  switch (action.type) {\n    case ActionTypes.API_CALL_REQUEST:\n      return {\n        ...state,\n        fetching: true,\n        success: false,\n        error: false,\n        message: '',\n      };\n    case ActionTypes.API_CALL_SUCCESS:\n      return {\n        ...state,\n        fetching: false,\n        success: true,\n      };\n    case ActionTypes.API_CALL_FAILURE:\n      return {\n        ...state,\n        fetching: false,\n        error: true,\n        message: action.payload.message,\n      };\n    case ActionTypes.SUCCESS_OPERATION:\n      return {\n        ...state,\n        fetching: false,\n        success: true,\n        message: action.payload.message,\n      };\n    case ActionTypes.CHECK_USER_SUCCESS:\n      return {\n        ...state,\n        user: action.payload.user ? action.payload.user : emptyUser,\n        isLoggedIn: action.payload.user ? true : false,\n      };\n    case ActionTypes.CREATE_ACCOUNT_SUCCESS:\n      return {\n        ...state,\n        user: action.payload.user,\n      };\n    case ActionTypes.LOGIN_SUCCESS:\n      return {\n        ...state,\n        user: action.payload.user,\n        isLoggedIn: true,\n      };\n    case ActionTypes.ADD_CARD_SUCCESS:\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          cards: [...state.user.cards, action.payload.card],\n        },\n      };\n    case ActionTypes.SET_DEFAULT_CARD:\n      let cards = state.user.cards.filter(c => c.id !== action.payload.card.id);\n      cards.unshift(action.payload.card);\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          cards: cards,\n        },\n      };\n    default:\n      return state;\n  }\n}\n"],"mappings":"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"}