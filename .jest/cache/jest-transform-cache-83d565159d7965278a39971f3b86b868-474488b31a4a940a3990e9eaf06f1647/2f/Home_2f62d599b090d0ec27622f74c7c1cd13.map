{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_components","_FontAwesome","_interopRequireDefault","_reactRedux","_operators","_rxjs","_native","_actions","_HotelItem","_jsxRuntime","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Home","navigation","useNavigation","dispatch","useDispatch","_useSelector","useSelector","state","hotel","hotels","pages","page","_useState","useState","_useState2","_slicedToArray2","refreshing","setRefreshing","_useState3","Subject","_useState4","searchTerm","_useState5","_useState6","q","setTermText","SearchIcon","jsx","style","styles","searchIcon","name","size","color","useEffect","getHotels","subscription","pipe","debounceTime","subscribe","term","length","params","unsubscribe","next","_renderItem","_ref","item","HotelItem","onSelectHotel","selectHotel","navigate","_handleRefresh","console","log","getMoreHotels","onLoadMore","do_search","jsxs","Layout","container","children","Input","testID","placeholder","accessoryRight","onChangeText","nextValue","onSubmitEditing","searchInput","FlatList","data","numColumns","keyExtractor","_id","renderItem","onEndReachedThreshold","onEndReached","onRefresh","StyleSheet","create","flex","backgroundColor","padding","paddingTop","borderRadius","marginTop","marginRight","hotelRow","flexDirection","paddingBottom","borderBottomWidth","borderBottomColor","row","info","title","fontSize","fontWeight","adress","room","price","typeStyle","alignItems","position","bottom","right","imageStyle","height","width","iconAdressStyle","_default","exports"],"sources":["Home.tsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {FlatList, StyleSheet} from 'react-native';\nimport {Layout, Input} from '@ui-kitten/components';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {debounceTime} from 'rxjs/operators';\nimport {Subject} from 'rxjs';\nimport {useNavigation} from '@react-navigation/native';\nimport {getHotels, getMoreHotels, selectHotel} from '../redux/actions';\nimport {RootState} from '../redux/reducers';\nimport {IHotel} from '../models';\nimport {HotelItem} from '../components/home/HotelItem';\n\n// type Props = {\n//   hotels: Array<IHotel>;\n// };\n\nconst Home: React.FC = () => {\n  const navigation = useNavigation();\n  const dispatch = useDispatch();\n  const {hotels, pages, page} = useSelector((state: RootState) => state.hotel);\n  const [refreshing, setRefreshing] = useState(false);\n  const [searchTerm] = useState(() => new Subject());\n  const [q, setTermText] = useState('');\n\n  const SearchIcon = () => (\n    <Icon style={styles.searchIcon} name=\"search\" size={20} color=\"#444\" />\n  );\n\n  useEffect(() => {\n    dispatch(getHotels({q: '', page: 1}));\n  }, []);\n\n  useEffect(() => {\n    setRefreshing(false);\n  }, [hotels]);\n\n  useEffect(() => {\n    const subscription = searchTerm\n      .pipe(debounceTime(300))\n      .subscribe((term: string) => {\n        if (term.length === 0 || term.length > 2) {\n          const params = {\n            q: term,\n            page: 1,\n          };\n          dispatch(getHotels(params));\n        }\n      });\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [searchTerm]);\n\n  useEffect(() => {\n    searchTerm.next(q);\n  }, [q]);\n\n  const _renderItem = ({item}: {item: IHotel}) => {\n    return <HotelItem item={item} onSelectHotel={onSelectHotel} />;\n  };\n\n  const onSelectHotel = (item: IHotel) => {\n    dispatch(selectHotel(item));\n    navigation?.navigate('HotelDetails');\n  };\n\n  const _handleRefresh = () => {\n    console.log('refreshing...');\n    setRefreshing(true);\n    dispatch(getMoreHotels({q: '', page: 1}));\n  };\n\n  const onLoadMore = () => {\n    if (page < pages) {\n      dispatch(getMoreHotels({q: '', page: page + 1}));\n    }\n  };\n\n  const do_search = () => {\n    // dispatch(getHotels({q: value, page: page + 1}));\n  };\n\n  return (\n    <Layout style={styles.container}>\n      <Input\n        testID=\"search-box\"\n        placeholder=\"Search hotel by name, city ....\"\n        accessoryRight={SearchIcon}\n        onChangeText={nextValue => setTermText(nextValue)}\n        onSubmitEditing={() => do_search()}\n        style={styles.searchInput}\n      />\n      {hotels.length > 0 && (\n        <FlatList\n          data={hotels}\n          numColumns={1}\n          keyExtractor={(item: IHotel) => item._id}\n          renderItem={_renderItem}\n          onEndReachedThreshold={0.7}\n          onEndReached={onLoadMore}\n          refreshing={refreshing}\n          onRefresh={_handleRefresh}\n        />\n      )}\n    </Layout>\n  );\n};\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    padding: 10,\n    paddingTop: 0,\n  },\n  searchInput: {\n    backgroundColor: '#ddd',\n    borderRadius: 100,\n    marginTop: 10,\n  },\n  searchIcon: {\n    marginRight: 5,\n    color: '#888',\n  },\n  hotelRow: {\n    flexDirection: 'row',\n    padding: 10,\n    paddingBottom: 15,\n    borderBottomWidth: 3,\n    borderBottomColor: '#f4ab49',\n  },\n  row: {\n    flexDirection: 'row',\n    padding: 10,\n  },\n  info: {\n    flex: 1,\n    padding: 10,\n  },\n  title: {\n    fontSize: 16,\n    color: '#000',\n    fontWeight: 'bold',\n    marginRight: 7,\n  },\n  adress: {\n    fontSize: 14,\n    color: '#000',\n  },\n  room: {\n    fontSize: 12,\n    color: '#000',\n  },\n  price: {\n    fontSize: 17,\n    fontWeight: 'bold',\n    color: '#000',\n    marginTop: 5,\n  },\n  typeStyle: {\n    alignItems: 'flex-end',\n    position: 'absolute',\n    bottom: 5,\n    right: 10,\n  },\n  imageStyle: {\n    height: 190,\n    width: 130,\n  },\n  iconAdressStyle: {marginRight: 5, marginTop: 2},\n});\nexport default Home;\n"],"mappings":"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"}