08cc2d290b21a2d031db03b23af559fe
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _react = _interopRequireDefault(require("react"));
var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));
var _reactNative = require("@testing-library/react-native");
var _Home = _interopRequireDefault(require("../Home"));
var _actions = require("../../redux/actions");
var _hotels_response = _interopRequireDefault(require("./fixtures/hotels_response.json"));
var _Setup = _interopRequireDefault(require("../Setup"));
var _jsxRuntime = require("react/jsx-runtime");
var mockStore = (0, _reduxMockStore.default)();
var store = mockStore({
  hotel: {
    hotels: _hotels_response.default.hotels
  }
});
describe('Test homepage screen', function () {
  beforeEach(function () {
    store.dispatch = jest.fn();
    (0, _Setup.default)((0, _jsxRuntime.jsx)(_Home.default, {
      hotels: _hotels_response.default.hotels
    }), store);
  });
  afterEach(_reactNative.cleanup);
  it('fetches the hotels on mount', function () {
    var expectedAction = (0, _actions.getHotels)({
      q: '',
      page: 1
    });
    expect(store.dispatch).toHaveBeenCalledTimes(1);
    expect(store.dispatch).toHaveBeenCalledWith(expectedAction);
  });
  it('should display the list of hotels', function () {
    expect(_reactNative.screen.getByTestId('search-box')).toBeDefined();
  });
  it('should render a list of hotels', function () {
    _hotels_response.default.hotels.forEach(function (hotel) {
      var hotelName = _reactNative.screen.getByText(hotel.name);
      var addressElement = _reactNative.screen.getByText(hotel.short_address);
      expect(hotelName).toBeDefined();
      expect(addressElement).toBeDefined();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWR1eE1vY2tTdG9yZSIsIl9yZWFjdE5hdGl2ZSIsIl9Ib21lIiwiX2FjdGlvbnMiLCJfaG90ZWxzX3Jlc3BvbnNlIiwiX1NldHVwIiwiX2pzeFJ1bnRpbWUiLCJtb2NrU3RvcmUiLCJjb25maWd1cmVTdG9yZSIsInN0b3JlIiwiaG90ZWwiLCJob3RlbHMiLCJob3RlbHNfcmVzcG9uc2UiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJkaXNwYXRjaCIsImplc3QiLCJmbiIsIlNldHVwIiwianN4IiwiZGVmYXVsdCIsImFmdGVyRWFjaCIsImNsZWFudXAiLCJpdCIsImV4cGVjdGVkQWN0aW9uIiwiZ2V0SG90ZWxzIiwicSIsInBhZ2UiLCJleHBlY3QiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInNjcmVlbiIsImdldEJ5VGVzdElkIiwidG9CZURlZmluZWQiLCJmb3JFYWNoIiwiaG90ZWxOYW1lIiwiZ2V0QnlUZXh0IiwibmFtZSIsImFkZHJlc3NFbGVtZW50Iiwic2hvcnRfYWRkcmVzcyJdLCJzb3VyY2VzIjpbImhvbWUudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjb25maWd1cmVTdG9yZSBmcm9tICdyZWR1eC1tb2NrLXN0b3JlJztcbmltcG9ydCB7Y2xlYW51cCwgc2NyZWVufSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0LW5hdGl2ZSc7XG5cbmltcG9ydCBIb21lIGZyb20gJy4uL0hvbWUnO1xuaW1wb3J0IHtnZXRIb3RlbHN9IGZyb20gJy4uLy4uL3JlZHV4L2FjdGlvbnMnO1xuaW1wb3J0IGhvdGVsc19yZXNwb25zZSBmcm9tICcuL2ZpeHR1cmVzL2hvdGVsc19yZXNwb25zZS5qc29uJztcbmltcG9ydCBTZXR1cCBmcm9tICcuLi9TZXR1cCc7XG5cbmxldCBtb2NrU3RvcmUgPSBjb25maWd1cmVTdG9yZSgpO1xuXG5jb25zdCBzdG9yZSA9IG1vY2tTdG9yZSh7XG4gIGhvdGVsOiB7XG4gICAgaG90ZWxzOiBob3RlbHNfcmVzcG9uc2UuaG90ZWxzLFxuICB9LFxufSk7XG5cbmRlc2NyaWJlKCdUZXN0IGhvbWVwYWdlIHNjcmVlbicsICgpID0+IHtcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgc3RvcmUuZGlzcGF0Y2ggPSBqZXN0LmZuKCk7XG4gICAgU2V0dXAoPEhvbWUgaG90ZWxzPXtob3RlbHNfcmVzcG9uc2UuaG90ZWxzfSAvPiwgc3RvcmUpO1xuICB9KTtcblxuICBhZnRlckVhY2goY2xlYW51cCk7XG5cbiAgaXQoJ2ZldGNoZXMgdGhlIGhvdGVscyBvbiBtb3VudCcsICgpID0+IHtcbiAgICBjb25zdCBleHBlY3RlZEFjdGlvbiA9IGdldEhvdGVscyh7cTogJycsIHBhZ2U6IDF9KTtcbiAgICBleHBlY3Qoc3RvcmUuZGlzcGF0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICBleHBlY3Qoc3RvcmUuZGlzcGF0Y2gpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdGVkQWN0aW9uKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBkaXNwbGF5IHRoZSBsaXN0IG9mIGhvdGVscycsICgpID0+IHtcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCdzZWFyY2gtYm94JykpLnRvQmVEZWZpbmVkKCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVuZGVyIGEgbGlzdCBvZiBob3RlbHMnLCAoKSA9PiB7XG4gICAgaG90ZWxzX3Jlc3BvbnNlLmhvdGVscy5mb3JFYWNoKGhvdGVsID0+IHtcbiAgICAgIGNvbnN0IGhvdGVsTmFtZSA9IHNjcmVlbi5nZXRCeVRleHQoaG90ZWwubmFtZSk7XG4gICAgICBjb25zdCBhZGRyZXNzRWxlbWVudCA9IHNjcmVlbi5nZXRCeVRleHQoaG90ZWwuc2hvcnRfYWRkcmVzcyk7XG4gICAgICBleHBlY3QoaG90ZWxOYW1lKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGFkZHJlc3NFbGVtZW50KS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsZUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsWUFBQSxHQUFBRixPQUFBO0FBRUEsSUFBQUcsS0FBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksUUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssZ0JBQUEsR0FBQU4sc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFNLE1BQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUE2QixJQUFBTyxXQUFBLEdBQUFQLE9BQUE7QUFFN0IsSUFBSVEsU0FBUyxHQUFHLElBQUFDLHVCQUFjLEdBQUU7QUFFaEMsSUFBTUMsS0FBSyxHQUFHRixTQUFTLENBQUM7RUFDdEJHLEtBQUssRUFBRTtJQUNMQyxNQUFNLEVBQUVDLHdCQUFlLENBQUNEO0VBQzFCO0FBQ0YsQ0FBQyxDQUFDO0FBRUZFLFFBQVEsQ0FBQyxzQkFBc0IsRUFBRSxZQUFNO0VBQ3JDQyxVQUFVLENBQUMsWUFBTTtJQUNmTCxLQUFLLENBQUNNLFFBQVEsR0FBR0MsSUFBSSxDQUFDQyxFQUFFLEVBQUU7SUFDMUIsSUFBQUMsY0FBSyxFQUFDLElBQUFaLFdBQUEsQ0FBQWEsR0FBQSxFQUFDakIsS0FBQSxDQUFBa0IsT0FBSTtNQUFDVCxNQUFNLEVBQUVDLHdCQUFlLENBQUNEO0lBQU8sRUFBRyxFQUFFRixLQUFLLENBQUM7RUFDeEQsQ0FBQyxDQUFDO0VBRUZZLFNBQVMsQ0FBQ0Msb0JBQU8sQ0FBQztFQUVsQkMsRUFBRSxDQUFDLDZCQUE2QixFQUFFLFlBQU07SUFDdEMsSUFBTUMsY0FBYyxHQUFHLElBQUFDLGtCQUFTLEVBQUM7TUFBQ0MsQ0FBQyxFQUFFLEVBQUU7TUFBRUMsSUFBSSxFQUFFO0lBQUMsQ0FBQyxDQUFDO0lBQ2xEQyxNQUFNLENBQUNuQixLQUFLLENBQUNNLFFBQVEsQ0FBQyxDQUFDYyxxQkFBcUIsQ0FBQyxDQUFDLENBQUM7SUFDL0NELE1BQU0sQ0FBQ25CLEtBQUssQ0FBQ00sUUFBUSxDQUFDLENBQUNlLG9CQUFvQixDQUFDTixjQUFjLENBQUM7RUFDN0QsQ0FBQyxDQUFDO0VBRUZELEVBQUUsQ0FBQyxtQ0FBbUMsRUFBRSxZQUFNO0lBQzVDSyxNQUFNLENBQUNHLG1CQUFNLENBQUNDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDQyxXQUFXLEVBQUU7RUFDeEQsQ0FBQyxDQUFDO0VBRUZWLEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxZQUFNO0lBQ3pDWCx3QkFBZSxDQUFDRCxNQUFNLENBQUN1QixPQUFPLENBQUMsVUFBQXhCLEtBQUssRUFBSTtNQUN0QyxJQUFNeUIsU0FBUyxHQUFHSixtQkFBTSxDQUFDSyxTQUFTLENBQUMxQixLQUFLLENBQUMyQixJQUFJLENBQUM7TUFDOUMsSUFBTUMsY0FBYyxHQUFHUCxtQkFBTSxDQUFDSyxTQUFTLENBQUMxQixLQUFLLENBQUM2QixhQUFhLENBQUM7TUFDNURYLE1BQU0sQ0FBQ08sU0FBUyxDQUFDLENBQUNGLFdBQVcsRUFBRTtNQUMvQkwsTUFBTSxDQUFDVSxjQUFjLENBQUMsQ0FBQ0wsV0FBVyxFQUFFO0lBQ3RDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyJ9