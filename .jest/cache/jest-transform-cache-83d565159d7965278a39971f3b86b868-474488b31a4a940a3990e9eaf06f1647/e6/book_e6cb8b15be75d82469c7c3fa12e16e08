ce8ae3563a210aeff2474a636d97b469
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var __importDefault = void 0 && (void 0).__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
var actionTypes_1 = __importDefault(require("../../utils/actionTypes"));
var card_1 = require("../../models/card");
var emptyHotel = {
  _id: '',
  name: '',
  short_address: '',
  address: '',
  rating: 0,
  location: '',
  type: '',
  main_picture: '',
  second_picture: '',
  rooms: []
};
var emptyRoom = {
  _id: '',
  title: '',
  advantage: '',
  price: 0,
  room_picture: ''
};
var initialState = {
  book: {
    _id: '',
    hotel: emptyHotel,
    room: emptyRoom,
    check_in_date: null,
    check_out_date: null,
    night_numbers: 0,
    price: 0,
    card: card_1.emptySecureCard
  },
  bookings: []
};
function reducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 ? arguments[1] : undefined;
  switch (action.type) {
    case actionTypes_1.default.SELECT_HOTEL:
      return (0, _extends2.default)((0, _extends2.default)({}, state), {
        book: (0, _extends2.default)((0, _extends2.default)({}, state.book), {
          hotel: action.payload.hotel
        })
      });
    case actionTypes_1.default.CHECK_USER_SUCCESS:
      return (0, _extends2.default)((0, _extends2.default)({}, state), {
        book: (0, _extends2.default)((0, _extends2.default)({}, state.book), {
          card: action.payload.user.cards[0]
        })
      });
    case actionTypes_1.default.UPDATE_RESERVATION:
      return (0, _extends2.default)((0, _extends2.default)({}, state), {
        book: action.payload.book
      });
    case actionTypes_1.default.ADD_CARD_SUCCESS:
      return (0, _extends2.default)((0, _extends2.default)({}, state), {
        book: (0, _extends2.default)((0, _extends2.default)({}, state.book), {
          card: action.payload.card
        })
      });
    case actionTypes_1.default.SET_DEFAULT_CARD:
      return (0, _extends2.default)((0, _extends2.default)({}, state), {
        book: (0, _extends2.default)((0, _extends2.default)({}, state.book), {
          card: action.payload.card
        })
      });
    case actionTypes_1.default.CREATE_BOOKING_SUCCESS:
      var bookings = state.bookings;
      bookings.unshift(action.payload.book);
      return (0, _extends2.default)((0, _extends2.default)({}, state), {
        book: initialState.book,
        bookings: bookings
      });
    case actionTypes_1.default.SET_BOOKINGS:
      return (0, _extends2.default)((0, _extends2.default)({}, state), {
        bookings: action.payload.bookings
      });
    default:
      return state;
  }
}
exports.default = reducer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhY3Rpb25UeXBlc18xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsImNhcmRfMSIsImVtcHR5SG90ZWwiLCJfaWQiLCJuYW1lIiwic2hvcnRfYWRkcmVzcyIsImFkZHJlc3MiLCJyYXRpbmciLCJsb2NhdGlvbiIsInR5cGUiLCJtYWluX3BpY3R1cmUiLCJzZWNvbmRfcGljdHVyZSIsInJvb21zIiwiZW1wdHlSb29tIiwidGl0bGUiLCJhZHZhbnRhZ2UiLCJwcmljZSIsInJvb21fcGljdHVyZSIsImluaXRpYWxTdGF0ZSIsImJvb2siLCJob3RlbCIsInJvb20iLCJjaGVja19pbl9kYXRlIiwiY2hlY2tfb3V0X2RhdGUiLCJuaWdodF9udW1iZXJzIiwiY2FyZCIsImVtcHR5U2VjdXJlQ2FyZCIsImJvb2tpbmdzIiwicmVkdWNlciIsInN0YXRlIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiYWN0aW9uIiwiZGVmYXVsdCIsIlNFTEVDVF9IT1RFTCIsIl9leHRlbmRzMiIsInBheWxvYWQiLCJDSEVDS19VU0VSX1NVQ0NFU1MiLCJ1c2VyIiwiY2FyZHMiLCJVUERBVEVfUkVTRVJWQVRJT04iLCJBRERfQ0FSRF9TVUNDRVNTIiwiU0VUX0RFRkFVTFRfQ0FSRCIsIkNSRUFURV9CT09LSU5HX1NVQ0NFU1MiLCJ1bnNoaWZ0IiwiU0VUX0JPT0tJTkdTIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi9Vc2Vycy9BbWluZS9EZXNrdG9wL3Byb2plY3RzL0Jvb2tpbmdIb3RlbHNBcHAvc3JjL3JlZHV4L3JlZHVjZXJzL2Jvb2sudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFjdGlvblR5cGVzIGZyb20gJy4uLy4uL3V0aWxzL2FjdGlvblR5cGVzJztcbmltcG9ydCB7SUhvdGVsLCBJUm9vbX0gZnJvbSAnLi4vLi4vbW9kZWxzJztcbmltcG9ydCB7ZW1wdHlTZWN1cmVDYXJkfSBmcm9tICcuLi8uLi9tb2RlbHMvY2FyZCc7XG5pbXBvcnQge0Jvb2tTdGF0ZSwgYm9va0FjdGlvbnN9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuY29uc3QgZW1wdHlIb3RlbDogSUhvdGVsID0ge1xuICBfaWQ6ICcnLFxuICBuYW1lOiAnJyxcbiAgc2hvcnRfYWRkcmVzczogJycsXG4gIGFkZHJlc3M6ICcnLFxuICByYXRpbmc6IDAsXG4gIGxvY2F0aW9uOiAnJyxcbiAgdHlwZTogJycsXG4gIG1haW5fcGljdHVyZTogJycsXG4gIHNlY29uZF9waWN0dXJlOiAnJyxcbiAgcm9vbXM6IFtdLFxufTtcblxuY29uc3QgZW1wdHlSb29tOiBJUm9vbSA9IHtcbiAgX2lkOiAnJyxcbiAgdGl0bGU6ICcnLFxuICBhZHZhbnRhZ2U6ICcnLFxuICBwcmljZTogMCxcbiAgcm9vbV9waWN0dXJlOiAnJyxcbn07XG5cbmNvbnN0IGluaXRpYWxTdGF0ZTogQm9va1N0YXRlID0ge1xuICBib29rOiB7XG4gICAgX2lkOiAnJyxcbiAgICBob3RlbDogZW1wdHlIb3RlbCxcbiAgICByb29tOiBlbXB0eVJvb20sXG4gICAgY2hlY2tfaW5fZGF0ZTogbnVsbCxcbiAgICBjaGVja19vdXRfZGF0ZTogbnVsbCxcbiAgICBuaWdodF9udW1iZXJzOiAwLFxuICAgIHByaWNlOiAwLFxuICAgIGNhcmQ6IGVtcHR5U2VjdXJlQ2FyZCxcbiAgfSxcbiAgYm9va2luZ3M6IFtdLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVkdWNlcihzdGF0ZSA9IGluaXRpYWxTdGF0ZSwgYWN0aW9uOiBib29rQWN0aW9ucykge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5TRUxFQ1RfSE9URUw6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYm9vazogey4uLnN0YXRlLmJvb2ssIGhvdGVsOiBhY3Rpb24ucGF5bG9hZC5ob3RlbH0sXG4gICAgICB9O1xuICAgIGNhc2UgQWN0aW9uVHlwZXMuQ0hFQ0tfVVNFUl9TVUNDRVNTOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2s6IHsuLi5zdGF0ZS5ib29rLCBjYXJkOiBhY3Rpb24ucGF5bG9hZC51c2VyLmNhcmRzWzBdfSxcbiAgICAgIH07XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5VUERBVEVfUkVTRVJWQVRJT046XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYm9vazogYWN0aW9uLnBheWxvYWQuYm9vayxcbiAgICAgIH07XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5BRERfQ0FSRF9TVUNDRVNTOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2s6IHsuLi5zdGF0ZS5ib29rLCBjYXJkOiBhY3Rpb24ucGF5bG9hZC5jYXJkfSxcbiAgICAgIH07XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5TRVRfREVGQVVMVF9DQVJEOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2s6IHsuLi5zdGF0ZS5ib29rLCBjYXJkOiBhY3Rpb24ucGF5bG9hZC5jYXJkfSxcbiAgICAgIH07XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5DUkVBVEVfQk9PS0lOR19TVUNDRVNTOlxuICAgICAgbGV0IGJvb2tpbmdzID0gc3RhdGUuYm9va2luZ3M7XG4gICAgICBib29raW5ncy51bnNoaWZ0KGFjdGlvbi5wYXlsb2FkLmJvb2spO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2s6IGluaXRpYWxTdGF0ZS5ib29rLFxuICAgICAgICBib29raW5nczogYm9va2luZ3MsXG4gICAgICB9O1xuICAgIGNhc2UgQWN0aW9uVHlwZXMuU0VUX0JPT0tJTkdTOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2tpbmdzOiBhY3Rpb24ucGF5bG9hZC5ib29raW5ncyxcbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxhQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUdBLElBQU1FLFVBQVUsR0FBVztFQUN6QkMsR0FBRyxFQUFFLEVBQUU7RUFDUEMsSUFBSSxFQUFFLEVBQUU7RUFDUkMsYUFBYSxFQUFFLEVBQUU7RUFDakJDLE9BQU8sRUFBRSxFQUFFO0VBQ1hDLE1BQU0sRUFBRSxDQUFDO0VBQ1RDLFFBQVEsRUFBRSxFQUFFO0VBQ1pDLElBQUksRUFBRSxFQUFFO0VBQ1JDLFlBQVksRUFBRSxFQUFFO0VBQ2hCQyxjQUFjLEVBQUUsRUFBRTtFQUNsQkMsS0FBSyxFQUFFO0NBQ1I7QUFFRCxJQUFNQyxTQUFTLEdBQVU7RUFDdkJWLEdBQUcsRUFBRSxFQUFFO0VBQ1BXLEtBQUssRUFBRSxFQUFFO0VBQ1RDLFNBQVMsRUFBRSxFQUFFO0VBQ2JDLEtBQUssRUFBRSxDQUFDO0VBQ1JDLFlBQVksRUFBRTtDQUNmO0FBRUQsSUFBTUMsWUFBWSxHQUFjO0VBQzlCQyxJQUFJLEVBQUU7SUFDSmhCLEdBQUcsRUFBRSxFQUFFO0lBQ1BpQixLQUFLLEVBQUVsQixVQUFVO0lBQ2pCbUIsSUFBSSxFQUFFUixTQUFTO0lBQ2ZTLGFBQWEsRUFBRSxJQUFJO0lBQ25CQyxjQUFjLEVBQUUsSUFBSTtJQUNwQkMsYUFBYSxFQUFFLENBQUM7SUFDaEJSLEtBQUssRUFBRSxDQUFDO0lBQ1JTLElBQUksRUFBRXhCLE1BQUEsQ0FBQXlCO0dBQ1A7RUFDREMsUUFBUSxFQUFFO0NBQ1g7QUFFRCxTQUF3QkMsT0FBT0EsQ0FBQSxFQUEwQztFQUFBLElBQXpDQyxLQUFLLEdBQUFDLFNBQUEsQ0FBQUMsTUFBQSxRQUFBRCxTQUFBLFFBQUFFLFNBQUEsR0FBQUYsU0FBQSxNQUFHWixZQUFZO0VBQUEsSUFBRWUsTUFBbUIsR0FBQUgsU0FBQSxDQUFBQyxNQUFBLE9BQUFELFNBQUEsTUFBQUUsU0FBQTtFQUN2RSxRQUFRQyxNQUFNLENBQUN4QixJQUFJO0lBQ2pCLEtBQUtYLGFBQUEsQ0FBQW9DLE9BQVcsQ0FBQ0MsWUFBWTtNQUMzQixXQUFBQyxTQUFBLENBQUFGLE9BQUEsTUFBQUUsU0FBQSxDQUFBRixPQUFBLE1BQ0tMLEtBQUs7UUFDUlYsSUFBSSxNQUFBaUIsU0FBQSxDQUFBRixPQUFBLE1BQUFFLFNBQUEsQ0FBQUYsT0FBQSxNQUFNTCxLQUFLLENBQUNWLElBQUk7VUFBRUMsS0FBSyxFQUFFYSxNQUFNLENBQUNJLE9BQU8sQ0FBQ2pCO1FBQUs7TUFBQTtJQUVyRCxLQUFLdEIsYUFBQSxDQUFBb0MsT0FBVyxDQUFDSSxrQkFBa0I7TUFDakMsV0FBQUYsU0FBQSxDQUFBRixPQUFBLE1BQUFFLFNBQUEsQ0FBQUYsT0FBQSxNQUNLTCxLQUFLO1FBQ1JWLElBQUksTUFBQWlCLFNBQUEsQ0FBQUYsT0FBQSxNQUFBRSxTQUFBLENBQUFGLE9BQUEsTUFBTUwsS0FBSyxDQUFDVixJQUFJO1VBQUVNLElBQUksRUFBRVEsTUFBTSxDQUFDSSxPQUFPLENBQUNFLElBQUksQ0FBQ0MsS0FBSyxDQUFDLENBQUM7UUFBQztNQUFBO0lBRTVELEtBQUsxQyxhQUFBLENBQUFvQyxPQUFXLENBQUNPLGtCQUFrQjtNQUNqQyxXQUFBTCxTQUFBLENBQUFGLE9BQUEsTUFBQUUsU0FBQSxDQUFBRixPQUFBLE1BQ0tMLEtBQUs7UUFDUlYsSUFBSSxFQUFFYyxNQUFNLENBQUNJLE9BQU8sQ0FBQ2xCO01BQUk7SUFFN0IsS0FBS3JCLGFBQUEsQ0FBQW9DLE9BQVcsQ0FBQ1EsZ0JBQWdCO01BQy9CLFdBQUFOLFNBQUEsQ0FBQUYsT0FBQSxNQUFBRSxTQUFBLENBQUFGLE9BQUEsTUFDS0wsS0FBSztRQUNSVixJQUFJLE1BQUFpQixTQUFBLENBQUFGLE9BQUEsTUFBQUUsU0FBQSxDQUFBRixPQUFBLE1BQU1MLEtBQUssQ0FBQ1YsSUFBSTtVQUFFTSxJQUFJLEVBQUVRLE1BQU0sQ0FBQ0ksT0FBTyxDQUFDWjtRQUFJO01BQUE7SUFFbkQsS0FBSzNCLGFBQUEsQ0FBQW9DLE9BQVcsQ0FBQ1MsZ0JBQWdCO01BQy9CLFdBQUFQLFNBQUEsQ0FBQUYsT0FBQSxNQUFBRSxTQUFBLENBQUFGLE9BQUEsTUFDS0wsS0FBSztRQUNSVixJQUFJLE1BQUFpQixTQUFBLENBQUFGLE9BQUEsTUFBQUUsU0FBQSxDQUFBRixPQUFBLE1BQU1MLEtBQUssQ0FBQ1YsSUFBSTtVQUFFTSxJQUFJLEVBQUVRLE1BQU0sQ0FBQ0ksT0FBTyxDQUFDWjtRQUFJO01BQUE7SUFFbkQsS0FBSzNCLGFBQUEsQ0FBQW9DLE9BQVcsQ0FBQ1Usc0JBQXNCO01BQ3JDLElBQUlqQixRQUFRLEdBQUdFLEtBQUssQ0FBQ0YsUUFBUTtNQUM3QkEsUUFBUSxDQUFDa0IsT0FBTyxDQUFDWixNQUFNLENBQUNJLE9BQU8sQ0FBQ2xCLElBQUksQ0FBQztNQUNyQyxXQUFBaUIsU0FBQSxDQUFBRixPQUFBLE1BQUFFLFNBQUEsQ0FBQUYsT0FBQSxNQUNLTCxLQUFLO1FBQ1JWLElBQUksRUFBRUQsWUFBWSxDQUFDQyxJQUFJO1FBQ3ZCUSxRQUFRLEVBQUVBO01BQVE7SUFFdEIsS0FBSzdCLGFBQUEsQ0FBQW9DLE9BQVcsQ0FBQ1ksWUFBWTtNQUMzQixXQUFBVixTQUFBLENBQUFGLE9BQUEsTUFBQUUsU0FBQSxDQUFBRixPQUFBLE1BQ0tMLEtBQUs7UUFDUkYsUUFBUSxFQUFFTSxNQUFNLENBQUNJLE9BQU8sQ0FBQ1Y7TUFBUTtJQUVyQztNQUNFLE9BQU9FLEtBQUs7RUFBQztBQUVuQjtBQTNDQWtCLE9BQUEsQ0FBQWIsT0FBQSxHQUFBTixPQUFBIn0=