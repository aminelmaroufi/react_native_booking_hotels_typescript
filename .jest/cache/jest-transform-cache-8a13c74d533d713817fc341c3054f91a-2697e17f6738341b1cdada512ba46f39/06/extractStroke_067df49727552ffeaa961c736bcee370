971d0e00a4758a0b54ba2bd0a72687aa
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = extractStroke;
var _extractBrush = _interopRequireDefault(require("./extractBrush"));
var _extractOpacity = _interopRequireDefault(require("./extractOpacity"));
var _extractLengthList = _interopRequireDefault(require("./extractLengthList"));
var caps = {
  butt: 0,
  square: 2,
  round: 1
};
var joins = {
  miter: 0,
  bevel: 2,
  round: 1
};
var vectorEffects = {
  none: 0,
  default: 0,
  nonScalingStroke: 1,
  'non-scaling-stroke': 1,
  inherit: 2,
  uri: 3
};
function extractStroke(o, props, inherited) {
  var stroke = props.stroke,
    strokeOpacity = props.strokeOpacity,
    strokeLinecap = props.strokeLinecap,
    strokeLinejoin = props.strokeLinejoin,
    strokeDasharray = props.strokeDasharray,
    strokeWidth = props.strokeWidth,
    strokeDashoffset = props.strokeDashoffset,
    strokeMiterlimit = props.strokeMiterlimit,
    vectorEffect = props.vectorEffect;
  if (stroke != null) {
    inherited.push('stroke');
    o.stroke = (0, _extractBrush.default)(stroke);
  }
  if (strokeWidth != null) {
    inherited.push('strokeWidth');
    o.strokeWidth = strokeWidth;
  }
  if (strokeOpacity != null) {
    inherited.push('strokeOpacity');
    o.strokeOpacity = (0, _extractOpacity.default)(strokeOpacity);
  }
  if (strokeDasharray != null) {
    inherited.push('strokeDasharray');
    var strokeDash = !strokeDasharray || strokeDasharray === 'none' ? null : (0, _extractLengthList.default)(strokeDasharray);
    o.strokeDasharray = strokeDash && strokeDash.length % 2 === 1 ? strokeDash.concat(strokeDash) : strokeDash;
  }
  if (strokeDashoffset != null) {
    inherited.push('strokeDashoffset');
    o.strokeDashoffset = strokeDasharray && strokeDashoffset ? +strokeDashoffset || 0 : null;
  }
  if (strokeLinecap != null) {
    inherited.push('strokeLinecap');
    o.strokeLinecap = strokeLinecap && caps[strokeLinecap] || 0;
  }
  if (strokeLinejoin != null) {
    inherited.push('strokeLinejoin');
    o.strokeLinejoin = strokeLinejoin && joins[strokeLinejoin] || 0;
  }
  if (strokeMiterlimit != null) {
    inherited.push('strokeMiterlimit');
    o.strokeMiterlimit = (strokeMiterlimit && typeof strokeMiterlimit !== 'number' ? parseFloat(strokeMiterlimit) : strokeMiterlimit) || 4;
  }
  if (vectorEffect != null) {
    o.vectorEffect = vectorEffect && vectorEffects[vectorEffect] || 0;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXh0cmFjdEJydXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfZXh0cmFjdE9wYWNpdHkiLCJfZXh0cmFjdExlbmd0aExpc3QiLCJjYXBzIiwiYnV0dCIsInNxdWFyZSIsInJvdW5kIiwiam9pbnMiLCJtaXRlciIsImJldmVsIiwidmVjdG9yRWZmZWN0cyIsIm5vbmUiLCJkZWZhdWx0Iiwibm9uU2NhbGluZ1N0cm9rZSIsImluaGVyaXQiLCJ1cmkiLCJleHRyYWN0U3Ryb2tlIiwibyIsInByb3BzIiwiaW5oZXJpdGVkIiwic3Ryb2tlIiwic3Ryb2tlT3BhY2l0eSIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZURhc2hhcnJheSIsInN0cm9rZVdpZHRoIiwic3Ryb2tlRGFzaG9mZnNldCIsInN0cm9rZU1pdGVybGltaXQiLCJ2ZWN0b3JFZmZlY3QiLCJwdXNoIiwic3Ryb2tlRGFzaCIsImxlbmd0aCIsImNvbmNhdCIsInBhcnNlRmxvYXQiXSwic291cmNlcyI6WyJleHRyYWN0U3Ryb2tlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHRyYWN0QnJ1c2ggZnJvbSAnLi9leHRyYWN0QnJ1c2gnO1xuaW1wb3J0IGV4dHJhY3RPcGFjaXR5IGZyb20gJy4vZXh0cmFjdE9wYWNpdHknO1xuaW1wb3J0IGV4dHJhY3RMZW5ndGhMaXN0IGZyb20gJy4vZXh0cmFjdExlbmd0aExpc3QnO1xuaW1wb3J0IHsgZXh0cmFjdGVkUHJvcHMsIFN0cm9rZVByb3BzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmNvbnN0IGNhcHMgPSB7XG4gIGJ1dHQ6IDAsXG4gIHNxdWFyZTogMixcbiAgcm91bmQ6IDEsXG59O1xuXG5jb25zdCBqb2lucyA9IHtcbiAgbWl0ZXI6IDAsXG4gIGJldmVsOiAyLFxuICByb3VuZDogMSxcbn07XG5cbmNvbnN0IHZlY3RvckVmZmVjdHMgPSB7XG4gIG5vbmU6IDAsXG4gIGRlZmF1bHQ6IDAsXG4gIG5vblNjYWxpbmdTdHJva2U6IDEsXG4gICdub24tc2NhbGluZy1zdHJva2UnOiAxLFxuICBpbmhlcml0OiAyLFxuICB1cmk6IDMsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBleHRyYWN0U3Ryb2tlKFxuICBvOiBleHRyYWN0ZWRQcm9wcyxcbiAgcHJvcHM6IFN0cm9rZVByb3BzLFxuICBpbmhlcml0ZWQ6IHN0cmluZ1tdLFxuKSB7XG4gIGNvbnN0IHtcbiAgICBzdHJva2UsXG4gICAgc3Ryb2tlT3BhY2l0eSxcbiAgICBzdHJva2VMaW5lY2FwLFxuICAgIHN0cm9rZUxpbmVqb2luLFxuICAgIHN0cm9rZURhc2hhcnJheSxcbiAgICBzdHJva2VXaWR0aCxcbiAgICBzdHJva2VEYXNob2Zmc2V0LFxuICAgIHN0cm9rZU1pdGVybGltaXQsXG4gICAgdmVjdG9yRWZmZWN0LFxuICB9ID0gcHJvcHM7XG5cbiAgaWYgKHN0cm9rZSAhPSBudWxsKSB7XG4gICAgaW5oZXJpdGVkLnB1c2goJ3N0cm9rZScpO1xuICAgIG8uc3Ryb2tlID0gZXh0cmFjdEJydXNoKHN0cm9rZSk7XG4gIH1cbiAgaWYgKHN0cm9rZVdpZHRoICE9IG51bGwpIHtcbiAgICBpbmhlcml0ZWQucHVzaCgnc3Ryb2tlV2lkdGgnKTtcbiAgICBvLnN0cm9rZVdpZHRoID0gc3Ryb2tlV2lkdGg7XG4gIH1cbiAgaWYgKHN0cm9rZU9wYWNpdHkgIT0gbnVsbCkge1xuICAgIGluaGVyaXRlZC5wdXNoKCdzdHJva2VPcGFjaXR5Jyk7XG4gICAgby5zdHJva2VPcGFjaXR5ID0gZXh0cmFjdE9wYWNpdHkoc3Ryb2tlT3BhY2l0eSk7XG4gIH1cbiAgaWYgKHN0cm9rZURhc2hhcnJheSAhPSBudWxsKSB7XG4gICAgaW5oZXJpdGVkLnB1c2goJ3N0cm9rZURhc2hhcnJheScpO1xuICAgIGNvbnN0IHN0cm9rZURhc2ggPVxuICAgICAgIXN0cm9rZURhc2hhcnJheSB8fCBzdHJva2VEYXNoYXJyYXkgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBleHRyYWN0TGVuZ3RoTGlzdChzdHJva2VEYXNoYXJyYXkpO1xuICAgIG8uc3Ryb2tlRGFzaGFycmF5ID1cbiAgICAgIHN0cm9rZURhc2ggJiYgc3Ryb2tlRGFzaC5sZW5ndGggJSAyID09PSAxXG4gICAgICAgID8gc3Ryb2tlRGFzaC5jb25jYXQoc3Ryb2tlRGFzaClcbiAgICAgICAgOiBzdHJva2VEYXNoO1xuICB9XG4gIGlmIChzdHJva2VEYXNob2Zmc2V0ICE9IG51bGwpIHtcbiAgICBpbmhlcml0ZWQucHVzaCgnc3Ryb2tlRGFzaG9mZnNldCcpO1xuICAgIG8uc3Ryb2tlRGFzaG9mZnNldCA9XG4gICAgICBzdHJva2VEYXNoYXJyYXkgJiYgc3Ryb2tlRGFzaG9mZnNldCA/ICtzdHJva2VEYXNob2Zmc2V0IHx8IDAgOiBudWxsO1xuICB9XG4gIGlmIChzdHJva2VMaW5lY2FwICE9IG51bGwpIHtcbiAgICBpbmhlcml0ZWQucHVzaCgnc3Ryb2tlTGluZWNhcCcpO1xuICAgIG8uc3Ryb2tlTGluZWNhcCA9IChzdHJva2VMaW5lY2FwICYmIGNhcHNbc3Ryb2tlTGluZWNhcF0pIHx8IDA7XG4gIH1cbiAgaWYgKHN0cm9rZUxpbmVqb2luICE9IG51bGwpIHtcbiAgICBpbmhlcml0ZWQucHVzaCgnc3Ryb2tlTGluZWpvaW4nKTtcbiAgICBvLnN0cm9rZUxpbmVqb2luID0gKHN0cm9rZUxpbmVqb2luICYmIGpvaW5zW3N0cm9rZUxpbmVqb2luXSkgfHwgMDtcbiAgfVxuICBpZiAoc3Ryb2tlTWl0ZXJsaW1pdCAhPSBudWxsKSB7XG4gICAgaW5oZXJpdGVkLnB1c2goJ3N0cm9rZU1pdGVybGltaXQnKTtcbiAgICBvLnN0cm9rZU1pdGVybGltaXQgPVxuICAgICAgKHN0cm9rZU1pdGVybGltaXQgJiYgdHlwZW9mIHN0cm9rZU1pdGVybGltaXQgIT09ICdudW1iZXInXG4gICAgICAgID8gcGFyc2VGbG9hdChzdHJva2VNaXRlcmxpbWl0KVxuICAgICAgICA6IHN0cm9rZU1pdGVybGltaXQpIHx8IDQ7XG4gIH1cbiAgaWYgKHZlY3RvckVmZmVjdCAhPSBudWxsKSB7XG4gICAgby52ZWN0b3JFZmZlY3QgPSAodmVjdG9yRWZmZWN0ICYmIHZlY3RvckVmZmVjdHNbdmVjdG9yRWZmZWN0XSkgfHwgMDtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsYUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsZUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsa0JBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUdBLElBQU1HLElBQUksR0FBRztFQUNYQyxJQUFJLEVBQUUsQ0FESztFQUVYQyxNQUFNLEVBQUUsQ0FGRztFQUdYQyxLQUFLLEVBQUU7QUFISSxDQUFiO0FBTUEsSUFBTUMsS0FBSyxHQUFHO0VBQ1pDLEtBQUssRUFBRSxDQURLO0VBRVpDLEtBQUssRUFBRSxDQUZLO0VBR1pILEtBQUssRUFBRTtBQUhLLENBQWQ7QUFNQSxJQUFNSSxhQUFhLEdBQUc7RUFDcEJDLElBQUksRUFBRSxDQURjO0VBRXBCQyxPQUFPLEVBQUUsQ0FGVztFQUdwQkMsZ0JBQWdCLEVBQUUsQ0FIRTtFQUlwQixzQkFBc0IsQ0FKRjtFQUtwQkMsT0FBTyxFQUFFLENBTFc7RUFNcEJDLEdBQUcsRUFBRTtBQU5lLENBQXRCO0FBU2UsU0FBU0MsYUFBVEEsQ0FDYkMsQ0FEYSxFQUViQyxLQUZhLEVBR2JDLFNBSGEsRUFJYjtFQUFBLElBRUVDLE1BRkYsR0FXSUYsS0FYSixDQUVFRSxNQUZGO0lBR0VDLGFBSEYsR0FXSUgsS0FYSixDQUdFRyxhQUhGO0lBSUVDLGFBSkYsR0FXSUosS0FYSixDQUlFSSxhQUpGO0lBS0VDLGNBTEYsR0FXSUwsS0FYSixDQUtFSyxjQUxGO0lBTUVDLGVBTkYsR0FXSU4sS0FYSixDQU1FTSxlQU5GO0lBT0VDLFdBUEYsR0FXSVAsS0FYSixDQU9FTyxXQVBGO0lBUUVDLGdCQVJGLEdBV0lSLEtBWEosQ0FRRVEsZ0JBUkY7SUFT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