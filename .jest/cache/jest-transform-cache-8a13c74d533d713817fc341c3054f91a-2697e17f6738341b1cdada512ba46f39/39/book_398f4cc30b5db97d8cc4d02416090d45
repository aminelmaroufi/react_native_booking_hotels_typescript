d8d07b7fc3b5521b24c19b3e264e6207
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = reducer;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _actionTypes = _interopRequireDefault(require("../../utils/actionTypes"));
var _card = require("../../models/card");
var emptyHotel = {
  _id: '',
  name: '',
  short_address: '',
  address: '',
  rating: 0,
  location: '',
  type: '',
  main_picture: '',
  second_picture: '',
  rooms: []
};
var emptyRoom = {
  _id: '',
  title: '',
  advantage: '',
  price: 0,
  room_picture: ''
};
var initialState = {
  book: {
    _id: '',
    hotel: emptyHotel,
    room: emptyRoom,
    check_in_date: null,
    check_out_date: null,
    night_numbers: 0,
    price: 0,
    card: _card.emptySecureCard
  },
  bookings: []
};
function reducer() {
  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;
  var action = arguments.length > 1 ? arguments[1] : undefined;
  switch (action.type) {
    case _actionTypes.default.SELECT_HOTEL:
      return (0, _extends2.default)({}, state, {
        book: (0, _extends2.default)({}, state.book, {
          hotel: action.payload.hotel
        })
      });
    case _actionTypes.default.CHECK_USER_SUCCESS:
      return (0, _extends2.default)({}, state, {
        book: (0, _extends2.default)({}, state.book, {
          card: action.payload.user.cards[0]
        })
      });
    case _actionTypes.default.UPDATE_RESERVATION:
      return (0, _extends2.default)({}, state, {
        book: action.payload.book
      });
    case _actionTypes.default.ADD_CARD_SUCCESS:
      return (0, _extends2.default)({}, state, {
        book: (0, _extends2.default)({}, state.book, {
          card: action.payload.card
        })
      });
    case _actionTypes.default.SET_DEFAULT_CARD:
      return (0, _extends2.default)({}, state, {
        book: (0, _extends2.default)({}, state.book, {
          card: action.payload.card
        })
      });
    case _actionTypes.default.CREATE_BOOKING_SUCCESS:
      var bookings = state.bookings;
      bookings.unshift(action.payload.book);
      return (0, _extends2.default)({}, state, {
        book: initialState.book,
        bookings: bookings
      });
    case _actionTypes.default.SET_BOOKINGS:
      return (0, _extends2.default)({}, state, {
        bookings: action.payload.bookings
      });
    default:
      return state;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYWN0aW9uVHlwZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jYXJkIiwiZW1wdHlIb3RlbCIsIl9pZCIsIm5hbWUiLCJzaG9ydF9hZGRyZXNzIiwiYWRkcmVzcyIsInJhdGluZyIsImxvY2F0aW9uIiwidHlwZSIsIm1haW5fcGljdHVyZSIsInNlY29uZF9waWN0dXJlIiwicm9vbXMiLCJlbXB0eVJvb20iLCJ0aXRsZSIsImFkdmFudGFnZSIsInByaWNlIiwicm9vbV9waWN0dXJlIiwiaW5pdGlhbFN0YXRlIiwiYm9vayIsImhvdGVsIiwicm9vbSIsImNoZWNrX2luX2RhdGUiLCJjaGVja19vdXRfZGF0ZSIsIm5pZ2h0X251bWJlcnMiLCJjYXJkIiwiZW1wdHlTZWN1cmVDYXJkIiwiYm9va2luZ3MiLCJyZWR1Y2VyIiwic3RhdGUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJhY3Rpb24iLCJBY3Rpb25UeXBlcyIsIlNFTEVDVF9IT1RFTCIsIl9leHRlbmRzMiIsImRlZmF1bHQiLCJwYXlsb2FkIiwiQ0hFQ0tfVVNFUl9TVUNDRVNTIiwidXNlciIsImNhcmRzIiwiVVBEQVRFX1JFU0VSVkFUSU9OIiwiQUREX0NBUkRfU1VDQ0VTUyIsIlNFVF9ERUZBVUxUX0NBUkQiLCJDUkVBVEVfQk9PS0lOR19TVUNDRVNTIiwidW5zaGlmdCIsIlNFVF9CT09LSU5HUyJdLCJzb3VyY2VzIjpbImJvb2sudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFjdGlvblR5cGVzIGZyb20gJy4uLy4uL3V0aWxzL2FjdGlvblR5cGVzJztcbmltcG9ydCB7SUhvdGVsLCBJUm9vbX0gZnJvbSAnLi4vLi4vbW9kZWxzJztcbmltcG9ydCB7ZW1wdHlTZWN1cmVDYXJkfSBmcm9tICcuLi8uLi9tb2RlbHMvY2FyZCc7XG5pbXBvcnQge0Jvb2tTdGF0ZSwgYm9va0FjdGlvbnN9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuY29uc3QgZW1wdHlIb3RlbDogSUhvdGVsID0ge1xuICBfaWQ6ICcnLFxuICBuYW1lOiAnJyxcbiAgc2hvcnRfYWRkcmVzczogJycsXG4gIGFkZHJlc3M6ICcnLFxuICByYXRpbmc6IDAsXG4gIGxvY2F0aW9uOiAnJyxcbiAgdHlwZTogJycsXG4gIG1haW5fcGljdHVyZTogJycsXG4gIHNlY29uZF9waWN0dXJlOiAnJyxcbiAgcm9vbXM6IFtdLFxufTtcblxuY29uc3QgZW1wdHlSb29tOiBJUm9vbSA9IHtcbiAgX2lkOiAnJyxcbiAgdGl0bGU6ICcnLFxuICBhZHZhbnRhZ2U6ICcnLFxuICBwcmljZTogMCxcbiAgcm9vbV9waWN0dXJlOiAnJyxcbn07XG5cbmNvbnN0IGluaXRpYWxTdGF0ZTogQm9va1N0YXRlID0ge1xuICBib29rOiB7XG4gICAgX2lkOiAnJyxcbiAgICBob3RlbDogZW1wdHlIb3RlbCxcbiAgICByb29tOiBlbXB0eVJvb20sXG4gICAgY2hlY2tfaW5fZGF0ZTogbnVsbCxcbiAgICBjaGVja19vdXRfZGF0ZTogbnVsbCxcbiAgICBuaWdodF9udW1iZXJzOiAwLFxuICAgIHByaWNlOiAwLFxuICAgIGNhcmQ6IGVtcHR5U2VjdXJlQ2FyZCxcbiAgfSxcbiAgYm9va2luZ3M6IFtdLFxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVkdWNlcihzdGF0ZSA9IGluaXRpYWxTdGF0ZSwgYWN0aW9uOiBib29rQWN0aW9ucykge1xuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5TRUxFQ1RfSE9URUw6XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYm9vazogey4uLnN0YXRlLmJvb2ssIGhvdGVsOiBhY3Rpb24ucGF5bG9hZC5ob3RlbH0sXG4gICAgICB9O1xuICAgIGNhc2UgQWN0aW9uVHlwZXMuQ0hFQ0tfVVNFUl9TVUNDRVNTOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2s6IHsuLi5zdGF0ZS5ib29rLCBjYXJkOiBhY3Rpb24ucGF5bG9hZC51c2VyLmNhcmRzWzBdfSxcbiAgICAgIH07XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5VUERBVEVfUkVTRVJWQVRJT046XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYm9vazogYWN0aW9uLnBheWxvYWQuYm9vayxcbiAgICAgIH07XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5BRERfQ0FSRF9TVUNDRVNTOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2s6IHsuLi5zdGF0ZS5ib29rLCBjYXJkOiBhY3Rpb24ucGF5bG9hZC5jYXJkfSxcbiAgICAgIH07XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5TRVRfREVGQVVMVF9DQVJEOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2s6IHsuLi5zdGF0ZS5ib29rLCBjYXJkOiBhY3Rpb24ucGF5bG9hZC5jYXJkfSxcbiAgICAgIH07XG4gICAgY2FzZSBBY3Rpb25UeXBlcy5DUkVBVEVfQk9PS0lOR19TVUNDRVNTOlxuICAgICAgbGV0IGJvb2tpbmdzID0gc3RhdGUuYm9va2luZ3M7XG4gICAgICBib29raW5ncy51bnNoaWZ0KGFjdGlvbi5wYXlsb2FkLmJvb2spO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2s6IGluaXRpYWxTdGF0ZS5ib29rLFxuICAgICAgICBib29raW5nczogYm9va2luZ3MsXG4gICAgICB9O1xuICAgIGNhc2UgQWN0aW9uVHlwZXMuU0VUX0JPT0tJTkdTOlxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGJvb2tpbmdzOiBhY3Rpb24ucGF5bG9hZC5ib29raW5ncyxcbiAgICAgIH07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLFlBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFDLEtBQUEsR0FBQUQsT0FBQTtBQUdBLElBQU1FLFVBQWtCLEdBQUc7RUFDekJDLEdBQUcsRUFBRSxFQUFFO0VBQ1BDLElBQUksRUFBRSxFQUFFO0VBQ1JDLGFBQWEsRUFBRSxFQUFFO0VBQ2pCQyxPQUFPLEVBQUUsRUFBRTtFQUNYQyxNQUFNLEVBQUUsQ0FBQztFQUNUQyxRQUFRLEVBQUUsRUFBRTtFQUNaQyxJQUFJLEVBQUUsRUFBRTtFQUNSQyxZQUFZLEVBQUUsRUFBRTtFQUNoQkMsY0FBYyxFQUFFLEVBQUU7RUFDbEJDLEtBQUssRUFBRTtBQUNULENBQUM7QUFFRCxJQUFNQyxTQUFnQixHQUFHO0VBQ3ZCVixHQUFHLEVBQUUsRUFBRTtFQUNQVyxLQUFLLEVBQUUsRUFBRTtFQUNUQyxTQUFTLEVBQUUsRUFBRTtFQUNiQyxLQUFLLEVBQUUsQ0FBQztFQUNSQyxZQUFZLEVBQUU7QUFDaEIsQ0FBQztBQUVELElBQU1DLFlBQXVCLEdBQUc7RUFDOUJDLElBQUksRUFBRTtJQUNKaEIsR0FBRyxFQUFFLEVBQUU7SUFDUGlCLEtBQUssRUFBRWxCLFVBQVU7SUFDakJtQixJQUFJLEVBQUVSLFNBQVM7SUFDZlMsYUFBYSxFQUFFLElBQUk7SUFDbkJDLGNBQWMsRUFBRSxJQUFJO0lBQ3BCQyxhQUFhLEVBQUUsQ0FBQztJQUNoQlIsS0FBSyxFQUFFLENBQUM7SUFDUlMsSUFBSSxFQUFFQztFQUNSLENBQUM7RUFDREMsUUFBUSxFQUFFO0FBQ1osQ0FBQztBQUVjLFNBQVNDLE9BQU9BLENBQUEsRUFBNEM7RUFBQSxJQUEzQ0MsS0FBSyxHQUFBQyxTQUFBLENBQUFDLE1BQUEsUUFBQUQsU0FBQSxRQUFBRSxTQUFBLEdBQUFGLFNBQUEsTUFBR1osWUFBWTtFQUFBLElBQUVlLE1BQW1CLEdBQUFILFNBQUEsQ0FBQUMsTUFBQSxPQUFBRCxTQUFBLE1BQUFFLFNBQUE7RUFDdkUsUUFBUUMsTUFBTSxDQUFDeEIsSUFBSTtJQUNqQixLQUFLeUIsb0JBQVcsQ0FBQ0MsWUFBWTtNQUMzQixXQUFBQyxTQUFBLENBQUFDLE9BQUEsTUFDS1IsS0FBSztRQUNSVixJQUFJLE1BQUFpQixTQUFBLENBQUFDLE9BQUEsTUFBTVIsS0FBSyxDQUFDVixJQUFJO1VBQUVDLEtBQUssRUFBRWEsTUFBTSxDQUFDSyxPQUFPLENBQUNsQjtRQUFLO01BQUM7SUFFdEQsS0FBS2Msb0JBQVcsQ0FBQ0ssa0JBQWtCO01BQ2pDLFdBQUFILFNBQUEsQ0FBQUMsT0FBQSxNQUNLUixLQUFLO1FBQ1JWLElBQUksTUFBQWlCLFNBQUEsQ0FBQUMsT0FBQSxNQUFNUixLQUFLLENBQUNWLElBQUk7VUFBRU0sSUFBSSxFQUFFUSxNQUFNLENBQUNLLE9BQU8sQ0FBQ0UsSUFBSSxDQUFDQyxLQUFLLENBQUMsQ0FBQztRQUFDO01BQUM7SUFFN0QsS0FBS1Asb0JBQVcsQ0FBQ1Esa0JBQWtCO01BQ2pDLFdBQUFOLFNBQUEsQ0FBQUMsT0FBQSxNQUNLUixLQUFLO1FBQ1JWLElBQUksRUFBRWMsTUFBTSxDQUFDSyxPQUFPLENBQUNuQjtNQUFJO0lBRTdCLEtBQUtlLG9CQUFXLENBQUNTLGdCQUFnQjtNQUMvQixXQUFBUCxTQUFBLENBQUFDLE9BQUEsTUFDS1IsS0FBSztRQUNSVixJQUFJLE1BQUFpQixTQUFBLENBQUFDLE9BQUEsTUFBTVIsS0FBSyxDQUFDVixJQUFJO1VBQUVNLElBQUksRUFBRVEsTUFBTSxDQUFDSyxPQUFPLENBQUNiO1FBQUk7TUFBQztJQUVwRCxLQUFLUyxvQkFBVyxDQUFDVSxnQkFBZ0I7TUFDL0IsV0FBQVIsU0FBQSxDQUFBQyxPQUFBLE1BQ0tSLEtBQUs7UUFDUlYsSUFBSSxNQUFBaUIsU0FBQSxDQUFBQyxPQUFBLE1BQU1SLEtBQUssQ0FBQ1YsSUFBSTtVQUFFTSxJQUFJLEVBQUVRLE1BQU0sQ0FBQ0ssT0FBTyxDQUFDYjtRQUFJO01BQUM7SUFFcEQsS0FBS1Msb0JBQVcsQ0FBQ1csc0JBQXNCO01BQ3JDLElBQUlsQixRQUFRLEdBQUdFLEtBQUssQ0FBQ0YsUUFBUTtNQUM3QkEsUUFBUSxDQUFDbUIsT0FBTyxDQUFDYixNQUFNLENBQUNLLE9BQU8sQ0FBQ25CLElBQUksQ0FBQztNQUNyQyxXQUFBaUIsU0FBQSxDQUFBQyxPQUFBLE1BQ0tSLEtBQUs7UUFDUlYsSUFBSSxFQUFFRCxZQUFZLENBQUNDLElBQUk7UUFDdkJRLFFBQVEsRUFBRUE7TUFBUTtJQUV0QixLQUFLTyxvQkFBVyxDQUFDYSxZQUFZO01BQzNCLFdBQUFYLFNBQUEsQ0FBQUMsT0FBQSxNQUNLUixLQUFLO1FBQ1JGLFFBQVEsRUFBRU0sTUFBTSxDQUFDSyxPQUFPLENBQUNYO01BQVE7SUFFckM7TUFDRSxPQUFPRSxLQUFLO0VBQUM7QUFFbkIifQ==