024030668efe612b5e9b69008a09eec6
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _require = require('./AnimatedEvent'),
  AnimatedEvent = _require.AnimatedEvent,
  attachNativeEvent = _require.attachNativeEvent;
var AnimatedAddition = require('./nodes/AnimatedAddition');
var AnimatedDiffClamp = require('./nodes/AnimatedDiffClamp');
var AnimatedDivision = require('./nodes/AnimatedDivision');
var AnimatedInterpolation = require('./nodes/AnimatedInterpolation');
var AnimatedModulo = require('./nodes/AnimatedModulo');
var AnimatedMultiplication = require('./nodes/AnimatedMultiplication');
var AnimatedNode = require('./nodes/AnimatedNode');
var AnimatedProps = require('./nodes/AnimatedProps');
var AnimatedSubtraction = require('./nodes/AnimatedSubtraction');
var AnimatedTracking = require('./nodes/AnimatedTracking');
var AnimatedValue = require('./nodes/AnimatedValue');
var AnimatedValueXY = require('./nodes/AnimatedValueXY');
var DecayAnimation = require('./animations/DecayAnimation');
var SpringAnimation = require('./animations/SpringAnimation');
var TimingAnimation = require('./animations/TimingAnimation');
var createAnimatedComponent = require('./createAnimatedComponent');
var add = function add(a, b) {
  return new AnimatedAddition(a, b);
};
var subtract = function subtract(a, b) {
  return new AnimatedSubtraction(a, b);
};
var divide = function divide(a, b) {
  return new AnimatedDivision(a, b);
};
var multiply = function multiply(a, b) {
  return new AnimatedMultiplication(a, b);
};
var modulo = function modulo(a, modulus) {
  return new AnimatedModulo(a, modulus);
};
var diffClamp = function diffClamp(a, min, max) {
  return new AnimatedDiffClamp(a, min, max);
};
var _combineCallbacks = function _combineCallbacks(callback, config) {
  if (callback && config.onComplete) {
    return function () {
      config.onComplete && config.onComplete.apply(config, arguments);
      callback && callback.apply(void 0, arguments);
    };
  } else {
    return callback || config.onComplete;
  }
};
var maybeVectorAnim = function maybeVectorAnim(value, config, anim) {
  if (value instanceof AnimatedValueXY) {
    var configX = (0, _extends2.default)({}, config);
    var configY = (0, _extends2.default)({}, config);
    for (var key in config) {
      var _config$key = config[key],
        x = _config$key.x,
        y = _config$key.y;
      if (x !== undefined && y !== undefined) {
        configX[key] = x;
        configY[key] = y;
      }
    }
    var aX = anim(value.x, configX);
    var aY = anim(value.y, configY);
    return parallel([aX, aY], {
      stopTogether: false
    });
  }
  return null;
};
var spring = function spring(value, config) {
  var _start = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    if (configuration.toValue instanceof AnimatedNode) {
      singleValue.track(new AnimatedTracking(singleValue, configuration.toValue, SpringAnimation, singleConfig, callback));
    } else {
      singleValue.animate(new SpringAnimation(singleConfig), callback);
    }
  };
  return maybeVectorAnim(value, config, spring) || {
    start: function start(callback) {
      _start(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = (0, _extends2.default)({}, config, {
        iterations: iterations
      });
      _start(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};
var timing = function timing(value, config) {
  var _start2 = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    if (configuration.toValue instanceof AnimatedNode) {
      singleValue.track(new AnimatedTracking(singleValue, configuration.toValue, TimingAnimation, singleConfig, callback));
    } else {
      singleValue.animate(new TimingAnimation(singleConfig), callback);
    }
  };
  return maybeVectorAnim(value, config, timing) || {
    start: function start(callback) {
      _start2(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = (0, _extends2.default)({}, config, {
        iterations: iterations
      });
      _start2(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};
var decay = function decay(value, config) {
  var _start3 = function start(animatedValue, configuration, callback) {
    callback = _combineCallbacks(callback, configuration);
    var singleValue = animatedValue;
    var singleConfig = configuration;
    singleValue.stopTracking();
    singleValue.animate(new DecayAnimation(singleConfig), callback);
  };
  return maybeVectorAnim(value, config, decay) || {
    start: function start(callback) {
      _start3(value, config, callback);
    },
    stop: function stop() {
      value.stopAnimation();
    },
    reset: function reset() {
      value.resetAnimation();
    },
    _startNativeLoop: function _startNativeLoop(iterations) {
      var singleConfig = (0, _extends2.default)({}, config, {
        iterations: iterations
      });
      _start3(value, singleConfig);
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return config.useNativeDriver || false;
    }
  };
};
var sequence = function sequence(animations) {
  var current = 0;
  return {
    start: function start(callback) {
      var onComplete = function onComplete(result) {
        if (!result.finished) {
          callback && callback(result);
          return;
        }
        current++;
        if (current === animations.length) {
          callback && callback(result);
          return;
        }
        animations[current].start(onComplete);
      };
      if (animations.length === 0) {
        callback && callback({
          finished: true
        });
      } else {
        animations[current].start(onComplete);
      }
    },
    stop: function stop() {
      if (current < animations.length) {
        animations[current].stop();
      }
    },
    reset: function reset() {
      animations.forEach(function (animation, idx) {
        if (idx <= current) {
          animation.reset();
        }
      });
      current = 0;
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.sequence animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return false;
    }
  };
};
var parallel = function parallel(animations, config) {
  var doneCount = 0;
  var hasEnded = {};
  var stopTogether = !(config && config.stopTogether === false);
  var result = {
    start: function start(callback) {
      if (doneCount === animations.length) {
        callback && callback({
          finished: true
        });
        return;
      }
      animations.forEach(function (animation, idx) {
        var cb = function cb(endResult) {
          hasEnded[idx] = true;
          doneCount++;
          if (doneCount === animations.length) {
            doneCount = 0;
            callback && callback(endResult);
            return;
          }
          if (!endResult.finished && stopTogether) {
            result.stop();
          }
        };
        if (!animation) {
          cb({
            finished: true
          });
        } else {
          animation.start(cb);
        }
      });
    },
    stop: function stop() {
      animations.forEach(function (animation, idx) {
        !hasEnded[idx] && animation.stop();
        hasEnded[idx] = true;
      });
    },
    reset: function reset() {
      animations.forEach(function (animation, idx) {
        animation.reset();
        hasEnded[idx] = false;
        doneCount = 0;
      });
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.parallel animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return false;
    }
  };
  return result;
};
var delay = function delay(time) {
  return timing(new AnimatedValue(0), {
    toValue: 0,
    delay: time,
    duration: 0,
    useNativeDriver: false
  });
};
var stagger = function stagger(time, animations) {
  return parallel(animations.map(function (animation, i) {
    return sequence([delay(time * i), animation]);
  }));
};
var loop = function loop(animation) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
    _ref$iterations = _ref.iterations,
    iterations = _ref$iterations === void 0 ? -1 : _ref$iterations,
    _ref$resetBeforeItera = _ref.resetBeforeIteration,
    resetBeforeIteration = _ref$resetBeforeItera === void 0 ? true : _ref$resetBeforeItera;
  var isFinished = false;
  var iterationsSoFar = 0;
  return {
    start: function start(callback) {
      var restart = function restart() {
        var result = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
          finished: true
        };
        if (isFinished || iterationsSoFar === iterations || result.finished === false) {
          callback && callback(result);
        } else {
          iterationsSoFar++;
          resetBeforeIteration && animation.reset();
          animation.start(restart);
        }
      };
      if (!animation || iterations === 0) {
        callback && callback({
          finished: true
        });
      } else {
        if (animation._isUsingNativeDriver()) {
          animation._startNativeLoop(iterations);
        } else {
          restart();
        }
      }
    },
    stop: function stop() {
      isFinished = true;
      animation.stop();
    },
    reset: function reset() {
      iterationsSoFar = 0;
      isFinished = false;
      animation.reset();
    },
    _startNativeLoop: function _startNativeLoop() {
      throw new Error('Loops run using the native driver cannot contain Animated.loop animations');
    },
    _isUsingNativeDriver: function _isUsingNativeDriver() {
      return animation._isUsingNativeDriver();
    }
  };
};
function forkEvent(event, listener) {
  if (!event) {
    return listener;
  } else if (event instanceof AnimatedEvent) {
    event.__addListener(listener);
    return event;
  } else {
    return function () {
      typeof event === 'function' && event.apply(void 0, arguments);
      listener.apply(void 0, arguments);
    };
  }
}
function unforkEvent(event, listener) {
  if (event && event instanceof AnimatedEvent) {
    event.__removeListener(listener);
  }
}
var event = function event(argMapping, config) {
  var animatedEvent = new AnimatedEvent(argMapping, config);
  if (animatedEvent.__isNative) {
    return animatedEvent;
  } else {
    return animatedEvent.__getHandler();
  }
};
module.exports = {
  Value: AnimatedValue,
  ValueXY: AnimatedValueXY,
  Interpolation: AnimatedInterpolation,
  Node: AnimatedNode,
  decay: decay,
  timing: timing,
  spring: spring,
  add: add,
  subtract: subtract,
  divide: divide,
  multiply: multiply,
  modulo: modulo,
  diffClamp: diffClamp,
  delay: delay,
  sequence: sequence,
  parallel: parallel,
  stagger: stagger,
  loop: loop,
  event: event,
  createAnimatedComponent: createAnimatedComponent,
  attachNativeEvent: attachNativeEvent,
  forkEvent: forkEvent,
  unforkEvent: unforkEvent,
  Event: AnimatedEvent
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9leHRlbmRzMiIsIl9yZXF1aXJlIiwiQW5pbWF0ZWRFdmVudCIsImF0dGFjaE5hdGl2ZUV2ZW50IiwiQW5pbWF0ZWRBZGRpdGlvbiIsIkFuaW1hdGVkRGlmZkNsYW1wIiwiQW5pbWF0ZWREaXZpc2lvbiIsIkFuaW1hdGVkSW50ZXJwb2xhdGlvbiIsIkFuaW1hdGVkTW9kdWxvIiwiQW5pbWF0ZWRNdWx0aXBsaWNhdGlvbiIsIkFuaW1hdGVkTm9kZSIsIkFuaW1hdGVkUHJvcHMiLCJBbmltYXRlZFN1YnRyYWN0aW9uIiwiQW5pbWF0ZWRUcmFja2luZyIsIkFuaW1hdGVkVmFsdWUiLCJBbmltYXRlZFZhbHVlWFkiLCJEZWNheUFuaW1hdGlvbiIsIlNwcmluZ0FuaW1hdGlvbiIsIlRpbWluZ0FuaW1hdGlvbiIsImNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50IiwiYWRkIiwiYSIsImIiLCJzdWJ0cmFjdCIsImRpdmlkZSIsIm11bHRpcGx5IiwibW9kdWxvIiwibW9kdWx1cyIsImRpZmZDbGFtcCIsIm1pbiIsIm1heCIsIl9jb21iaW5lQ2FsbGJhY2tzIiwiY2FsbGJhY2siLCJjb25maWciLCJvbkNvbXBsZXRlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJtYXliZVZlY3RvckFuaW0iLCJ2YWx1ZSIsImFuaW0iLCJjb25maWdYIiwiZGVmYXVsdCIsImNvbmZpZ1kiLCJrZXkiLCJfY29uZmlnJGtleSIsIngiLCJ5IiwidW5kZWZpbmVkIiwiYVgiLCJhWSIsInBhcmFsbGVsIiwic3RvcFRvZ2V0aGVyIiwic3ByaW5nIiwic3RhcnQiLCJhbmltYXRlZFZhbHVlIiwiY29uZmlndXJhdGlvbiIsInNpbmdsZVZhbHVlIiwic2luZ2xlQ29uZmlnIiwic3RvcFRyYWNraW5nIiwidG9WYWx1ZSIsInRyYWNrIiwiYW5pbWF0ZSIsInN0b3AiLCJzdG9wQW5pbWF0aW9uIiwicmVzZXQiLCJyZXNldEFuaW1hdGlvbiIsIl9zdGFydE5hdGl2ZUxvb3AiLCJpdGVyYXRpb25zIiwiX2lzVXNpbmdOYXRpdmVEcml2ZXIiLCJ1c2VOYXRpdmVEcml2ZXIiLCJ0aW1pbmciLCJkZWNheSIsInNlcXVlbmNlIiwiYW5pbWF0aW9ucyIsImN1cnJlbnQiLCJyZXN1bHQiLCJmaW5pc2hlZCIsImxlbmd0aCIsImZvckVhY2giLCJhbmltYXRpb24iLCJpZHgiLCJFcnJvciIsImRvbmVDb3VudCIsImhhc0VuZGVkIiwiY2IiLCJlbmRSZXN1bHQiLCJkZWxheSIsInRpbWUiLCJkdXJhdGlvbiIsInN0YWdnZXIiLCJtYXAiLCJpIiwibG9vcCIsIl9yZWYiLCJfcmVmJGl0ZXJhdGlvbnMiLCJfcmVmJHJlc2V0QmVmb3JlSXRlcmEiLCJyZXNldEJlZm9yZUl0ZXJhdGlvbiIsImlzRmluaXNoZWQiLCJpdGVyYXRpb25zU29GYXIiLCJyZXN0YXJ0IiwiZm9ya0V2ZW50IiwiZXZlbnQiLCJsaXN0ZW5lciIsIl9fYWRkTGlzdGVuZXIiLCJ1bmZvcmtFdmVudCIsIl9fcmVtb3ZlTGlzdGVuZXIiLCJhcmdNYXBwaW5nIiwiYW5pbWF0ZWRFdmVudCIsIl9faXNOYXRpdmUiLCJfX2dldEhhbmRsZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwiVmFsdWUiLCJWYWx1ZVhZIiwiSW50ZXJwb2xhdGlvbiIsIk5vZGUiLCJFdmVudCJdLCJzb3VyY2VzIjpbIkFuaW1hdGVkSW1wbGVtZW50YXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3Qge0FuaW1hdGVkRXZlbnQsIGF0dGFjaE5hdGl2ZUV2ZW50fSA9IHJlcXVpcmUoJy4vQW5pbWF0ZWRFdmVudCcpO1xuY29uc3QgQW5pbWF0ZWRBZGRpdGlvbiA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRBZGRpdGlvbicpO1xuY29uc3QgQW5pbWF0ZWREaWZmQ2xhbXAgPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkRGlmZkNsYW1wJyk7XG5jb25zdCBBbmltYXRlZERpdmlzaW9uID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZERpdmlzaW9uJyk7XG5jb25zdCBBbmltYXRlZEludGVycG9sYXRpb24gPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkSW50ZXJwb2xhdGlvbicpO1xuY29uc3QgQW5pbWF0ZWRNb2R1bG8gPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkTW9kdWxvJyk7XG5jb25zdCBBbmltYXRlZE11bHRpcGxpY2F0aW9uID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZE11bHRpcGxpY2F0aW9uJyk7XG5jb25zdCBBbmltYXRlZE5vZGUgPSByZXF1aXJlKCcuL25vZGVzL0FuaW1hdGVkTm9kZScpO1xuY29uc3QgQW5pbWF0ZWRQcm9wcyA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRQcm9wcycpO1xuY29uc3QgQW5pbWF0ZWRTdWJ0cmFjdGlvbiA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRTdWJ0cmFjdGlvbicpO1xuY29uc3QgQW5pbWF0ZWRUcmFja2luZyA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRUcmFja2luZycpO1xuY29uc3QgQW5pbWF0ZWRWYWx1ZSA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRWYWx1ZScpO1xuY29uc3QgQW5pbWF0ZWRWYWx1ZVhZID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZFZhbHVlWFknKTtcbmNvbnN0IERlY2F5QW5pbWF0aW9uID0gcmVxdWlyZSgnLi9hbmltYXRpb25zL0RlY2F5QW5pbWF0aW9uJyk7XG5jb25zdCBTcHJpbmdBbmltYXRpb24gPSByZXF1aXJlKCcuL2FuaW1hdGlvbnMvU3ByaW5nQW5pbWF0aW9uJyk7XG5jb25zdCBUaW1pbmdBbmltYXRpb24gPSByZXF1aXJlKCcuL2FuaW1hdGlvbnMvVGltaW5nQW5pbWF0aW9uJyk7XG5cbmNvbnN0IGNyZWF0ZUFuaW1hdGVkQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9jcmVhdGVBbmltYXRlZENvbXBvbmVudCcpO1xuXG5pbXBvcnQgdHlwZSB7XG4gIEFuaW1hdGlvbkNvbmZpZyxcbiAgRW5kQ2FsbGJhY2ssXG4gIEVuZFJlc3VsdCxcbn0gZnJvbSAnLi9hbmltYXRpb25zL0FuaW1hdGlvbic7XG5pbXBvcnQgdHlwZSB7VGltaW5nQW5pbWF0aW9uQ29uZmlnfSBmcm9tICcuL2FuaW1hdGlvbnMvVGltaW5nQW5pbWF0aW9uJztcbmltcG9ydCB0eXBlIHtEZWNheUFuaW1hdGlvbkNvbmZpZ30gZnJvbSAnLi9hbmltYXRpb25zL0RlY2F5QW5pbWF0aW9uJztcbmltcG9ydCB0eXBlIHtTcHJpbmdBbmltYXRpb25Db25maWd9IGZyb20gJy4vYW5pbWF0aW9ucy9TcHJpbmdBbmltYXRpb24nO1xuaW1wb3J0IHR5cGUge01hcHBpbmcsIEV2ZW50Q29uZmlnfSBmcm9tICcuL0FuaW1hdGVkRXZlbnQnO1xuXG5leHBvcnQgdHlwZSBDb21wb3NpdGVBbmltYXRpb24gPSB7XG4gIHN0YXJ0OiAoY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spID0+IHZvaWQsXG4gIHN0b3A6ICgpID0+IHZvaWQsXG4gIHJlc2V0OiAoKSA9PiB2b2lkLFxuICBfc3RhcnROYXRpdmVMb29wOiAoaXRlcmF0aW9ucz86IG51bWJlcikgPT4gdm9pZCxcbiAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6ICgpID0+IGJvb2xlYW4sXG4gIC4uLlxufTtcblxuY29uc3QgYWRkID0gZnVuY3Rpb24oXG4gIGE6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbiAgYjogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuKTogQW5pbWF0ZWRBZGRpdGlvbiB7XG4gIHJldHVybiBuZXcgQW5pbWF0ZWRBZGRpdGlvbihhLCBiKTtcbn07XG5cbmNvbnN0IHN1YnRyYWN0ID0gZnVuY3Rpb24oXG4gIGE6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbiAgYjogQW5pbWF0ZWROb2RlIHwgbnVtYmVyLFxuKTogQW5pbWF0ZWRTdWJ0cmFjdGlvbiB7XG4gIHJldHVybiBuZXcgQW5pbWF0ZWRTdWJ0cmFjdGlvbihhLCBiKTtcbn07XG5cbmNvbnN0IGRpdmlkZSA9IGZ1bmN0aW9uKFxuICBhOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4gIGI6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbik6IEFuaW1hdGVkRGl2aXNpb24ge1xuICByZXR1cm4gbmV3IEFuaW1hdGVkRGl2aXNpb24oYSwgYik7XG59O1xuXG5jb25zdCBtdWx0aXBseSA9IGZ1bmN0aW9uKFxuICBhOiBBbmltYXRlZE5vZGUgfCBudW1iZXIsXG4gIGI6IEFuaW1hdGVkTm9kZSB8IG51bWJlcixcbik6IEFuaW1hdGVkTXVsdGlwbGljYXRpb24ge1xuICByZXR1cm4gbmV3IEFuaW1hdGVkTXVsdGlwbGljYXRpb24oYSwgYik7XG59O1xuXG5jb25zdCBtb2R1bG8gPSBmdW5jdGlvbihhOiBBbmltYXRlZE5vZGUsIG1vZHVsdXM6IG51bWJlcik6IEFuaW1hdGVkTW9kdWxvIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZE1vZHVsbyhhLCBtb2R1bHVzKTtcbn07XG5cbmNvbnN0IGRpZmZDbGFtcCA9IGZ1bmN0aW9uKFxuICBhOiBBbmltYXRlZE5vZGUsXG4gIG1pbjogbnVtYmVyLFxuICBtYXg6IG51bWJlcixcbik6IEFuaW1hdGVkRGlmZkNsYW1wIHtcbiAgcmV0dXJuIG5ldyBBbmltYXRlZERpZmZDbGFtcChhLCBtaW4sIG1heCk7XG59O1xuXG5jb25zdCBfY29tYmluZUNhbGxiYWNrcyA9IGZ1bmN0aW9uKFxuICBjYWxsYmFjazogP0VuZENhbGxiYWNrLFxuICBjb25maWc6IHsuLi5BbmltYXRpb25Db25maWcsIC4uLn0sXG4pIHtcbiAgaWYgKGNhbGxiYWNrICYmIGNvbmZpZy5vbkNvbXBsZXRlKSB7XG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICBjb25maWcub25Db21wbGV0ZSAmJiBjb25maWcub25Db21wbGV0ZSguLi5hcmdzKTtcbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKC4uLmFyZ3MpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNhbGxiYWNrIHx8IGNvbmZpZy5vbkNvbXBsZXRlO1xuICB9XG59O1xuXG5jb25zdCBtYXliZVZlY3RvckFuaW0gPSBmdW5jdGlvbihcbiAgdmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gIGNvbmZpZzogT2JqZWN0LFxuICBhbmltOiAodmFsdWU6IEFuaW1hdGVkVmFsdWUsIGNvbmZpZzogT2JqZWN0KSA9PiBDb21wb3NpdGVBbmltYXRpb24sXG4pOiA/Q29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWRWYWx1ZVhZKSB7XG4gICAgY29uc3QgY29uZmlnWCA9IHsuLi5jb25maWd9O1xuICAgIGNvbnN0IGNvbmZpZ1kgPSB7Li4uY29uZmlnfTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBjb25maWcpIHtcbiAgICAgIGNvbnN0IHt4LCB5fSA9IGNvbmZpZ1trZXldO1xuICAgICAgaWYgKHggIT09IHVuZGVmaW5lZCAmJiB5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uZmlnWFtrZXldID0geDtcbiAgICAgICAgY29uZmlnWVtrZXldID0geTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYVggPSBhbmltKCh2YWx1ZTogQW5pbWF0ZWRWYWx1ZVhZKS54LCBjb25maWdYKTtcbiAgICBjb25zdCBhWSA9IGFuaW0oKHZhbHVlOiBBbmltYXRlZFZhbHVlWFkpLnksIGNvbmZpZ1kpO1xuICAgIC8vIFdlIHVzZSBgc3RvcFRvZ2V0aGVyOiBmYWxzZWAgaGVyZSBiZWNhdXNlIG90aGVyd2lzZSB0cmFja2luZyB3aWxsIGJyZWFrXG4gICAgLy8gYmVjYXVzZSB0aGUgc2Vjb25kIGFuaW1hdGlvbiB3aWxsIGdldCBzdG9wcGVkIGJlZm9yZSBpdCBjYW4gdXBkYXRlLlxuICAgIHJldHVybiBwYXJhbGxlbChbYVgsIGFZXSwge3N0b3BUb2dldGhlcjogZmFsc2V9KTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmNvbnN0IHNwcmluZyA9IGZ1bmN0aW9uKFxuICB2YWx1ZTogQW5pbWF0ZWRWYWx1ZSB8IEFuaW1hdGVkVmFsdWVYWSxcbiAgY29uZmlnOiBTcHJpbmdBbmltYXRpb25Db25maWcsXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBjb25zdCBzdGFydCA9IGZ1bmN0aW9uKFxuICAgIGFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gICAgY29uZmlndXJhdGlvbjogU3ByaW5nQW5pbWF0aW9uQ29uZmlnLFxuICAgIGNhbGxiYWNrPzogP0VuZENhbGxiYWNrLFxuICApOiB2b2lkIHtcbiAgICBjYWxsYmFjayA9IF9jb21iaW5lQ2FsbGJhY2tzKGNhbGxiYWNrLCBjb25maWd1cmF0aW9uKTtcbiAgICBjb25zdCBzaW5nbGVWYWx1ZTogYW55ID0gYW5pbWF0ZWRWYWx1ZTtcbiAgICBjb25zdCBzaW5nbGVDb25maWc6IGFueSA9IGNvbmZpZ3VyYXRpb247XG4gICAgc2luZ2xlVmFsdWUuc3RvcFRyYWNraW5nKCk7XG4gICAgaWYgKGNvbmZpZ3VyYXRpb24udG9WYWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgc2luZ2xlVmFsdWUudHJhY2soXG4gICAgICAgIG5ldyBBbmltYXRlZFRyYWNraW5nKFxuICAgICAgICAgIHNpbmdsZVZhbHVlLFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb24udG9WYWx1ZSxcbiAgICAgICAgICBTcHJpbmdBbmltYXRpb24sXG4gICAgICAgICAgc2luZ2xlQ29uZmlnLFxuICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2luZ2xlVmFsdWUuYW5pbWF0ZShuZXcgU3ByaW5nQW5pbWF0aW9uKHNpbmdsZUNvbmZpZyksIGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiAoXG4gICAgbWF5YmVWZWN0b3JBbmltKHZhbHVlLCBjb25maWcsIHNwcmluZykgfHwge1xuICAgICAgc3RhcnQ6IGZ1bmN0aW9uKGNhbGxiYWNrPzogP0VuZENhbGxiYWNrKTogdm9pZCB7XG4gICAgICAgIHN0YXJ0KHZhbHVlLCBjb25maWcsIGNhbGxiYWNrKTtcbiAgICAgIH0sXG5cbiAgICAgIHN0b3A6IGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgICAgICB2YWx1ZS5zdG9wQW5pbWF0aW9uKCk7XG4gICAgICB9LFxuXG4gICAgICByZXNldDogZnVuY3Rpb24oKTogdm9pZCB7XG4gICAgICAgIHZhbHVlLnJlc2V0QW5pbWF0aW9uKCk7XG4gICAgICB9LFxuXG4gICAgICBfc3RhcnROYXRpdmVMb29wOiBmdW5jdGlvbihpdGVyYXRpb25zPzogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNpbmdsZUNvbmZpZyA9IHsuLi5jb25maWcsIGl0ZXJhdGlvbnN9O1xuICAgICAgICBzdGFydCh2YWx1ZSwgc2luZ2xlQ29uZmlnKTtcbiAgICAgIH0sXG5cbiAgICAgIF9pc1VzaW5nTmF0aXZlRHJpdmVyOiBmdW5jdGlvbigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGNvbmZpZy51c2VOYXRpdmVEcml2ZXIgfHwgZmFsc2U7XG4gICAgICB9LFxuICAgIH1cbiAgKTtcbn07XG5cbmNvbnN0IHRpbWluZyA9IGZ1bmN0aW9uKFxuICB2YWx1ZTogQW5pbWF0ZWRWYWx1ZSB8IEFuaW1hdGVkVmFsdWVYWSxcbiAgY29uZmlnOiBUaW1pbmdBbmltYXRpb25Db25maWcsXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBjb25zdCBzdGFydCA9IGZ1bmN0aW9uKFxuICAgIGFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gICAgY29uZmlndXJhdGlvbjogVGltaW5nQW5pbWF0aW9uQ29uZmlnLFxuICAgIGNhbGxiYWNrPzogP0VuZENhbGxiYWNrLFxuICApOiB2b2lkIHtcbiAgICBjYWxsYmFjayA9IF9jb21iaW5lQ2FsbGJhY2tzKGNhbGxiYWNrLCBjb25maWd1cmF0aW9uKTtcbiAgICBjb25zdCBzaW5nbGVWYWx1ZTogYW55ID0gYW5pbWF0ZWRWYWx1ZTtcbiAgICBjb25zdCBzaW5nbGVDb25maWc6IGFueSA9IGNvbmZpZ3VyYXRpb247XG4gICAgc2luZ2xlVmFsdWUuc3RvcFRyYWNraW5nKCk7XG4gICAgaWYgKGNvbmZpZ3VyYXRpb24udG9WYWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkTm9kZSkge1xuICAgICAgc2luZ2xlVmFsdWUudHJhY2soXG4gICAgICAgIG5ldyBBbmltYXRlZFRyYWNraW5nKFxuICAgICAgICAgIHNpbmdsZVZhbHVlLFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb24udG9WYWx1ZSxcbiAgICAgICAgICBUaW1pbmdBbmltYXRpb24sXG4gICAgICAgICAgc2luZ2xlQ29uZmlnLFxuICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICApLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2luZ2xlVmFsdWUuYW5pbWF0ZShuZXcgVGltaW5nQW5pbWF0aW9uKHNpbmdsZUNvbmZpZyksIGNhbGxiYWNrKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICBtYXliZVZlY3RvckFuaW0odmFsdWUsIGNvbmZpZywgdGltaW5nKSB8fCB7XG4gICAgICBzdGFydDogZnVuY3Rpb24oY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spOiB2b2lkIHtcbiAgICAgICAgc3RhcnQodmFsdWUsIGNvbmZpZywgY2FsbGJhY2spO1xuICAgICAgfSxcblxuICAgICAgc3RvcDogZnVuY3Rpb24oKTogdm9pZCB7XG4gICAgICAgIHZhbHVlLnN0b3BBbmltYXRpb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIHJlc2V0OiBmdW5jdGlvbigpOiB2b2lkIHtcbiAgICAgICAgdmFsdWUucmVzZXRBbmltYXRpb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIF9zdGFydE5hdGl2ZUxvb3A6IGZ1bmN0aW9uKGl0ZXJhdGlvbnM/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc2luZ2xlQ29uZmlnID0gey4uLmNvbmZpZywgaXRlcmF0aW9uc307XG4gICAgICAgIHN0YXJ0KHZhbHVlLCBzaW5nbGVDb25maWcpO1xuICAgICAgfSxcblxuICAgICAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gY29uZmlnLnVzZU5hdGl2ZURyaXZlciB8fCBmYWxzZTtcbiAgICAgIH0sXG4gICAgfVxuICApO1xufTtcblxuY29uc3QgZGVjYXkgPSBmdW5jdGlvbihcbiAgdmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gIGNvbmZpZzogRGVjYXlBbmltYXRpb25Db25maWcsXG4pOiBDb21wb3NpdGVBbmltYXRpb24ge1xuICBjb25zdCBzdGFydCA9IGZ1bmN0aW9uKFxuICAgIGFuaW1hdGVkVmFsdWU6IEFuaW1hdGVkVmFsdWUgfCBBbmltYXRlZFZhbHVlWFksXG4gICAgY29uZmlndXJhdGlvbjogRGVjYXlBbmltYXRpb25Db25maWcsXG4gICAgY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2ssXG4gICk6IHZvaWQge1xuICAgIGNhbGxiYWNrID0gX2NvbWJpbmVDYWxsYmFja3MoY2FsbGJhY2ssIGNvbmZpZ3VyYXRpb24pO1xuICAgIGNvbnN0IHNpbmdsZVZhbHVlOiBhbnkgPSBhbmltYXRlZFZhbHVlO1xuICAgIGNvbnN0IHNpbmdsZUNvbmZpZzogYW55ID0gY29uZmlndXJhdGlvbjtcbiAgICBzaW5nbGVWYWx1ZS5zdG9wVHJhY2tpbmcoKTtcbiAgICBzaW5nbGVWYWx1ZS5hbmltYXRlKG5ldyBEZWNheUFuaW1hdGlvbihzaW5nbGVDb25maWcpLCBjYWxsYmFjayk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICBtYXliZVZlY3RvckFuaW0odmFsdWUsIGNvbmZpZywgZGVjYXkpIHx8IHtcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbihjYWxsYmFjaz86ID9FbmRDYWxsYmFjayk6IHZvaWQge1xuICAgICAgICBzdGFydCh2YWx1ZSwgY29uZmlnLCBjYWxsYmFjayk7XG4gICAgICB9LFxuXG4gICAgICBzdG9wOiBmdW5jdGlvbigpOiB2b2lkIHtcbiAgICAgICAgdmFsdWUuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgfSxcblxuICAgICAgcmVzZXQ6IGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgICAgICB2YWx1ZS5yZXNldEFuaW1hdGlvbigpO1xuICAgICAgfSxcblxuICAgICAgX3N0YXJ0TmF0aXZlTG9vcDogZnVuY3Rpb24oaXRlcmF0aW9ucz86IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCBzaW5nbGVDb25maWcgPSB7Li4uY29uZmlnLCBpdGVyYXRpb25zfTtcbiAgICAgICAgc3RhcnQodmFsdWUsIHNpbmdsZUNvbmZpZyk7XG4gICAgICB9LFxuXG4gICAgICBfaXNVc2luZ05hdGl2ZURyaXZlcjogZnVuY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBjb25maWcudXNlTmF0aXZlRHJpdmVyIHx8IGZhbHNlO1xuICAgICAgfSxcbiAgICB9XG4gICk7XG59O1xuXG5jb25zdCBzZXF1ZW5jZSA9IGZ1bmN0aW9uKFxuICBhbmltYXRpb25zOiBBcnJheTxDb21wb3NpdGVBbmltYXRpb24+LFxuKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgbGV0IGN1cnJlbnQgPSAwO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBmdW5jdGlvbihjYWxsYmFjaz86ID9FbmRDYWxsYmFjaykge1xuICAgICAgY29uc3Qgb25Db21wbGV0ZSA9IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICBpZiAoIXJlc3VsdC5maW5pc2hlZCkge1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudCsrO1xuXG4gICAgICAgIGlmIChjdXJyZW50ID09PSBhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYW5pbWF0aW9uc1tjdXJyZW50XS5zdGFydChvbkNvbXBsZXRlKTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChhbmltYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh7ZmluaXNoZWQ6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuaW1hdGlvbnNbY3VycmVudF0uc3RhcnQob25Db21wbGV0ZSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHN0b3A6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGN1cnJlbnQgPCBhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICBhbmltYXRpb25zW2N1cnJlbnRdLnN0b3AoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb24sIGlkeCkgPT4ge1xuICAgICAgICBpZiAoaWR4IDw9IGN1cnJlbnQpIHtcbiAgICAgICAgICBhbmltYXRpb24ucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjdXJyZW50ID0gMDtcbiAgICB9LFxuXG4gICAgX3N0YXJ0TmF0aXZlTG9vcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdMb29wcyBydW4gdXNpbmcgdGhlIG5hdGl2ZSBkcml2ZXIgY2Fubm90IGNvbnRhaW4gQW5pbWF0ZWQuc2VxdWVuY2UgYW5pbWF0aW9ucycsXG4gICAgICApO1xuICAgIH0sXG5cbiAgICBfaXNVc2luZ05hdGl2ZURyaXZlcjogZnVuY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgfTtcbn07XG5cbnR5cGUgUGFyYWxsZWxDb25maWcgPSB7XG4gIC8vIElmIG9uZSBpcyBzdG9wcGVkLCBzdG9wIGFsbC4gIGRlZmF1bHQ6IHRydWVcbiAgc3RvcFRvZ2V0aGVyPzogYm9vbGVhbixcbiAgLi4uXG59O1xuY29uc3QgcGFyYWxsZWwgPSBmdW5jdGlvbihcbiAgYW5pbWF0aW9uczogQXJyYXk8Q29tcG9zaXRlQW5pbWF0aW9uPixcbiAgY29uZmlnPzogP1BhcmFsbGVsQ29uZmlnLFxuKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgbGV0IGRvbmVDb3VudCA9IDA7XG4gIC8vIE1ha2Ugc3VyZSB3ZSBvbmx5IGNhbGwgc3RvcCgpIGF0IG1vc3Qgb25jZSBmb3IgZWFjaCBhbmltYXRpb25cbiAgY29uc3QgaGFzRW5kZWQgPSB7fTtcbiAgY29uc3Qgc3RvcFRvZ2V0aGVyID0gIShjb25maWcgJiYgY29uZmlnLnN0b3BUb2dldGhlciA9PT0gZmFsc2UpO1xuXG4gIGNvbnN0IHJlc3VsdCA9IHtcbiAgICBzdGFydDogZnVuY3Rpb24oY2FsbGJhY2s/OiA/RW5kQ2FsbGJhY2spIHtcbiAgICAgIGlmIChkb25lQ291bnQgPT09IGFuaW1hdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHtmaW5pc2hlZDogdHJ1ZX0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGFuaW1hdGlvbnMuZm9yRWFjaCgoYW5pbWF0aW9uLCBpZHgpID0+IHtcbiAgICAgICAgY29uc3QgY2IgPSBmdW5jdGlvbihlbmRSZXN1bHQpIHtcbiAgICAgICAgICBoYXNFbmRlZFtpZHhdID0gdHJ1ZTtcbiAgICAgICAgICBkb25lQ291bnQrKztcbiAgICAgICAgICBpZiAoZG9uZUNvdW50ID09PSBhbmltYXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgZG9uZUNvdW50ID0gMDtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKGVuZFJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFlbmRSZXN1bHQuZmluaXNoZWQgJiYgc3RvcFRvZ2V0aGVyKSB7XG4gICAgICAgICAgICByZXN1bHQuc3RvcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIWFuaW1hdGlvbikge1xuICAgICAgICAgIGNiKHtmaW5pc2hlZDogdHJ1ZX0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFuaW1hdGlvbi5zdGFydChjYik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpOiB2b2lkIHtcbiAgICAgIGFuaW1hdGlvbnMuZm9yRWFjaCgoYW5pbWF0aW9uLCBpZHgpID0+IHtcbiAgICAgICAgIWhhc0VuZGVkW2lkeF0gJiYgYW5pbWF0aW9uLnN0b3AoKTtcbiAgICAgICAgaGFzRW5kZWRbaWR4XSA9IHRydWU7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgICAgYW5pbWF0aW9ucy5mb3JFYWNoKChhbmltYXRpb24sIGlkeCkgPT4ge1xuICAgICAgICBhbmltYXRpb24ucmVzZXQoKTtcbiAgICAgICAgaGFzRW5kZWRbaWR4XSA9IGZhbHNlO1xuICAgICAgICBkb25lQ291bnQgPSAwO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIF9zdGFydE5hdGl2ZUxvb3A6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnTG9vcHMgcnVuIHVzaW5nIHRoZSBuYXRpdmUgZHJpdmVyIGNhbm5vdCBjb250YWluIEFuaW1hdGVkLnBhcmFsbGVsIGFuaW1hdGlvbnMnLFxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gIH07XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmNvbnN0IGRlbGF5ID0gZnVuY3Rpb24odGltZTogbnVtYmVyKTogQ29tcG9zaXRlQW5pbWF0aW9uIHtcbiAgLy8gV291bGQgYmUgbmljZSB0byBtYWtlIGEgc3BlY2lhbGl6ZWQgaW1wbGVtZW50YXRpb25cbiAgcmV0dXJuIHRpbWluZyhuZXcgQW5pbWF0ZWRWYWx1ZSgwKSwge1xuICAgIHRvVmFsdWU6IDAsXG4gICAgZGVsYXk6IHRpbWUsXG4gICAgZHVyYXRpb246IDAsXG4gICAgdXNlTmF0aXZlRHJpdmVyOiBmYWxzZSxcbiAgfSk7XG59O1xuXG5jb25zdCBzdGFnZ2VyID0gZnVuY3Rpb24oXG4gIHRpbWU6IG51bWJlcixcbiAgYW5pbWF0aW9uczogQXJyYXk8Q29tcG9zaXRlQW5pbWF0aW9uPixcbik6IENvbXBvc2l0ZUFuaW1hdGlvbiB7XG4gIHJldHVybiBwYXJhbGxlbChcbiAgICBhbmltYXRpb25zLm1hcCgoYW5pbWF0aW9uLCBpKSA9PiB7XG4gICAgICByZXR1cm4gc2VxdWVuY2UoW2RlbGF5KHRpbWUgKiBpKSwgYW5pbWF0aW9uXSk7XG4gICAgfSksXG4gICk7XG59O1xuXG50eXBlIExvb3BBbmltYXRpb25Db25maWcgPSB7XG4gIGl0ZXJhdGlvbnM6IG51bWJlcixcbiAgcmVzZXRCZWZvcmVJdGVyYXRpb24/OiBib29sZWFuLFxuICAuLi5cbn07XG5cbmNvbnN0IGxvb3AgPSBmdW5jdGlvbihcbiAgYW5pbWF0aW9uOiBDb21wb3NpdGVBbmltYXRpb24sXG4gIHtpdGVyYXRpb25zID0gLTEsIHJlc2V0QmVmb3JlSXRlcmF0aW9uID0gdHJ1ZX06IExvb3BBbmltYXRpb25Db25maWcgPSB7fSxcbik6IENvbXBvc2l0ZUFuaW1hdGlvbiB7XG4gIGxldCBpc0ZpbmlzaGVkID0gZmFsc2U7XG4gIGxldCBpdGVyYXRpb25zU29GYXIgPSAwO1xuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBmdW5jdGlvbihjYWxsYmFjaz86ID9FbmRDYWxsYmFjaykge1xuICAgICAgY29uc3QgcmVzdGFydCA9IGZ1bmN0aW9uKHJlc3VsdDogRW5kUmVzdWx0ID0ge2ZpbmlzaGVkOiB0cnVlfSk6IHZvaWQge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgaXNGaW5pc2hlZCB8fFxuICAgICAgICAgIGl0ZXJhdGlvbnNTb0ZhciA9PT0gaXRlcmF0aW9ucyB8fFxuICAgICAgICAgIHJlc3VsdC5maW5pc2hlZCA9PT0gZmFsc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVyYXRpb25zU29GYXIrKztcbiAgICAgICAgICByZXNldEJlZm9yZUl0ZXJhdGlvbiAmJiBhbmltYXRpb24ucmVzZXQoKTtcbiAgICAgICAgICBhbmltYXRpb24uc3RhcnQocmVzdGFydCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAoIWFuaW1hdGlvbiB8fCBpdGVyYXRpb25zID09PSAwKSB7XG4gICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHtmaW5pc2hlZDogdHJ1ZX0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGFuaW1hdGlvbi5faXNVc2luZ05hdGl2ZURyaXZlcigpKSB7XG4gICAgICAgICAgYW5pbWF0aW9uLl9zdGFydE5hdGl2ZUxvb3AoaXRlcmF0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdGFydCgpOyAvLyBTdGFydCBsb29waW5nIHJlY3Vyc2l2ZWx5IG9uIHRoZSBqcyB0aHJlYWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpOiB2b2lkIHtcbiAgICAgIGlzRmluaXNoZWQgPSB0cnVlO1xuICAgICAgYW5pbWF0aW9uLnN0b3AoKTtcbiAgICB9LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCk6IHZvaWQge1xuICAgICAgaXRlcmF0aW9uc1NvRmFyID0gMDtcbiAgICAgIGlzRmluaXNoZWQgPSBmYWxzZTtcbiAgICAgIGFuaW1hdGlvbi5yZXNldCgpO1xuICAgIH0sXG5cbiAgICBfc3RhcnROYXRpdmVMb29wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0xvb3BzIHJ1biB1c2luZyB0aGUgbmF0aXZlIGRyaXZlciBjYW5ub3QgY29udGFpbiBBbmltYXRlZC5sb29wIGFuaW1hdGlvbnMnLFxuICAgICAgKTtcbiAgICB9LFxuXG4gICAgX2lzVXNpbmdOYXRpdmVEcml2ZXI6IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgcmV0dXJuIGFuaW1hdGlvbi5faXNVc2luZ05hdGl2ZURyaXZlcigpO1xuICAgIH0sXG4gIH07XG59O1xuXG5mdW5jdGlvbiBmb3JrRXZlbnQoXG4gIGV2ZW50OiA/QW5pbWF0ZWRFdmVudCB8ID9GdW5jdGlvbixcbiAgbGlzdGVuZXI6IEZ1bmN0aW9uLFxuKTogQW5pbWF0ZWRFdmVudCB8IEZ1bmN0aW9uIHtcbiAgaWYgKCFldmVudCkge1xuICAgIHJldHVybiBsaXN0ZW5lcjtcbiAgfSBlbHNlIGlmIChldmVudCBpbnN0YW5jZW9mIEFuaW1hdGVkRXZlbnQpIHtcbiAgICBldmVudC5fX2FkZExpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XG4gICAgICB0eXBlb2YgZXZlbnQgPT09ICdmdW5jdGlvbicgJiYgZXZlbnQoLi4uYXJncyk7XG4gICAgICBsaXN0ZW5lciguLi5hcmdzKTtcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIHVuZm9ya0V2ZW50KFxuICBldmVudDogP0FuaW1hdGVkRXZlbnQgfCA/RnVuY3Rpb24sXG4gIGxpc3RlbmVyOiBGdW5jdGlvbixcbik6IHZvaWQge1xuICBpZiAoZXZlbnQgJiYgZXZlbnQgaW5zdGFuY2VvZiBBbmltYXRlZEV2ZW50KSB7XG4gICAgZXZlbnQuX19yZW1vdmVMaXN0ZW5lcihsaXN0ZW5lcik7XG4gIH1cbn1cblxuY29uc3QgZXZlbnQgPSBmdW5jdGlvbihcbiAgYXJnTWFwcGluZzogJFJlYWRPbmx5QXJyYXk8P01hcHBpbmc+LFxuICBjb25maWc6IEV2ZW50Q29uZmlnLFxuKTogYW55IHtcbiAgY29uc3QgYW5pbWF0ZWRFdmVudCA9IG5ldyBBbmltYXRlZEV2ZW50KGFyZ01hcHBpbmcsIGNvbmZpZyk7XG4gIGlmIChhbmltYXRlZEV2ZW50Ll9faXNOYXRpdmUpIHtcbiAgICByZXR1cm4gYW5pbWF0ZWRFdmVudDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYW5pbWF0ZWRFdmVudC5fX2dldEhhbmRsZXIoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgYEFuaW1hdGVkYCBsaWJyYXJ5IGlzIGRlc2lnbmVkIHRvIG1ha2UgYW5pbWF0aW9ucyBmbHVpZCwgcG93ZXJmdWwsIGFuZFxuICogZWFzeSB0byBidWlsZCBhbmQgbWFpbnRhaW4uIGBBbmltYXRlZGAgZm9jdXNlcyBvbiBkZWNsYXJhdGl2ZSByZWxhdGlvbnNoaXBzXG4gKiBiZXR3ZWVuIGlucHV0cyBhbmQgb3V0cHV0cywgd2l0aCBjb25maWd1cmFibGUgdHJhbnNmb3JtcyBpbiBiZXR3ZWVuLCBhbmRcbiAqIHNpbXBsZSBgc3RhcnRgL2BzdG9wYCBtZXRob2RzIHRvIGNvbnRyb2wgdGltZS1iYXNlZCBhbmltYXRpb24gZXhlY3V0aW9uLlxuICogSWYgYWRkaXRpb25hbCB0cmFuc2Zvcm1zIGFyZSBhZGRlZCwgYmUgc3VyZSB0byBpbmNsdWRlIHRoZW0gaW5cbiAqIEFuaW1hdGVkTW9jay5qcyBhcyB3ZWxsLlxuICpcbiAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkLmh0bWxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8qKlxuICAgKiBTdGFuZGFyZCB2YWx1ZSBjbGFzcyBmb3IgZHJpdmluZyBhbmltYXRpb25zLiAgVHlwaWNhbGx5IGluaXRpYWxpemVkIHdpdGhcbiAgICogYG5ldyBBbmltYXRlZC5WYWx1ZSgwKTtgXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkLmh0bWwjdmFsdWVcbiAgICovXG4gIFZhbHVlOiBBbmltYXRlZFZhbHVlLFxuICAvKipcbiAgICogMkQgdmFsdWUgY2xhc3MgZm9yIGRyaXZpbmcgMkQgYW5pbWF0aW9ucywgc3VjaCBhcyBwYW4gZ2VzdHVyZXMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkdmFsdWV4eS5odG1sXG4gICAqL1xuICBWYWx1ZVhZOiBBbmltYXRlZFZhbHVlWFksXG4gIC8qKlxuICAgKiBFeHBvcnRlZCB0byB1c2UgdGhlIEludGVycG9sYXRpb24gdHlwZSBpbiBmbG93LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZC5odG1sI2ludGVycG9sYXRpb25cbiAgICovXG4gIEludGVycG9sYXRpb246IEFuaW1hdGVkSW50ZXJwb2xhdGlvbixcbiAgLyoqXG4gICAqIEV4cG9ydGVkIGZvciBlYXNlIG9mIHR5cGUgY2hlY2tpbmcuIEFsbCBhbmltYXRlZCB2YWx1ZXMgZGVyaXZlIGZyb20gdGhpc1xuICAgKiBjbGFzcy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQuaHRtbCNub2RlXG4gICAqL1xuICBOb2RlOiBBbmltYXRlZE5vZGUsXG5cbiAgLyoqXG4gICAqIEFuaW1hdGVzIGEgdmFsdWUgZnJvbSBhbiBpbml0aWFsIHZlbG9jaXR5IHRvIHplcm8gYmFzZWQgb24gYSBkZWNheVxuICAgKiBjb2VmZmljaWVudC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQuaHRtbCNkZWNheVxuICAgKi9cbiAgZGVjYXksXG4gIC8qKlxuICAgKiBBbmltYXRlcyBhIHZhbHVlIGFsb25nIGEgdGltZWQgZWFzaW5nIGN1cnZlLiBUaGUgRWFzaW5nIG1vZHVsZSBoYXMgdG9ucyBvZlxuICAgKiBwcmVkZWZpbmVkIGN1cnZlcywgb3IgeW91IGNhbiB1c2UgeW91ciBvd24gZnVuY3Rpb24uXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkLmh0bWwjdGltaW5nXG4gICAqL1xuICB0aW1pbmcsXG4gIC8qKlxuICAgKiBBbmltYXRlcyBhIHZhbHVlIGFjY29yZGluZyB0byBhbiBhbmFseXRpY2FsIHNwcmluZyBtb2RlbCBiYXNlZCBvblxuICAgKiBkYW1wZWQgaGFybW9uaWMgb3NjaWxsYXRpb24uXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkLmh0bWwjc3ByaW5nXG4gICAqL1xuICBzcHJpbmcsXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQW5pbWF0ZWQgdmFsdWUgY29tcG9zZWQgZnJvbSB0d28gQW5pbWF0ZWQgdmFsdWVzIGFkZGVkXG4gICAqIHRvZ2V0aGVyLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZC5odG1sI2FkZFxuICAgKi9cbiAgYWRkLFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEFuaW1hdGVkIHZhbHVlIGNvbXBvc2VkIGJ5IHN1YnRyYWN0aW5nIHRoZSBzZWNvbmQgQW5pbWF0ZWRcbiAgICogdmFsdWUgZnJvbSB0aGUgZmlyc3QgQW5pbWF0ZWQgdmFsdWUuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkLmh0bWwjc3VidHJhY3RcbiAgICovXG4gIHN1YnRyYWN0LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEFuaW1hdGVkIHZhbHVlIGNvbXBvc2VkIGJ5IGRpdmlkaW5nIHRoZSBmaXJzdCBBbmltYXRlZCB2YWx1ZVxuICAgKiBieSB0aGUgc2Vjb25kIEFuaW1hdGVkIHZhbHVlLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZC5odG1sI2RpdmlkZVxuICAgKi9cbiAgZGl2aWRlLFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IEFuaW1hdGVkIHZhbHVlIGNvbXBvc2VkIGZyb20gdHdvIEFuaW1hdGVkIHZhbHVlcyBtdWx0aXBsaWVkXG4gICAqIHRvZ2V0aGVyLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZC5odG1sI211bHRpcGx5XG4gICAqL1xuICBtdWx0aXBseSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBBbmltYXRlZCB2YWx1ZSB0aGF0IGlzIHRoZSAobm9uLW5lZ2F0aXZlKSBtb2R1bG8gb2YgdGhlXG4gICAqIHByb3ZpZGVkIEFuaW1hdGVkIHZhbHVlLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZC5odG1sI21vZHVsb1xuICAgKi9cbiAgbW9kdWxvLFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgQW5pbWF0ZWQgdmFsdWUgdGhhdCBpcyBsaW1pdGVkIGJldHdlZW4gMiB2YWx1ZXMuIEl0IHVzZXMgdGhlXG4gICAqIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgbGFzdCB2YWx1ZSBzbyBldmVuIGlmIHRoZSB2YWx1ZSBpcyBmYXIgZnJvbSB0aGVcbiAgICogYm91bmRzIGl0IHdpbGwgc3RhcnQgY2hhbmdpbmcgd2hlbiB0aGUgdmFsdWUgc3RhcnRzIGdldHRpbmcgY2xvc2VyIGFnYWluLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZC5odG1sI2RpZmZjbGFtcFxuICAgKi9cbiAgZGlmZkNsYW1wLFxuXG4gIC8qKlxuICAgKiBTdGFydHMgYW4gYW5pbWF0aW9uIGFmdGVyIHRoZSBnaXZlbiBkZWxheS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQuaHRtbCNkZWxheVxuICAgKi9cbiAgZGVsYXksXG4gIC8qKlxuICAgKiBTdGFydHMgYW4gYXJyYXkgb2YgYW5pbWF0aW9ucyBpbiBvcmRlciwgd2FpdGluZyBmb3IgZWFjaCB0byBjb21wbGV0ZVxuICAgKiBiZWZvcmUgc3RhcnRpbmcgdGhlIG5leHQuIElmIHRoZSBjdXJyZW50IHJ1bm5pbmcgYW5pbWF0aW9uIGlzIHN0b3BwZWQsIG5vXG4gICAqIGZvbGxvd2luZyBhbmltYXRpb25zIHdpbGwgYmUgc3RhcnRlZC5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQuaHRtbCNzZXF1ZW5jZVxuICAgKi9cbiAgc2VxdWVuY2UsXG4gIC8qKlxuICAgKiBTdGFydHMgYW4gYXJyYXkgb2YgYW5pbWF0aW9ucyBhbGwgYXQgdGhlIHNhbWUgdGltZS4gQnkgZGVmYXVsdCwgaWYgb25lXG4gICAqIG9mIHRoZSBhbmltYXRpb25zIGlzIHN0b3BwZWQsIHRoZXkgd2lsbCBhbGwgYmUgc3RvcHBlZC4gWW91IGNhbiBvdmVycmlkZVxuICAgKiB0aGlzIHdpdGggdGhlIGBzdG9wVG9nZXRoZXJgIGZsYWcuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkLmh0bWwjcGFyYWxsZWxcbiAgICovXG4gIHBhcmFsbGVsLFxuICAvKipcbiAgICogQXJyYXkgb2YgYW5pbWF0aW9ucyBtYXkgcnVuIGluIHBhcmFsbGVsIChvdmVybGFwKSwgYnV0IGFyZSBzdGFydGVkIGluXG4gICAqIHNlcXVlbmNlIHdpdGggc3VjY2Vzc2l2ZSBkZWxheXMuICBOaWNlIGZvciBkb2luZyB0cmFpbGluZyBlZmZlY3RzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZC5odG1sI3N0YWdnZXJcbiAgICovXG4gIHN0YWdnZXIsXG4gIC8qKlxuICAgKiBMb29wcyBhIGdpdmVuIGFuaW1hdGlvbiBjb250aW51b3VzbHksIHNvIHRoYXQgZWFjaCB0aW1lIGl0IHJlYWNoZXMgdGhlXG4gICAqIGVuZCwgaXQgcmVzZXRzIGFuZCBiZWdpbnMgYWdhaW4gZnJvbSB0aGUgc3RhcnQuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkLmh0bWwjbG9vcFxuICAgKi9cbiAgbG9vcCxcblxuICAvKipcbiAgICogVGFrZXMgYW4gYXJyYXkgb2YgbWFwcGluZ3MgYW5kIGV4dHJhY3RzIHZhbHVlcyBmcm9tIGVhY2ggYXJnIGFjY29yZGluZ2x5LFxuICAgKiB0aGVuIGNhbGxzIGBzZXRWYWx1ZWAgb24gdGhlIG1hcHBlZCBvdXRwdXRzLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZC5odG1sI2V2ZW50XG4gICAqL1xuICBldmVudCxcblxuICAvKipcbiAgICogTWFrZSBhbnkgUmVhY3QgY29tcG9uZW50IEFuaW1hdGFibGUuICBVc2VkIHRvIGNyZWF0ZSBgQW5pbWF0ZWQuVmlld2AsIGV0Yy5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQuaHRtbCNjcmVhdGVhbmltYXRlZGNvbXBvbmVudFxuICAgKi9cbiAgY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQsXG5cbiAgLyoqXG4gICAqIEltcGVyYXRpdmUgQVBJIHRvIGF0dGFjaCBhbiBhbmltYXRlZCB2YWx1ZSB0byBhbiBldmVudCBvbiBhIHZpZXcuIFByZWZlclxuICAgKiB1c2luZyBgQW5pbWF0ZWQuZXZlbnRgIHdpdGggYHVzZU5hdGl2ZURyaXZlOiB0cnVlYCBpZiBwb3NzaWJsZS5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYW5pbWF0ZWQuaHRtbCNhdHRhY2huYXRpdmVldmVudFxuICAgKi9cbiAgYXR0YWNoTmF0aXZlRXZlbnQsXG5cbiAgLyoqXG4gICAqIEFkdmFuY2VkIGltcGVyYXRpdmUgQVBJIGZvciBzbm9vcGluZyBvbiBhbmltYXRlZCBldmVudHMgdGhhdCBhcmUgcGFzc2VkIGluXG4gICAqIHRocm91Z2ggcHJvcHMuIFVzZSB2YWx1ZXMgZGlyZWN0bHkgd2hlcmUgcG9zc2libGUuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkLmh0bWwjZm9ya2V2ZW50XG4gICAqL1xuICBmb3JrRXZlbnQsXG4gIHVuZm9ya0V2ZW50LFxuXG4gIC8qKlxuICAgKiBFeHBvc2UgRXZlbnQgY2xhc3MsIHNvIGl0IGNhbiBiZSB1c2VkIGFzIGEgdHlwZSBmb3IgdHlwZSBjaGVja2Vycy5cbiAgICovXG4gIEV2ZW50OiBBbmltYXRlZEV2ZW50LFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBVUEsWUFBWTs7QUFBQyxJQUFBQSxzQkFBQSxHQUFBQyxPQUFBO0FBQUEsSUFBQUMsU0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBRWIsSUFBQUUsUUFBQSxHQUEyQ0YsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0VBQTlERyxhQUFhLEdBQUFELFFBQUEsQ0FBYkMsYUFBYTtFQUFFQyxpQkFBaUIsR0FBQUYsUUFBQSxDQUFqQkUsaUJBQWlCO0FBQ3ZDLElBQU1DLGdCQUFnQixHQUFHTCxPQUFPLENBQUMsMEJBQTBCLENBQUM7QUFDNUQsSUFBTU0saUJBQWlCLEdBQUdOLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUM5RCxJQUFNTyxnQkFBZ0IsR0FBR1AsT0FBTyxDQUFDLDBCQUEwQixDQUFDO0FBQzVELElBQU1RLHFCQUFx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