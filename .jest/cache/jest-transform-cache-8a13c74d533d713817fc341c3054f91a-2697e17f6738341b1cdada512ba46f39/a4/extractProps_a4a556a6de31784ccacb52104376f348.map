{"version":3,"names":["_extractFill","_interopRequireDefault","require","_extractStroke","_extractTransform","_extractResponder","_extractOpacity","_util","clipRules","evenodd","nonzero","propsAndStyles","props","style","_objectSpread","Array","isArray","Object","assign","apply","concat","_toConsumableArray2","default","getMarker","marker","undefined","matched","match","idPattern","extractProps","ref","id","opacity","onLayout","clipPath","clipRule","display","mask","_props$markerStart","markerStart","_props$markerMid","markerMid","_props$markerEnd","markerEnd","transform","extracted","inherited","length","propList","transformProps","props2transform","matrix","transformToMatrix","name","String","console","warn","_matched","extract","instance","withoutXY","x","y"],"sources":["extractProps.ts"],"sourcesContent":["import extractFill from './extractFill';\nimport extractStroke from './extractStroke';\nimport { props2transform, transformToMatrix } from './extractTransform';\nimport extractResponder from './extractResponder';\nimport extractOpacity from './extractOpacity';\nimport { idPattern } from '../util';\nimport {\n  ClipProps,\n  extractedProps,\n  FillProps,\n  NumberProp,\n  ResponderProps,\n  StrokeProps,\n  TransformProps,\n} from './types';\n\nconst clipRules: { evenodd: number; nonzero: number } = {\n  evenodd: 0,\n  nonzero: 1,\n};\n\nexport function propsAndStyles(props: Object & { style?: [] | {} }) {\n  const { style } = props;\n  return !style\n    ? props\n    : {\n        ...(Array.isArray(style) ? Object.assign({}, ...style) : style),\n        ...props,\n      };\n}\n\nfunction getMarker(marker?: string) {\n  if (!marker) {\n    return undefined;\n  }\n  const matched = marker.match(idPattern);\n  return matched ? matched[1] : undefined;\n}\n\nexport default function extractProps(\n  props: {\n    id?: string;\n    mask?: string;\n    marker?: string;\n    markerStart?: string;\n    markerMid?: string;\n    markerEnd?: string;\n    clipPath?: string;\n    display?: string;\n    opacity?: NumberProp;\n    onLayout?: () => void;\n    transform?: number[] | string | TransformProps;\n  } & TransformProps &\n    ResponderProps &\n    StrokeProps &\n    FillProps &\n    ClipProps,\n  ref: Object,\n) {\n  const {\n    id,\n    opacity,\n    onLayout,\n    clipPath,\n    clipRule,\n    display,\n    mask,\n    marker,\n    markerStart = marker,\n    markerMid = marker,\n    markerEnd = marker,\n    transform,\n  } = props;\n  const extracted: extractedProps = {};\n\n  const inherited: string[] = [];\n  extractResponder(extracted, props, ref);\n  extractFill(extracted, props, inherited);\n  extractStroke(extracted, props, inherited);\n\n  if (inherited.length) {\n    extracted.propList = inherited;\n  }\n\n  const transformProps = props2transform(props);\n  const matrix = transformToMatrix(transformProps, transform);\n  if (matrix !== null) {\n    extracted.matrix = matrix;\n  }\n\n  if (opacity != null) {\n    extracted.opacity = extractOpacity(opacity);\n  }\n\n  if (display != null) {\n    extracted.display = display === 'none' ? 'none' : undefined;\n  }\n\n  if (onLayout) {\n    extracted.onLayout = onLayout;\n  }\n\n  if (markerStart) {\n    extracted.markerStart = getMarker(markerStart);\n  }\n  if (markerMid) {\n    extracted.markerMid = getMarker(markerMid);\n  }\n  if (markerEnd) {\n    extracted.markerEnd = getMarker(markerEnd);\n  }\n\n  if (id) {\n    extracted.name = String(id);\n  }\n\n  if (clipRule) {\n    extracted.clipRule = clipRules[clipRule] === 0 ? 0 : 1;\n  }\n  if (clipPath) {\n    const matched = clipPath.match(idPattern);\n    if (matched) {\n      extracted.clipPath = matched[1];\n    } else {\n      console.warn(\n        'Invalid `clipPath` prop, expected a clipPath like \"#id\", but got: \"' +\n          clipPath +\n          '\"',\n      );\n    }\n  }\n\n  if (mask) {\n    const matched = mask.match(idPattern);\n\n    if (matched) {\n      extracted.mask = matched[1];\n    } else {\n      console.warn(\n        'Invalid `mask` prop, expected a mask like \"#id\", but got: \"' +\n          mask +\n          '\"',\n      );\n    }\n  }\n\n  return extracted;\n}\n\nexport function extract(instance: Object, props: Object & { style?: [] | {} }) {\n  return extractProps(propsAndStyles(props), instance);\n}\n\nexport function withoutXY(\n  instance: Object,\n  props: Object & { style?: [] | {} },\n) {\n  return extractProps({ ...propsAndStyles(props), x: null, y: null }, instance);\n}\n"],"mappings":"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"}